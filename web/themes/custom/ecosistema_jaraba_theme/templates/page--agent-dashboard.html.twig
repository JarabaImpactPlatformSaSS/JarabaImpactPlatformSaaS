{#
/**
 * @file
 * page--agent-dashboard.html.twig — Dashboard del Mercado de Agentes Autonomos.
 * Diseno futurista, modo oscuro por defecto.
 *
 * NOTA: Este es un PAGE template, NO un HTML template.
 * El wrapper DOCTYPE/html/head/body lo proporciona html.html.twig.
 * Este template solo genera el contenido dentro de body.
 *
 * Body classes migradas a preprocess_html:
 * - page-agent-dashboard, theme-dark
 */
#}
{{ attach_library('ecosistema_jaraba_theme/global') }}

  <div class="agent-dashboard">
    {# Header Minimalista #}
    <header class="agent-dashboard__header">
      <div class="agent-brand">
        {{ jaraba_icon('ai', 'network', { size: '32px', color: '#00F0FF' }) }}
        <span>Jaraba <strong>Agent Network</strong></span>
      </div>
      <div class="agent-status">
        <span class="status-indicator status-indicator--active"></span>
        {{ 'Red Operativa'|t }}
      </div>
    </header>

    <main class="agent-dashboard__grid">
      {# Panel Izquierdo: Gemelos Activos #}
      <aside class="agent-sidebar">
        <h3>{{ 'Mis Gemelos'|t }}</h3>
        {% for twin in twins %}
          <div class="twin-card">
            <div class="twin-card__header">
              <span class="twin-name">{{ twin.name }}</span>
              <span class="twin-role badge">{{ twin.role }}</span>
            </div>
            <div class="twin-card__stats">
              <div class="stat">
                <label>{{ 'Tratos'|t }}</label>
                <span>{{ twin.deals_count }}</span>
              </div>
              <div class="stat">
                <label>{{ 'Volumen'|t }}</label>
                <span>{{ twin.volume }} €</span>
              </div>
            </div>
          </div>
        {% endfor %}
      </aside>

      {# Panel Central: Visualizador de Negociación en Tiempo Real #}
      <section class="negotiation-viewer">
        <div class="viewer-header">
          <h2>{{ 'Actividad de Mercado en Vivo'|t }}</h2>
        </div>
        <div class="viewer-feed" id="negotiation-feed">
          {# Aquí se inyectan los eventos JDTP vía JS/WebSockets #}
          <div class="feed-item">
            <span class="time">10:42:01</span>
            <span class="actor">Agent_Alpha</span>
            <span class="action">BID</span>
            <span class="detail">100kg Tomate @ 2.45€</span>
          </div>
        </div>
      </section>
    </main>
  </div>

