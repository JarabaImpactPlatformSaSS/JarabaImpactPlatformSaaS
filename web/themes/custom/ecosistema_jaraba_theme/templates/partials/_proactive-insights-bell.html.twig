{#
/**
 * @file
 * Proactive Insights bell notification button.
 *
 * GAP-AUD-010: Bell icon with badge count for unread insights.
 * Clicking opens a slide panel with insight cards.
 *
 * Variables:
 * - proactive_insights_count: Number of unread insights.
 */
#}
{% if logged_in and proactive_insights_count is defined and proactive_insights_count > 0 %}
  <div class="proactive-insights-bell" data-proactive-insights-bell>
    <button type="button"
            class="proactive-insights-bell__trigger"
            aria-label="{{ 'Proactive Insights: @count unread'|t({'@count': proactive_insights_count}) }}"
            aria-expanded="false">
      <svg class="proactive-insights-bell__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
        <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
      </svg>
      {% if proactive_insights_count > 0 %}
        <span class="proactive-insights-bell__badge">{{ proactive_insights_count > 9 ? '9+' : proactive_insights_count }}</span>
      {% endif %}
    </button>

    <div class="proactive-insights-panel" aria-hidden="true" data-proactive-insights-panel>
      <div class="proactive-insights-panel__header">
        <h3 class="proactive-insights-panel__title">{{ 'Insights'|t }}</h3>
      </div>
      <div class="proactive-insights-panel__body" data-proactive-insights-list>
        {# Cards are loaded dynamically via JS #}
      </div>
    </div>
  </div>
{% endif %}
