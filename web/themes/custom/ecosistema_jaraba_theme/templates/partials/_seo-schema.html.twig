{#
/**
 * @file
 * _seo-schema.html.twig
 *
 * Genera datos estructurados (Schema.org) en formato JSON-LD.
 * Ayuda a Google a entender que el sitio es una Organización y SaaS.
 *
 * DESIGN DECISIONS (Sprint 3 - Growth Infrastructure):
 * - contactPoint: teléfono y email desde Theme Settings (TAB 14: Legal)
 * - sameAs: URLs de RRSS desde Theme Settings (TAB 6: Footer > Social)
 * - Datos reales verificables: sin placeholders
 *
 * DIRECTRICES:
 * - SEO-SCHEMA-001: Schema.org Organization + WebApplication
 * - i18n: strings traducibles con |t
 * - No hardcoded: todos los datos provienen de configuración
 */
#}
{% set site_name = site_name|default('Jaraba Impact Platform') %}
{% set site_url = url('<front>', {}, {absolute: true}) %}
{% set logo_url = logo ? logo : (site_url ~ 'themes/custom/ecosistema_jaraba_theme/logo.svg') %}
{% set ts = theme_settings|default({}) %}

{# Datos de contacto desde Theme Settings TAB 14 (Páginas Legales) #}
{% set contact_email = ts.contact_email|default('info@jarabaimpact.com') %}
{% set contact_phone = ts.contact_phone|default('+34 623 174 304') %}

{# RRSS desde Theme Settings TAB 6 (Footer > Social) #}
{% set social_urls = [] %}
{% if ts.footer_social_linkedin %}{% set social_urls = social_urls|merge([ts.footer_social_linkedin]) %}{% endif %}
{% if ts.footer_social_twitter %}{% set social_urls = social_urls|merge([ts.footer_social_twitter]) %}{% endif %}
{% if ts.footer_social_facebook %}{% set social_urls = social_urls|merge([ts.footer_social_facebook]) %}{% endif %}
{% if ts.footer_social_instagram %}{% set social_urls = social_urls|merge([ts.footer_social_instagram]) %}{% endif %}
{% if ts.footer_social_youtube %}{% set social_urls = social_urls|merge([ts.footer_social_youtube]) %}{% endif %}

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "{{ site_name }}",
  "url": "{{ site_url }}",
  "logo": "{{ logo_url }}",
  "description": "{{ 'Plataforma SaaS de desarrollo local: empleabilidad, emprendimiento, comercio y agroalimentación — impulsada por IA.'|t }}",
  "founder": {
    "@type": "Person",
    "name": "Pepe Jaraba",
    "jobTitle": "{{ 'Fundador y Director de Ecosistemas Digitales'|t }}"
  },
  "areaServed": {
    "@type": "Country",
    "name": "Spain"
  },
  {% if social_urls|length > 0 %}
  "sameAs": {{ social_urls|json_encode|raw }},
  {% endif %}
  "contactPoint": {
    "@type": "ContactPoint",
    "email": "{{ contact_email }}",
    "telephone": "{{ contact_phone }}",
    "contactType": "customer service",
    "areaServed": "ES",
    "availableLanguage": ["Spanish", "English"]
  }
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "{{ site_name }}",
  "url": "{{ site_url }}",
  "applicationCategory": "BusinessApplication",
  "operatingSystem": "All",
  "abstract": "{{ 'Plataforma SaaS con 10 verticales especializados, 11 agentes IA Gen 2, copiloto integrado, firma digital PAdES, multi-tenancy y 80+ módulos custom. Empleabilidad, emprendimiento, agroalimentación, comercio local, servicios profesionales, legal, formación e inserción laboral.'|t }}",
  "offers": {
    "@type": "AggregateOffer",
    "lowPrice": "0",
    "highPrice": "199",
    "priceCurrency": "EUR",
    "offerCount": "4"
  },
  "featureList": [
    "{{ 'Copiloto IA personalizado con 11 agentes Gen 2 especializados'|t }}",
    "{{ 'Empleabilidad — Diagnóstico, CV con IA, matching inteligente 5D, LMS gamificado'|t }}",
    "{{ 'Emprendimiento — BMC con IA, validación MVP, health score, 15 insignias digitales'|t }}",
    "{{ 'AgroConecta — Trazabilidad QR, marketplace km0, previsión demanda IA'|t }}",
    "{{ 'ComercioConecta — Tienda online, SEO local, fidelización, analytics'|t }}",
    "{{ 'ServiciosConecta — Reservas, presupuestador IA, firma digital, buzón confianza'|t }}",
    "{{ 'JarabaLex — Inteligencia legislativa BOE/BOJA, coherencia jurídica, 5 módulos legales'|t }}",
    "{{ 'Talento — Mini-ATS 8 estados, matching 5D, asistente IA reclutador'|t }}",
    "{{ 'Formación — Cursos adaptativos, OpenBadge v3, dificultad adaptativa'|t }}",
    "{{ 'Andalucía +ei — Programa inserción con expediente digital y triage IA'|t }}",
    "{{ 'Firma digital PAdES via AutoFirma con validez legal europea eIDAS'|t }}",
    "{{ 'Multi-tenancy con Stripe Connect, API REST completa y white-label'|t }}"
  ]
}
</script>


