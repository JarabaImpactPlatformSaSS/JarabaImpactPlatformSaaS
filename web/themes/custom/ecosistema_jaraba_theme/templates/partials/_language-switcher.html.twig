{#
/**
 * @file _language-switcher.html.twig
 * Selector de idioma para meta-sitios.
 *
 * Muestra banderas/c칩digos de idioma bas치ndose en las traducciones
 * disponibles de la p치gina actual.
 *
 * Variables esperadas:
 * - available_languages: array de langcodes con traducci칩n (['es', 'en', 'pt-br'])
 * - current_langcode: idioma actual de la p치gina ('es')
 *
 * Dise침o: Dropdown compacto que encaja en la zona de acciones del header.
 * Mobile: Se muestra inline en el overlay del men칰 m칩vil.
 */
#}
{% set langs = available_languages|default(['es']) %}
{% set current_lang = current_langcode|default('es') %}
{% set current_path = path('<current>') %}
{% set base_url = (url('<front>', {}, {absolute: true}) ~ '')|trim('/') %}

{# Mapa de labels e iconos por idioma #}
{% set lang_labels = {
  'es': { code: 'ES', name: 'Espa침ol', flag: '游쀯릖' },
  'en': { code: 'EN', name: 'English', flag: '游섫릖' },
  'pt-br': { code: 'PT', name: 'Portugu칡s', flag: '游游' },
} %}

{% if langs|length > 1 %}
<div class="language-switcher" aria-label="{% trans %}Language selector{% endtrans %}">
  <button class="language-switcher__toggle" aria-expanded="false" aria-haspopup="true">
    <span class="language-switcher__current">
      {{ lang_labels[current_lang].code|default(current_lang|upper) }}
    </span>
    <svg class="language-switcher__arrow" width="10" height="6" viewBox="0 0 10 6" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M1 1L5 5L9 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </button>
  <ul class="language-switcher__dropdown" role="menu">
    {% for lang in langs %}
      {% if lang != current_lang %}
        <li role="menuitem">
          <a href="{{ base_url }}/{{ lang }}{{ current_path }}"
             class="language-switcher__option"
             hreflang="{{ lang }}"
             lang="{{ lang }}">
            <span class="language-switcher__flag">{{ lang_labels[lang].flag|default('游깷') }}</span>
            <span class="language-switcher__name">{{ lang_labels[lang].name|default(lang) }}</span>
            <span class="language-switcher__code">{{ lang_labels[lang].code|default(lang|upper) }}</span>
          </a>
        </li>
      {% endif %}
    {% endfor %}
  </ul>
</div>
{% endif %}
