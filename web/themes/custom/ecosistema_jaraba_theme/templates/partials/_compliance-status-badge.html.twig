{#
/**
 * @file
 * _compliance-status-badge.html.twig — Badge de estado de compliance reutilizable.
 *
 * PROPOSITO: Mostrar un badge con icono + texto + color segun estado de compliance.
 * Usado en dashboards de privacidad, legal y DR.
 *
 * VARIABLES:
 * - status: string — Estado del badge ('ok', 'warning', 'error', 'info', 'pending')
 * - label: string — Texto a mostrar en el badge
 * - icon_category: string (optional) — Categoria del icono (default: 'compliance')
 * - icon_name: string (optional) — Nombre del icono SVG
 * - size: string (optional) — Tamano del badge ('sm', 'md', 'lg') default: 'md'
 * - count: int (optional) — Numero a mostrar junto al label
 *
 * DIRECTRICES:
 * - i18n: Todos los textos usan {% trans %}
 * - SCSS: Solo var(--ej-*) con fallbacks inline
 * - Patron BEM: .compliance-badge, .compliance-badge--ok, etc.
 *
 * @see docs/implementacion/20260216-Plan_Implementacion_Stack_Compliance_Legal_N1_v1.md
 */
#}
{% set badge_status = status|default('info') %}
{% set badge_size = size|default('md') %}
{% set badge_label = label|default('') %}

<span class="compliance-badge compliance-badge--{{ badge_status }} compliance-badge--{{ badge_size }}">
  {% if icon_name is defined and icon_name %}
    {{ jaraba_icon(icon_category|default('compliance'), icon_name, {
      variant: 'duotone',
      size: badge_size == 'sm' ? '14px' : (badge_size == 'lg' ? '22px' : '18px')
    }) }}
  {% endif %}

  <span class="compliance-badge__label">
    {{ badge_label }}
  </span>

  {% if count is defined and count is not null %}
    <span class="compliance-badge__count">{{ count }}</span>
  {% endif %}
</span>
