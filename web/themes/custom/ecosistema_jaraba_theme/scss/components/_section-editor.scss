/**
 * @file
 * Estilos del Editor de Secciones Multi-Block.
 *
 * PROPÓSITO:
 * Estilos para la interfaz drag-and-drop de gestión de secciones.
 *
 * TOKENS UTILIZADOS:
 * - var(--ej-color-*): Colores del tema
 * - var(--ej-spacing-*): Espaciado
 * - var(--ej-radius-*): Border radius
 * - var(--ej-shadow-*): Sombras
 */

.section-editor {
    position: relative;

    // ═══════════════════════════════════════════════════════════════════════════
    // HEADER
    // ═══════════════════════════════════════════════════════════════════════════
    &__header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: var(--ej-spacing-md, 1rem);
        background: var(--ej-color-surface-elevated, #1a1a2e);
        border-radius: var(--ej-radius-lg, 12px);
        margin-bottom: var(--ej-spacing-md, 1rem);
    }

    &__title-group {
        display: flex;
        align-items: baseline;
        gap: var(--ej-spacing-sm, 0.5rem);
    }

    &__title {
        font-size: 1.25rem;
        font-weight: 600;
        margin: 0;
        color: var(--ej-color-text-primary, #ffffff);
    }

    &__count {
        font-size: 0.875rem;
        color: var(--ej-color-text-muted, #8892b0);
    }

    // ═══════════════════════════════════════════════════════════════════════════
    // LOADING STATE
    // ═══════════════════════════════════════════════════════════════════════════
    &__loading {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: var(--ej-spacing-xl, 3rem);
        color: var(--ej-color-text-muted, #8892b0);
    }

    &__spinner {
        width: 32px;
        height: 32px;
        border: 3px solid var(--ej-color-border, #2d2d44);
        border-top-color: var(--ej-color-primary, #00d4aa);
        border-radius: 50%;
        animation: section-editor-spin 0.8s linear infinite;
    }

    @keyframes section-editor-spin {
        to {
            transform: rotate(360deg);
        }
    }

    // ═══════════════════════════════════════════════════════════════════════════
    // LISTA DE SECCIONES
    // ═══════════════════════════════════════════════════════════════════════════
    &__list {
        display: flex;
        flex-direction: column;
        gap: var(--ej-spacing-sm, 0.5rem);
    }

    &__empty {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: var(--ej-spacing-xl, 3rem);
        background: var(--ej-color-surface, #16161a);
        border: 2px dashed var(--ej-color-border, #2d2d44);
        border-radius: var(--ej-radius-lg, 12px);
        color: var(--ej-color-text-muted, #8892b0);
        text-align: center;

        svg {
            margin-bottom: var(--ej-spacing-md, 1rem);
            opacity: 0.5;
        }

        p {
            margin-bottom: var(--ej-spacing-md, 1rem);
        }
    }

    // ═══════════════════════════════════════════════════════════════════════════
    // ITEM DE SECCIÓN
    // ═══════════════════════════════════════════════════════════════════════════
    &__item {
        display: flex;
        align-items: center;
        gap: var(--ej-spacing-md, 1rem);
        padding: var(--ej-spacing-sm, 0.5rem) var(--ej-spacing-md, 1rem);
        background: var(--ej-color-surface-elevated, #1a1a2e);
        border: 1px solid var(--ej-color-border, #2d2d44);
        border-radius: var(--ej-radius-md, 8px);
        transition: all 0.2s ease;

        &:hover {
            border-color: var(--ej-color-primary, #00d4aa);
            box-shadow: 0 0 0 1px var(--ej-color-primary, #00d4aa);
        }

        &--hidden {
            opacity: 0.5;

            .section-editor__thumbnail img {
                filter: grayscale(100%);
            }
        }

        // Estados de SortableJS
        &--ghost {
            opacity: 0.4;
            background: var(--ej-color-primary-soft, rgba(0, 212, 170, 0.1));
        }

        &--chosen {
            box-shadow: var(--ej-shadow-lg, 0 8px 32px rgba(0, 0, 0, 0.4));
        }

        &--drag {
            cursor: grabbing;
        }
    }

    &__drag-handle {
        cursor: grab;
        padding: var(--ej-spacing-xs, 0.25rem);
        color: var(--ej-color-text-muted, #8892b0);
        transition: color 0.2s;

        &:hover {
            color: var(--ej-color-primary, #00d4aa);
        }

        &:active {
            cursor: grabbing;
        }
    }

    &__thumbnail {
        width: 80px;
        height: 50px;
        border-radius: var(--ej-radius-sm, 4px);
        overflow: hidden;
        flex-shrink: 0;
        background: var(--ej-color-surface, #16161a);

        img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
    }

    &__info {
        flex: 1;
        min-width: 0;
    }

    &__section-title {
        font-size: 0.9375rem;
        font-weight: 500;
        margin: 0 0 0.25rem;
        color: var(--ej-color-text-primary, #ffffff);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    &__meta {
        display: flex;
        align-items: center;
        gap: var(--ej-spacing-sm, 0.5rem);
        font-size: 0.75rem;
    }

    &__template-id {
        color: var(--ej-color-text-muted, #8892b0);
        font-family: monospace;
    }

    &__visibility {
        padding: 0.125rem 0.5rem;
        border-radius: var(--ej-radius-sm, 4px);
        font-size: 0.6875rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;

        &--visible {
            background: rgba(0, 212, 170, 0.15);
            color: var(--ej-color-primary, #00d4aa);
        }

        &--hidden {
            background: rgba(255, 107, 107, 0.15);
            color: #ff6b6b;
        }
    }

    // ═══════════════════════════════════════════════════════════════════════════
    // ACCIONES
    // ═══════════════════════════════════════════════════════════════════════════
    &__actions {
        display: flex;
        gap: var(--ej-spacing-xs, 0.25rem);
    }

    &__action {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 32px;
        height: 32px;
        border: none;
        border-radius: var(--ej-radius-sm, 4px);
        background: transparent;
        color: var(--ej-color-text-muted, #8892b0);
        cursor: pointer;
        transition: all 0.2s;

        &:hover {
            background: var(--ej-color-surface, #16161a);
        }

        &--edit:hover {
            color: var(--ej-color-primary, #00d4aa);
        }

        &--visibility:hover {
            color: #f59e0b;
        }

        &--delete:hover {
            color: #ff6b6b;
            background: rgba(255, 107, 107, 0.1);
        }
    }

    // ═══════════════════════════════════════════════════════════════════════════
    // GRID DE TEMPLATES (PANEL AÑADIR)
    // ═══════════════════════════════════════════════════════════════════════════
    &__panel-intro {
        margin-bottom: var(--ej-spacing-md, 1rem);
        color: var(--ej-color-text-muted, #8892b0);
    }

    &__template-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
        gap: var(--ej-spacing-sm, 0.5rem);
    }

    &__template-card {
        position: relative;
        display: flex;
        flex-direction: column;
        padding: var(--ej-spacing-sm, 0.5rem);
        background: var(--ej-color-surface, #16161a);
        border: 1px solid var(--ej-color-border, #2d2d44);
        border-radius: var(--ej-radius-md, 8px);
        cursor: pointer;
        transition: all 0.2s;
        text-align: left;

        &:hover {
            border-color: var(--ej-color-primary, #00d4aa);
            transform: translateY(-2px);
        }

        &:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
    }

    &__template-thumb {
        width: 100%;
        height: 80px;
        object-fit: cover;
        border-radius: var(--ej-radius-sm, 4px);
        margin-bottom: var(--ej-spacing-xs, 0.25rem);
    }

    &__template-info {
        display: flex;
        flex-direction: column;
    }

    &__template-name {
        font-size: 0.8125rem;
        font-weight: 500;
        color: var(--ej-color-text-primary, #ffffff);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    &__template-category {
        font-size: 0.6875rem;
        color: var(--ej-color-text-muted, #8892b0);
        text-transform: capitalize;
    }

    &__template-badge {
        position: absolute;
        top: 0.5rem;
        right: 0.5rem;
        padding: 0.125rem 0.375rem;
        background: linear-gradient(135deg, #f59e0b, #d97706);
        color: #ffffff;
        font-size: 0.5625rem;
        font-weight: 700;
        border-radius: var(--ej-radius-sm, 4px);
        text-transform: uppercase;
        letter-spacing: 0.1em;
    }

    // ═══════════════════════════════════════════════════════════════════════════
    // FORM DE EDICIÓN
    // ═══════════════════════════════════════════════════════════════════════════
    &__form-group {
        margin-bottom: var(--ej-spacing-md, 1rem);

        label {
            display: block;
            margin-bottom: var(--ej-spacing-xs, 0.25rem);
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--ej-color-text-secondary, #a8b2c1);
        }
    }

    &__textarea {
        width: 100%;
        padding: var(--ej-spacing-sm, 0.5rem);
        background: var(--ej-color-surface, #16161a);
        border: 1px solid var(--ej-color-border, #2d2d44);
        border-radius: var(--ej-radius-sm, 4px);
        color: var(--ej-color-text-primary, #ffffff);
        font-family: monospace;
        font-size: 0.8125rem;
        resize: vertical;

        &:focus {
            outline: none;
            border-color: var(--ej-color-primary, #00d4aa);
        }
    }

    // ═══════════════════════════════════════════════════════════════════════════
    // OVERLAY DE GUARDADO
    // ═══════════════════════════════════════════════════════════════════════════
    &__saving-overlay {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(22, 22, 26, 0.8);
        border-radius: var(--ej-radius-lg, 12px);
        z-index: 100;
    }
}