/**
 * @file
 * Skeleton Screens — Shimmer loading placeholders.
 *
 * Muestra formas animadas con efecto shimmer mientras se cargan datos.
 * Reutiliza la animacion shimmer definida en _hero-landing.scss.
 * Todos los valores usan CSS Custom Properties con fallback SCSS.
 *
 * DIRECTRICES:
 * - DESIGN-TOKEN-FEDERATED-001: var(--ej-*) con fallback
 * - BEM-NAMING-001: .ej-skeleton, .ej-skeleton__line, .ej-skeleton__line--80
 * - COLOR-MIX-MIGRATION-001: Sin darken()/lighten()
 * - Accesibilidad: prefers-reduced-motion respetado via _accessibility.scss global
 *
 * COMPILACION:
 * lando ssh -c "cd /app/web/themes/custom/ecosistema_jaraba_theme && \
 *   npx sass scss/main.scss:css/main.css --style=compressed --no-source-map"
 */

// Shimmer keyframes — reutiliza nombre 'shimmer' ya definido en _hero-landing.scss.
// Si este parcial se carga despues, Sass no duplica keyframes con mismo nombre
// en el output compilado cuando se usa @use. Si hubiera conflicto, usamos
// nombre propio 'ej-shimmer'. Lo definimos igualmente por seguridad de aislamiento.
@keyframes ej-shimmer {
  0% {
    background-position: -200% 0;
  }

  100% {
    background-position: 200% 0;
  }
}

// === BASE SKELETON ELEMENT (placeholder pattern) ===
%skeleton-element {
  background: linear-gradient(
    90deg,
    var(--ej-gray-200, #EEEEEE) 25%,
    var(--ej-gray-100, #F5F5F5) 50%,
    var(--ej-gray-200, #EEEEEE) 75%
  );
  background-size: 200% 100%;
  animation: ej-shimmer 1.5s ease-in-out infinite;
  border-radius: var(--ej-border-radius-sm, 6px);
}

// === CONTAINER ===
.ej-skeleton {
  width: 100%;

  // Ocultar skeleton cuando el contenido real ya cargo
  &.is-hidden {
    display: none;
  }

  // Grid para variante stat cuando hay multiples
  &--stat {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--ej-spacing-md, 1rem);
  }

  // Grid para variante card cuando hay multiples
  &--card {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--ej-spacing-md, 1rem);
  }
}

// === ELEMENTOS INDIVIDUALES ===

.ej-skeleton__image {
  @extend %skeleton-element;
  width: 100%;
  aspect-ratio: 16 / 9;
  border-radius: var(--ej-border-radius, 10px) var(--ej-border-radius, 10px) 0 0;
  margin-bottom: var(--ej-spacing-sm, 0.5rem);
}

.ej-skeleton__line {
  @extend %skeleton-element;
  height: 14px;
  margin-bottom: 8px;

  &--full { width: 100%; }
  &--80   { width: 80%; }
  &--70   { width: 70%; }
  &--60   { width: 60%; }
  &--50   { width: 50%; }
  &--40   { width: 40%; }
}

.ej-skeleton__circle {
  @extend %skeleton-element;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  flex-shrink: 0;

  &--sm {
    width: 32px;
    height: 32px;
  }
}

.ej-skeleton__lines {
  flex: 1;
  min-width: 0;
}

// === VARIANTE: CARD ===
.ej-skeleton__card {
  background: var(--ej-bg-card, #ffffff);
  border-radius: var(--ej-border-radius, 10px);
  padding: var(--ej-spacing-md, 1rem);
  box-shadow: var(--ej-shadow-sm, 0 2px 8px rgba(0, 0, 0, 0.06));
}

// === VARIANTE: STAT ===
.ej-skeleton__stat {
  display: flex;
  align-items: center;
  gap: var(--ej-spacing-md, 1rem);
  padding: var(--ej-spacing-md, 1rem);
  background: var(--ej-bg-card, #ffffff);
  border-radius: var(--ej-border-radius, 10px);
  box-shadow: var(--ej-shadow-sm, 0 2px 8px rgba(0, 0, 0, 0.06));
}

// === VARIANTE: TABLE ===
.ej-skeleton__table {
  width: 100%;
  background: var(--ej-bg-card, #ffffff);
  border-radius: var(--ej-border-radius, 10px);
  padding: var(--ej-spacing-md, 1rem);
  box-shadow: var(--ej-shadow-sm, 0 2px 8px rgba(0, 0, 0, 0.06));
}

.ej-skeleton__table-header,
.ej-skeleton__table-row {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--ej-spacing-sm, 0.5rem);
  padding: var(--ej-spacing-sm, 0.5rem) 0;
}

.ej-skeleton__table-header {
  border-bottom: 1px solid var(--ej-border-color, #E0E0E0);
  padding-bottom: var(--ej-spacing-sm, 0.5rem);
  margin-bottom: var(--ej-spacing-xs, 0.25rem);
}

.ej-skeleton__cell {
  @extend %skeleton-element;
  height: 16px;

  &--header {
    height: 12px;
    opacity: 0.6;
  }
}

// === VARIANTE: LIST ===
.ej-skeleton__list {
  background: var(--ej-bg-card, #ffffff);
  border-radius: var(--ej-border-radius, 10px);
  padding: var(--ej-spacing-md, 1rem);
  box-shadow: var(--ej-shadow-sm, 0 2px 8px rgba(0, 0, 0, 0.06));
}

.ej-skeleton__list-item {
  display: flex;
  align-items: center;
  gap: var(--ej-spacing-sm, 0.5rem);
  padding: var(--ej-spacing-sm, 0.5rem) 0;

  &:not(:last-child) {
    border-bottom: 1px solid var(--ej-border-color-light, #EEEEEE);
  }
}
