# Rutas del módulo Andalucía +ei
# CRÍTICO: Content Entities en /admin/content, Settings en /admin/structure

# === COLECCIÓN DE PARTICIPANTES ===
entity.programa_participante_ei.collection:
  path: '/admin/content/andalucia-ei'
  defaults:
    _entity_list: 'programa_participante_ei'
    _title: 'Participantes Andalucía +ei'
  requirements:
    _permission: 'view programa participante ei'

# === CRUD PARTICIPANTE ===
entity.programa_participante_ei.canonical:
  path: '/admin/content/andalucia-ei/{programa_participante_ei}'
  defaults:
    _entity_view: 'programa_participante_ei'
    _title: 'Ver Participante'
  requirements:
    _permission: 'view programa participante ei'

entity.programa_participante_ei.add_form:
  path: '/admin/content/andalucia-ei/add'
  defaults:
    _entity_form: 'programa_participante_ei.add'
    _title: 'Añadir Participante'
  requirements:
    _permission: 'create programa participante ei'

entity.programa_participante_ei.edit_form:
  path: '/admin/content/andalucia-ei/{programa_participante_ei}/edit'
  defaults:
    _entity_form: 'programa_participante_ei.edit'
    _title: 'Editar Participante'
  requirements:
    _permission: 'edit programa participante ei'

entity.programa_participante_ei.delete_form:
  path: '/admin/content/andalucia-ei/{programa_participante_ei}/delete'
  defaults:
    _entity_form: 'programa_participante_ei.delete'
    _title: 'Eliminar Participante'
  requirements:
    _permission: 'delete programa participante ei'

# === SETTINGS (para Field UI) - en /admin/structure ===
entity.programa_participante_ei.settings:
  path: '/admin/structure/programa-participante-ei'
  defaults:
    _form: 'Drupal\jaraba_andalucia_ei\Form\ProgramaParticipanteEiSettingsForm'
    _title: 'Configuración Participante Andalucía +ei'
  requirements:
    _permission: 'administer andalucia ei'

# === CONFIGURACIÓN DEL MÓDULO ===
jaraba_andalucia_ei.settings:
  path: '/admin/config/programas/andalucia-ei'
  defaults:
    _form: 'Drupal\jaraba_andalucia_ei\Form\AndaluciaEiSettingsForm'
    _title: 'Configuración Andalucía +ei'
  requirements:
    _permission: 'administer andalucia ei'

# === EXPORTACIÓN STO ===
jaraba_andalucia_ei.sto_export:
  path: '/admin/content/andalucia-ei/export-sto'
  defaults:
    _controller: 'Drupal\jaraba_andalucia_ei\Controller\StoExportController::exportForm'
    _title: 'Exportar para STO'
  requirements:
    _permission: 'export sto data'

# === FRONTEND DASHBOARD ===
jaraba_andalucia_ei.dashboard:
  path: '/andalucia-ei'
  defaults:
    _controller: 'Drupal\jaraba_andalucia_ei\Controller\AndaluciaEiController::dashboard'
    _title: 'Andalucía +ei'
  requirements:
    _permission: 'access content'

# === API AJAX PARA SLIDE-PANEL (AND-001) ===
jaraba_andalucia_ei.api.participant.add_form:
  path: '/api/v1/andalucia-ei/participant/add'
  defaults:
    _controller: 'Drupal\jaraba_andalucia_ei\Controller\AndaluciaEiApiController::addForm'
  methods: [GET]
  requirements:
    _permission: 'create programa participante ei'

jaraba_andalucia_ei.api.participant.edit_form:
  path: '/api/v1/andalucia-ei/participant/{id}/edit'
  defaults:
    _controller: 'Drupal\jaraba_andalucia_ei\Controller\AndaluciaEiApiController::editForm'
  methods: [GET]
  requirements:
    _permission: 'edit programa participante ei'
    id: '\d+'

jaraba_andalucia_ei.api.participants.list:
  path: '/api/v1/andalucia-ei/participants'
  defaults:
    _controller: 'Drupal\jaraba_andalucia_ei\Controller\AndaluciaEiApiController::listParticipants'
  methods: [GET]
  requirements:
    _permission: 'view programa participante ei'
    _format: 'json'

jaraba_andalucia_ei.api.participant.get:
  path: '/api/v1/andalucia-ei/participant/{id}'
  defaults:
    _controller: 'Drupal\jaraba_andalucia_ei\Controller\AndaluciaEiApiController::getParticipant'
  methods: [GET]
  requirements:
    _permission: 'view programa participante ei'
    _format: 'json'
    id: '\d+'

jaraba_andalucia_ei.api.participant.delete:
  path: '/api/v1/andalucia-ei/participant/{id}'
  defaults:
    _controller: 'Drupal\jaraba_andalucia_ei\Controller\AndaluciaEiApiController::deleteParticipant'
  methods: [DELETE]
  requirements:
    _permission: 'delete programa participante ei'
    _csrf_request_header_token: 'TRUE'
    _format: 'json'
    id: '\d+'

# === FORMULARIO DE SOLICITUD (PÚBLICO) ===
jaraba_andalucia_ei.solicitar:
  path: '/andalucia-ei/solicitar'
  defaults:
    _controller: 'Drupal\jaraba_andalucia_ei\Controller\SolicitudEiController::solicitar'
    _title: 'Solicitar plaza - Andalucía +ei'
  requirements:
    _permission: 'access content'

# === SOLICITUDES: COLECCIÓN ADMIN ===
entity.solicitud_ei.collection:
  path: '/admin/content/andalucia-ei/solicitudes'
  defaults:
    _entity_list: 'solicitud_ei'
    _title: 'Solicitudes Andalucía +ei'
  requirements:
    _permission: 'view solicitud ei'

# === SOLICITUDES: CRUD ===
entity.solicitud_ei.canonical:
  path: '/admin/content/andalucia-ei/solicitudes/{solicitud_ei}'
  defaults:
    _entity_view: 'solicitud_ei'
    _title: 'Ver Solicitud'
  requirements:
    _permission: 'view solicitud ei'

entity.solicitud_ei.add_form:
  path: '/admin/content/andalucia-ei/solicitudes/add'
  defaults:
    _entity_form: 'solicitud_ei.add'
    _title: 'Añadir Solicitud'
  requirements:
    _permission: 'create solicitud ei'

entity.solicitud_ei.edit_form:
  path: '/admin/content/andalucia-ei/solicitudes/{solicitud_ei}/edit'
  defaults:
    _entity_form: 'solicitud_ei.edit'
    _title: 'Editar Solicitud'
  requirements:
    _permission: 'edit solicitud ei'

entity.solicitud_ei.delete_form:
  path: '/admin/content/andalucia-ei/solicitudes/{solicitud_ei}/delete'
  defaults:
    _entity_form: 'solicitud_ei.delete'
    _title: 'Eliminar Solicitud'
  requirements:
    _permission: 'delete solicitud ei'

# === SOLICITUDES: SETTINGS (Field UI) ===
entity.solicitud_ei.settings:
  path: '/admin/structure/solicitud-ei'
  defaults:
    _form: 'Drupal\jaraba_andalucia_ei\Form\SolicitudEiSettingsForm'
    _title: 'Configuración Solicitud Andalucía +ei'
  requirements:
    _permission: 'administer andalucia ei'
