# Rutas del módulo Andalucía +ei
# CRÍTICO: Content Entities en /admin/content, Settings en /admin/structure

# === COLECCIÓN DE PARTICIPANTES ===
entity.programa_participante_ei.collection:
  path: '/admin/content/andalucia-ei'
  defaults:
    _entity_list: 'programa_participante_ei'
    _title: 'Participantes Andalucía +ei'
  requirements:
    _permission: 'view programa participante ei'

# === CRUD PARTICIPANTE ===
entity.programa_participante_ei.canonical:
  path: '/admin/content/andalucia-ei/{programa_participante_ei}'
  defaults:
    _entity_view: 'programa_participante_ei'
    _title: 'Ver Participante'
  requirements:
    _permission: 'view programa participante ei'

entity.programa_participante_ei.add_form:
  path: '/admin/content/andalucia-ei/add'
  defaults:
    _entity_form: 'programa_participante_ei.add'
    _title: 'Añadir Participante'
  requirements:
    _permission: 'create programa participante ei'

entity.programa_participante_ei.edit_form:
  path: '/admin/content/andalucia-ei/{programa_participante_ei}/edit'
  defaults:
    _entity_form: 'programa_participante_ei.edit'
    _title: 'Editar Participante'
  requirements:
    _permission: 'edit programa participante ei'

entity.programa_participante_ei.delete_form:
  path: '/admin/content/andalucia-ei/{programa_participante_ei}/delete'
  defaults:
    _entity_form: 'programa_participante_ei.delete'
    _title: 'Eliminar Participante'
  requirements:
    _permission: 'delete programa participante ei'

# === SETTINGS (para Field UI) - en /admin/structure ===
entity.programa_participante_ei.settings:
  path: '/admin/structure/programa-participante-ei'
  defaults:
    _form: 'Drupal\jaraba_andalucia_ei\Form\ProgramaParticipanteEiSettingsForm'
    _title: 'Configuración Participante Andalucía +ei'
  requirements:
    _permission: 'administer andalucia ei'

# === CONFIGURACIÓN DEL MÓDULO ===
jaraba_andalucia_ei.settings:
  path: '/admin/config/programas/andalucia-ei'
  defaults:
    _form: 'Drupal\jaraba_andalucia_ei\Form\AndaluciaEiSettingsForm'
    _title: 'Configuración Andalucía +ei'
  requirements:
    _permission: 'administer andalucia ei'

# === EXPORTACIÓN STO ===
jaraba_andalucia_ei.sto_export:
  path: '/admin/content/andalucia-ei/export-sto'
  defaults:
    _controller: 'Drupal\jaraba_andalucia_ei\Controller\StoExportController::exportForm'
    _title: 'Exportar para STO'
  requirements:
    _permission: 'export sto data'

# === FRONTEND DASHBOARD ===
jaraba_andalucia_ei.dashboard:
  path: '/andalucia-ei'
  defaults:
    _controller: 'Drupal\jaraba_andalucia_ei\Controller\AndaluciaEiController::dashboard'
    _title: 'Andalucía +ei'
  requirements:
    _permission: 'access content'

# === API AJAX PARA SLIDE-PANEL (AND-001) ===
jaraba_andalucia_ei.api.participant.add_form:
  path: '/api/v1/andalucia-ei/participant/add'
  defaults:
    _controller: 'Drupal\jaraba_andalucia_ei\Controller\AndaluciaEiApiController::addForm'
  methods: [GET]
  requirements:
    _permission: 'create programa participante ei'

jaraba_andalucia_ei.api.participant.edit_form:
  path: '/api/v1/andalucia-ei/participant/{id}/edit'
  defaults:
    _controller: 'Drupal\jaraba_andalucia_ei\Controller\AndaluciaEiApiController::editForm'
  methods: [GET]
  requirements:
    _permission: 'edit programa participante ei'
    id: '\d+'

jaraba_andalucia_ei.api.participants.list:
  path: '/api/v1/andalucia-ei/participants'
  defaults:
    _controller: 'Drupal\jaraba_andalucia_ei\Controller\AndaluciaEiApiController::listParticipants'
  methods: [GET]
  requirements:
    _permission: 'view programa participante ei'
    _format: 'json'

jaraba_andalucia_ei.api.participant.get:
  path: '/api/v1/andalucia-ei/participant/{id}'
  defaults:
    _controller: 'Drupal\jaraba_andalucia_ei\Controller\AndaluciaEiApiController::getParticipant'
  methods: [GET]
  requirements:
    _permission: 'view programa participante ei'
    _format: 'json'
    id: '\d+'

jaraba_andalucia_ei.api.participant.delete:
  path: '/api/v1/andalucia-ei/participant/{id}'
  defaults:
    _controller: 'Drupal\jaraba_andalucia_ei\Controller\AndaluciaEiApiController::deleteParticipant'
  methods: [DELETE]
  requirements:
    _permission: 'delete programa participante ei'
    _csrf_request_header_token: 'TRUE'
    _format: 'json'
    id: '\d+'

# === PORTAL DE PARTICIPANTE ===
jaraba_andalucia_ei.participante_portal:
  path: '/andalucia-ei/mi-participacion'
  defaults:
    _controller: 'Drupal\jaraba_andalucia_ei\Controller\ParticipantePortalController::portal'
    _title: 'Mi Participación'
  requirements:
    _permission: 'access content'
    _participante_access: 'TRUE'

jaraba_andalucia_ei.participante_portal_api:
  path: '/api/v1/andalucia-ei/mi-participacion'
  defaults:
    _controller: 'Drupal\jaraba_andalucia_ei\Controller\ParticipantePortalController::portalData'
  methods: [GET]
  requirements:
    _permission: 'access content'
    _participante_access: 'TRUE'
    _format: 'json'

jaraba_andalucia_ei.informe_progreso_pdf:
  path: '/andalucia-ei/informe-progreso'
  defaults:
    _controller: 'Drupal\jaraba_andalucia_ei\Controller\ParticipantePortalController::descargarInforme'
    _title: 'Informe de Progreso'
  requirements:
    _permission: 'access content'
    _participante_access: 'TRUE'

# === LEAD MAGNET: GUÍA DEL PARTICIPANTE ===
jaraba_andalucia_ei.guia_participante:
  path: '/andalucia-ei/guia-participante'
  defaults:
    _controller: 'Drupal\jaraba_andalucia_ei\Controller\GuiaParticipanteController::guia'
    _title: 'Guía del Participante - Andalucía +ei'
  requirements:
    _permission: 'access content'

# === API: GUÍA DOWNLOAD (POST) ===
jaraba_andalucia_ei.guia_download_api:
  path: '/api/v1/andalucia-ei/guia-download'
  defaults:
    _controller: 'Drupal\jaraba_andalucia_ei\Controller\GuiaParticipanteController::handleGuiaDownload'
  methods: [POST]
  requirements:
    _access: 'TRUE'

# === LANDING PAGE DE CONVERSIÓN ===
jaraba_andalucia_ei.landing:
  path: '/andalucia-ei/programa'
  defaults:
    _controller: 'Drupal\jaraba_andalucia_ei\Controller\AndaluciaEiLandingController::landing'
    _title: 'Programa Andalucía +ei'
  requirements:
    _permission: 'access content'

# === FORMULARIO DE SOLICITUD (PÚBLICO) ===
jaraba_andalucia_ei.solicitar:
  path: '/andalucia-ei/solicitar'
  defaults:
    _controller: 'Drupal\jaraba_andalucia_ei\Controller\SolicitudEiController::solicitar'
    _title: 'Solicitar plaza - Andalucía +ei'
  requirements:
    _permission: 'access content'

# === SOLICITUDES: COLECCIÓN ADMIN ===
entity.solicitud_ei.collection:
  path: '/admin/content/andalucia-ei/solicitudes'
  defaults:
    _entity_list: 'solicitud_ei'
    _title: 'Solicitudes Andalucía +ei'
  requirements:
    _permission: 'view solicitud ei'

# === SOLICITUDES: CRUD ===
entity.solicitud_ei.canonical:
  path: '/admin/content/andalucia-ei/solicitudes/{solicitud_ei}'
  defaults:
    _entity_view: 'solicitud_ei'
    _title: 'Ver Solicitud'
  requirements:
    _permission: 'view solicitud ei'

entity.solicitud_ei.add_form:
  path: '/admin/content/andalucia-ei/solicitudes/add'
  defaults:
    _entity_form: 'solicitud_ei.add'
    _title: 'Añadir Solicitud'
  requirements:
    _permission: 'create solicitud ei'

entity.solicitud_ei.edit_form:
  path: '/admin/content/andalucia-ei/solicitudes/{solicitud_ei}/edit'
  defaults:
    _entity_form: 'solicitud_ei.edit'
    _title: 'Editar Solicitud'
  requirements:
    _permission: 'edit solicitud ei'

entity.solicitud_ei.delete_form:
  path: '/admin/content/andalucia-ei/solicitudes/{solicitud_ei}/delete'
  defaults:
    _entity_form: 'solicitud_ei.delete'
    _title: 'Eliminar Solicitud'
  requirements:
    _permission: 'delete solicitud ei'

# === SOLICITUDES: SETTINGS (Field UI) ===
entity.solicitud_ei.settings:
  path: '/admin/structure/solicitud-ei'
  defaults:
    _form: 'Drupal\jaraba_andalucia_ei\Form\SolicitudEiSettingsForm'
    _title: 'Configuración Solicitud Andalucía +ei'
  requirements:
    _permission: 'administer andalucia ei'

# === EXPEDIENTE DOCUMENTAL: COLECCIÓN ADMIN ===
entity.expediente_documento.collection:
  path: '/admin/content/expediente-documentos'
  defaults:
    _entity_list: 'expediente_documento'
    _title: 'Documentos de Expediente'
  requirements:
    _permission: 'view expediente documento'

# === EXPEDIENTE DOCUMENTAL: CRUD ===
entity.expediente_documento.canonical:
  path: '/admin/content/expediente-documentos/{expediente_documento}'
  defaults:
    _entity_view: 'expediente_documento'
    _title: 'Ver Documento'
  requirements:
    _permission: 'view expediente documento'

entity.expediente_documento.add_form:
  path: '/admin/content/expediente-documentos/add'
  defaults:
    _entity_form: 'expediente_documento.add'
    _title: 'Añadir Documento'
  requirements:
    _permission: 'create expediente documento'

entity.expediente_documento.edit_form:
  path: '/admin/content/expediente-documentos/{expediente_documento}/edit'
  defaults:
    _entity_form: 'expediente_documento.edit'
    _title: 'Editar Documento'
  requirements:
    _permission: 'edit expediente documento'

entity.expediente_documento.delete_form:
  path: '/admin/content/expediente-documentos/{expediente_documento}/delete'
  defaults:
    _entity_form: 'expediente_documento.delete'
    _title: 'Eliminar Documento'
  requirements:
    _permission: 'delete expediente documento'

# === EXPEDIENTE DOCUMENTAL: SETTINGS (Field UI) ===
entity.expediente_documento.settings:
  path: '/admin/structure/expediente-documento'
  defaults:
    _form: 'Drupal\jaraba_andalucia_ei\Form\ExpedienteDocumentoSettingsForm'
    _title: 'Configuración Documento de Expediente'
  requirements:
    _permission: 'administer andalucia ei'
