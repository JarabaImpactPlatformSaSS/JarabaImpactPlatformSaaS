{#
/**
 * @file
 * Lista de sub-pedidos del productor.
 *
 * Variables:
 *   - orders: Array de sub-pedidos serializados
 *   - total: Total de sub-pedidos
 *
 * Body class: producer-orders-page
 */
#}
<div class="producer-portal">
  <div class="producer-portal__header">
    <h1 class="producer-portal__title">{{ 'Mis Pedidos'|t }}</h1>
    <nav class="producer-portal__nav">
      <a href="/productor" class="producer-portal__nav-link">{{ 'Dashboard'|t }}</a>
      <a href="/productor/pedidos" class="producer-portal__nav-link producer-portal__nav-link--active">{{ 'Pedidos'|t }}</a>
      <a href="/productor/productos" class="producer-portal__nav-link">{{ 'Productos'|t }}</a>
      <a href="/productor/finanzas" class="producer-portal__nav-link">{{ 'Finanzas'|t }}</a>
      <a href="/productor/configuracion" class="producer-portal__nav-link">{{ 'Configuración'|t }}</a>
    </nav>
  </div>

  <div class="producer-portal__content producer-portal__content--full">
    <div class="producer-portal__section-header">
      <h2 class="producer-portal__section-title">{{ 'Total:'|t }} {{ total }} {{ 'pedidos'|t }}</h2>
    </div>

    {% if orders is not empty %}
      <div class="producer-portal__orders-table">
        <table class="producer-portal__table">
          <thead>
            <tr>
              <th>{{ 'Nº Sub-pedido'|t }}</th>
              <th>{{ 'Cliente'|t }}</th>
              <th>{{ 'Subtotal'|t }}</th>
              <th>{{ 'Comisión'|t }}</th>
              <th>{{ 'Payout'|t }}</th>
              <th>{{ 'Estado'|t }}</th>
              <th>{{ 'Tracking'|t }}</th>
              <th>{{ 'Fecha'|t }}</th>
              <th>{{ 'Acciones'|t }}</th>
            </tr>
          </thead>
          <tbody>
            {% for order in orders %}
              <tr>
                <td><strong>{{ order.suborder_number }}</strong></td>
                <td>{{ order.customer_email }}</td>
                <td>{{ order.subtotal }}</td>
                <td>{{ order.commission }}</td>
                <td>
                  <span class="producer-portal__payout-badge producer-portal__payout-badge--{{ order.payout_state }}">
                    {{ order.payout }}
                  </span>
                </td>
                <td>
                  <span class="producer-portal__order-state producer-portal__order-state--{{ order.state }}">
                    {{ order.state_label }}
                  </span>
                </td>
                <td>{{ order.tracking_number ?: '—' }}</td>
                <td>{{ order.created }}</td>
                <td>
                  <a href="/productor/pedidos/{{ order.id }}" class="producer-portal__btn producer-portal__btn--sm">{{ 'Detalle'|t }}</a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <p class="producer-portal__empty">{{ 'No tienes pedidos aún.'|t }}</p>
    {% endif %}
  </div>
</div>
