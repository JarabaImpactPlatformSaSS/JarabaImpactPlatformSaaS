/**
 * @file
 * Estilos de envío y tracking AgroConecta.
 *
 * DIRECTRIZ: Solo var(--ej-*, $fallback) — NUNCA $ej-* locales.
 * Fase 5 — Shipping Core.
 */

// === CARRIER SELECTOR (en Checkout) ===

.agro-shipping-selector {
    &__title {
        font-size: var(--ej-font-size-base, 1rem);
        font-weight: 600;
        color: var(--ej-color-text-primary, #1a1a2e);
        margin: 0 0 var(--ej-spacing-sm, 0.75rem);
    }

    &__loading {
        display: flex;
        align-items: center;
        gap: var(--ej-spacing-sm, 0.75rem);
        color: var(--ej-color-text-muted, #6b7280);
        padding: var(--ej-spacing-md, 1rem) 0;
        font-size: var(--ej-font-size-sm, 0.875rem);
    }

    &__options {
        display: flex;
        flex-direction: column;
        gap: var(--ej-spacing-sm, 0.75rem);
    }

    &__option {
        display: grid;
        grid-template-columns: auto 1fr auto;
        align-items: center;
        gap: var(--ej-spacing-md, 1rem);
        padding: var(--ej-spacing-md, 1rem);
        border: 2px solid var(--ej-color-border, #e5e7eb);
        border-radius: var(--ej-radius-md, 8px);
        cursor: pointer;
        transition: border-color 0.2s ease, background 0.2s ease, box-shadow 0.2s ease;

        &:hover {
            border-color: var(--ej-color-primary, #2d6a4f);
            background: rgba(45, 106, 79, 0.02);
        }

        &--selected {
            border-color: var(--ej-color-primary, #2d6a4f);
            background: rgba(45, 106, 79, 0.04);
            box-shadow: 0 0 0 1px var(--ej-color-primary, #2d6a4f);
        }

        &--refrigerated {
            position: relative;

            &::after {
                content: '❄️ Refrigerado';
                position: absolute;
                top: -8px;
                right: 12px;
                background: #dbeafe;
                color: #1e40af;
                font-size: 0.7rem;
                font-weight: 600;
                padding: 2px 8px;
                border-radius: 10px;
            }
        }

        input[type="radio"] {
            width: 18px;
            height: 18px;
            accent-color: var(--ej-color-primary, #2d6a4f);
        }
    }

    &__option-info {
        display: flex;
        flex-direction: column;
        gap: 2px;
    }

    &__carrier-name {
        font-weight: 600;
        font-size: var(--ej-font-size-base, 1rem);
        color: var(--ej-color-text-primary, #1a1a2e);
    }

    &__delivery-time {
        font-size: var(--ej-font-size-sm, 0.875rem);
        color: var(--ej-color-text-muted, #6b7280);
    }

    &__option-price {
        font-weight: 700;
        font-size: var(--ej-font-size-lg, 1.125rem);
        color: var(--ej-color-primary, #2d6a4f);
        white-space: nowrap;

        &--free {
            color: #059669;
            font-weight: 700;
        }
    }

    &__free-threshold {
        margin-top: var(--ej-spacing-xs, 0.5rem);
        padding: var(--ej-spacing-xs, 0.5rem) var(--ej-spacing-sm, 0.75rem);
        background: linear-gradient(135deg, #ecfdf5, #d1fae5);
        border-radius: var(--ej-radius-sm, 6px);
        font-size: var(--ej-font-size-sm, 0.875rem);
        color: #065f46;
        display: flex;
        align-items: center;
        gap: var(--ej-spacing-xs, 0.5rem);
    }
}

// === TRACKING TIMELINE ===

.agro-tracking {
    padding: var(--ej-spacing-lg, 1.5rem);
    background: var(--ej-color-surface, #fff);
    border-radius: var(--ej-radius-lg, 12px);
    border: 1px solid var(--ej-color-border, #e5e7eb);

    &__header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: var(--ej-spacing-lg, 1.5rem);
    }

    &__title {
        font-size: var(--ej-font-size-lg, 1.125rem);
        font-weight: 600;
        color: var(--ej-color-text-primary, #1a1a2e);
        display: flex;
        align-items: center;
        gap: var(--ej-spacing-xs, 0.5rem);
    }

    &__tracking-number {
        font-size: var(--ej-font-size-sm, 0.875rem);
        color: var(--ej-color-text-muted, #6b7280);
        font-family: monospace;
    }

    &__status-badge {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: var(--ej-font-size-xs, 0.75rem);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;

        &--pending {
            background: #fef3c7;
            color: #92400e;
        }

        &--shipped {
            background: #dbeafe;
            color: #1e40af;
        }

        &--in-transit {
            background: #e0e7ff;
            color: #3730a3;
        }

        &--delivered {
            background: #d1fae5;
            color: #065f46;
        }
    }

    // Timeline vertical
    &__timeline {
        position: relative;
        padding-left: 32px;

        &::before {
            content: '';
            position: absolute;
            left: 11px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--ej-color-border, #e5e7eb);
        }
    }

    &__event {
        position: relative;
        padding-bottom: var(--ej-spacing-lg, 1.5rem);

        &:last-child {
            padding-bottom: 0;
        }

        &::before {
            content: '';
            position: absolute;
            left: -25px;
            top: 4px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--ej-color-border, #d1d5db);
            border: 2px solid var(--ej-color-surface, #fff);
            z-index: 1;
        }

        &--completed::before {
            background: var(--ej-color-primary, #2d6a4f);
            box-shadow: 0 0 0 4px rgba(45, 106, 79, 0.15);
        }

        &--current::before {
            background: #3b82f6;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.2);
            animation: agro-pulse 2s ease-in-out infinite;
        }
    }

    &__event-time {
        font-size: var(--ej-font-size-xs, 0.75rem);
        color: var(--ej-color-text-muted, #9ca3af);
        margin-bottom: 2px;
    }

    &__event-title {
        font-weight: 600;
        color: var(--ej-color-text-primary, #1a1a2e);
        font-size: var(--ej-font-size-sm, 0.875rem);
    }

    &__event-location {
        font-size: var(--ej-font-size-xs, 0.75rem);
        color: var(--ej-color-text-muted, #6b7280);
        margin-top: 2px;
    }

    // Estimated delivery
    &__eta {
        margin-top: var(--ej-spacing-md, 1rem);
        padding: var(--ej-spacing-sm, 0.75rem);
        background: linear-gradient(135deg, #f0fdf4, #ecfdf5);
        border-radius: var(--ej-radius-md, 8px);
        display: flex;
        align-items: center;
        gap: var(--ej-spacing-sm, 0.75rem);
        font-size: var(--ej-font-size-sm, 0.875rem);
        color: #065f46;

        strong {
            font-weight: 700;
        }
    }
}

@keyframes agro-pulse {
    0%, 100% { box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.2); }
    50% { box-shadow: 0 0 0 8px rgba(59, 130, 246, 0.1); }
}

// === SHIPPING ZONES (Admin) ===

.agro-shipping-zones {
    &__grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: var(--ej-spacing-md, 1rem);
    }

    &__zone-card {
        background: var(--ej-color-surface, #fff);
        border-radius: var(--ej-radius-lg, 12px);
        padding: var(--ej-spacing-md, 1rem);
        border: 1px solid var(--ej-color-border, #e5e7eb);
        transition: box-shadow 0.2s ease;

        &:hover {
            box-shadow: var(--ej-shadow-md, 0 4px 12px rgba(0, 0, 0, 0.08));
        }
    }

    &__zone-name {
        font-weight: 600;
        font-size: var(--ej-font-size-base, 1rem);
        color: var(--ej-color-text-primary, #1a1a2e);
    }

    &__zone-type {
        display: inline-block;
        padding: 2px 8px;
        border-radius: 4px;
        font-size: var(--ej-font-size-xs, 0.75rem);
        font-weight: 500;
        background: #f3f4f6;
        color: #374151;
        margin-top: 4px;
    }

    &__rates-list {
        margin-top: var(--ej-spacing-sm, 0.75rem);
        list-style: none;
        padding: 0;

        li {
            display: flex;
            justify-content: space-between;
            padding: 4px 0;
            font-size: var(--ej-font-size-sm, 0.875rem);
            border-bottom: 1px solid var(--ej-color-border-light, #f3f4f6);

            &:last-child {
                border-bottom: none;
            }
        }
    }
}
