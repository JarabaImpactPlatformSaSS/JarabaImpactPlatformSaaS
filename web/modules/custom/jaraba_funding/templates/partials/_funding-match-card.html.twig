{#
/**
 * @file
 * Match card component for funding calls.
 *
 * Displays a funding call with its match score, key info and actions.
 *
 * Variables:
 * - match: The match data object with score, call and breakdown.
 */
#}
<article class="funding-match-card" data-call-id="{{ match.call.id }}">
  {# Score badge #}
  {% set score_class = 'low' %}
  {% if match.score >= 80 %}
    {% set score_class = 'high' %}
  {% elseif match.score >= 60 %}
    {% set score_class = 'medium' %}
  {% endif %}
  <div class="funding-match-card__score funding-match-card__score--{{ score_class }}">
    <span class="funding-match-card__score-value">{{ match.score }}</span>
    <span class="funding-match-card__score-label">{{ 'Match'|t }}</span>
  </div>

  {# Call info #}
  <div class="funding-match-card__body">
    <div class="funding-match-card__header">
      <h3 class="funding-match-card__title">{{ match.call.title }}</h3>
      <span class="funding-match-card__region-badge">{{ match.call.region }}</span>
    </div>

    <div class="funding-match-card__info">
      <div class="funding-match-card__info-item">
        <span class="funding-match-card__info-label">{{ 'Plazo'|t }}:</span>
        <span class="funding-match-card__info-value">{{ match.call.deadline }}</span>
      </div>
      <div class="funding-match-card__info-item">
        <span class="funding-match-card__info-label">{{ 'Importe'|t }}:</span>
        <span class="funding-match-card__info-value">{{ match.call.amount }}</span>
      </div>
      <div class="funding-match-card__info-item">
        <span class="funding-match-card__info-label">{{ 'Tipo beneficiario'|t }}:</span>
        <span class="funding-match-card__info-value">{{ match.call.beneficiary_type }}</span>
      </div>
    </div>

    {# Score breakdown mini-bars #}
    <div class="funding-match-card__breakdown">
      <div class="funding-match-card__breakdown-item">
        <span class="funding-match-card__breakdown-label">{{ 'Region'|t }}</span>
        <div class="funding-match-card__breakdown-bar">
          <div class="funding-match-card__breakdown-fill" style="width: {{ match.breakdown.region }}%;"></div>
        </div>
      </div>
      <div class="funding-match-card__breakdown-item">
        <span class="funding-match-card__breakdown-label">{{ 'Beneficiario'|t }}</span>
        <div class="funding-match-card__breakdown-bar">
          <div class="funding-match-card__breakdown-fill" style="width: {{ match.breakdown.beneficiary }}%;"></div>
        </div>
      </div>
      <div class="funding-match-card__breakdown-item">
        <span class="funding-match-card__breakdown-label">{{ 'Sector'|t }}</span>
        <div class="funding-match-card__breakdown-bar">
          <div class="funding-match-card__breakdown-fill" style="width: {{ match.breakdown.sector }}%;"></div>
        </div>
      </div>
      <div class="funding-match-card__breakdown-item">
        <span class="funding-match-card__breakdown-label">{{ 'Tamano'|t }}</span>
        <div class="funding-match-card__breakdown-bar">
          <div class="funding-match-card__breakdown-fill" style="width: {{ match.breakdown.size }}%;"></div>
        </div>
      </div>
      <div class="funding-match-card__breakdown-item">
        <span class="funding-match-card__breakdown-label">{{ 'Requisitos'|t }}</span>
        <div class="funding-match-card__breakdown-bar">
          <div class="funding-match-card__breakdown-fill" style="width: {{ match.breakdown.requirements }}%;"></div>
        </div>
      </div>
    </div>
  </div>

  {# Actions #}
  <div class="funding-match-card__actions">
    <button class="funding-match-card__action funding-match-card__action--detail" data-action="detail">
      {{ 'Ver detalle'|t }}
    </button>
    <button class="funding-match-card__action funding-match-card__action--interested" data-action="interested">
      {{ 'Me interesa'|t }}
    </button>
    <button class="funding-match-card__action funding-match-card__action--dismiss" data-action="dismiss">
      {{ 'Descartar'|t }}
    </button>
  </div>
</article>
