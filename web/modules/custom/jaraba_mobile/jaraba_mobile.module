<?php

/**
 * @file
 * Jaraba Mobile module.
 *
 * Native mobile app backend: device registry, push notifications, deep linking.
 */

declare(strict_types=1);

use Drupal\Core\Routing\RouteMatchInterface;

/**
 * Implements hook_help().
 */
function jaraba_mobile_help(string $route_name, RouteMatchInterface $route_match): string {
  if ($route_name === 'help.page.jaraba_mobile') {
    return '<p>' . t('Jaraba Mobile: Native mobile app backend with device registry, push notifications, and deep linking.') . '</p>';
  }
  return '';
}

/**
 * Implements hook_preprocess_html().
 *
 * Adds body class 'page-mobile-admin' on admin routes belonging to this module.
 */
function jaraba_mobile_preprocess_html(array &$variables): void {
  $route_name = \Drupal::routeMatch()->getRouteName();
  if ($route_name && str_starts_with($route_name, 'jaraba_mobile.')) {
    $variables['attributes']['class'][] = 'page-mobile-admin';
  }
}
