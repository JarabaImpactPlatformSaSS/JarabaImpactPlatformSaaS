# =============================================================================
# Rutas del módulo Jaraba Ads
# Estructura: rutas de settings (Field UI), dashboard admin y API REST
# Lógica: cada entidad tiene su ruta de settings para field_ui_base_route,
#   las rutas CRUD de entidad las genera AdminHtmlRouteProvider automáticamente.
#   El dashboard admin muestra analítica consolidada.
#   Las rutas API requieren autenticación y filtran por tenant automáticamente.
# =============================================================================

# --- Settings Route (para Field UI de la entidad) ---

jaraba_ads.ad_campaign.settings:
  path: '/admin/structure/ad-campaigns'
  defaults:
    _form: '\Drupal\jaraba_ads\Form\AdCampaignSettingsForm'
    _title: 'Configuración Campañas Ads'
  requirements:
    _permission: 'administer ads settings'

# --- Dashboard Admin de Ads ---

jaraba_ads.dashboard:
  path: '/admin/ads'
  defaults:
    _controller: '\Drupal\jaraba_ads\Controller\AdsDashboardController::dashboard'
    _title: 'Dashboard de Publicidad'
  requirements:
    _permission: 'view ads dashboard'

# --- Rutas API REST ---

jaraba_ads.api.campaigns:
  path: '/api/v1/ads'
  defaults:
    _controller: '\Drupal\jaraba_ads\Controller\AdsApiController::listCampaigns'
  methods: [GET]
  requirements:
    _user_is_logged_in: 'TRUE'

jaraba_ads.api.campaigns.detail:
  path: '/api/v1/ads/{campaign_id}'
  defaults:
    _controller: '\Drupal\jaraba_ads\Controller\AdsApiController::getCampaign'
  methods: [GET]
  requirements:
    _user_is_logged_in: 'TRUE'
    campaign_id: '\d+'

jaraba_ads.api.campaigns.metrics:
  path: '/api/v1/ads/metrics'
  defaults:
    _controller: '\Drupal\jaraba_ads\Controller\AdsApiController::getMetrics'
  methods: [GET]
  requirements:
    _permission: 'view ads dashboard'

jaraba_ads.api.campaigns.spend:
  path: '/api/v1/ads/spend-by-platform'
  defaults:
    _controller: '\Drupal\jaraba_ads\Controller\AdsApiController::getSpendByPlatform'
  methods: [GET]
  requirements:
    _permission: 'view ads dashboard'

# --- Settings Routes para nuevas entidades (Field UI) ---

jaraba_ads.ads_account.settings:
  path: '/admin/structure/ads-accounts'
  defaults:
    _form: '\Drupal\jaraba_ads\Form\AdsAccountSettingsForm'
    _title: 'Configuración Cuentas de Ads'
  requirements:
    _permission: 'administer ads settings'

jaraba_ads.ads_campaign_sync.settings:
  path: '/admin/structure/ads-campaign-sync'
  defaults:
    _form: '\Drupal\jaraba_ads\Form\AdsCampaignSyncSettingsForm'
    _title: 'Configuración Sincronización de Campañas'
  requirements:
    _permission: 'administer ads settings'

jaraba_ads.ads_metrics_daily.settings:
  path: '/admin/structure/ads-metrics-daily'
  defaults:
    _form: '\Drupal\jaraba_ads\Form\AdsMetricsDailySettingsForm'
    _title: 'Configuración Métricas Diarias'
  requirements:
    _permission: 'administer ads settings'

jaraba_ads.ads_audience_sync.settings:
  path: '/admin/structure/ads-audience-sync'
  defaults:
    _form: '\Drupal\jaraba_ads\Form\AdsAudienceSyncSettingsForm'
    _title: 'Configuración Sincronización de Audiencias'
  requirements:
    _permission: 'administer ads settings'

jaraba_ads.ads_conversion_event.settings:
  path: '/admin/structure/ads-conversion-events'
  defaults:
    _form: '\Drupal\jaraba_ads\Form\AdsConversionEventSettingsForm'
    _title: 'Configuración Eventos de Conversión'
  requirements:
    _permission: 'administer ads settings'

# --- OAuth Routes para conexión de cuentas ---

jaraba_ads.oauth.start:
  path: '/ads/oauth/{platform}/start'
  defaults:
    _controller: '\Drupal\jaraba_ads\Controller\AdsOAuthController::startOAuth'
    _title: 'Conectar Cuenta de Ads'
  requirements:
    _permission: 'connect ad accounts'
    platform: 'meta|google'

jaraba_ads.oauth.callback:
  path: '/ads/oauth/{platform}/callback'
  defaults:
    _controller: '\Drupal\jaraba_ads\Controller\AdsOAuthController::handleCallback'
    _title: 'Callback OAuth Ads'
  requirements:
    _permission: 'connect ad accounts'
    platform: 'meta|google'
