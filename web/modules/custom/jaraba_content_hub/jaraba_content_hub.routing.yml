# Settings form
jaraba_content_hub.settings:
  path: '/admin/config/content/content-hub'
  defaults:
    _form: '\Drupal\jaraba_content_hub\Form\ContentHubSettingsForm'
    _title: 'Content Hub Settings'
  requirements:
    _permission: 'administer content hub'

# Editor Dashboard (Admin - for super admins only)
jaraba_content_hub.dashboard:
  path: '/admin/content/content-hub'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\ContentHubDashboardController::dashboard'
    _title: 'Content Hub'
  requirements:
    _permission: 'administer content hub'

# Editor Dashboard (Frontend - for tenant editors)
jaraba_content_hub.dashboard.frontend:
  path: '/content-hub'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\ContentHubDashboardController::dashboardFrontend'
    _title: 'Content Hub'
  requirements:
    _permission: 'access content article overview'
  options:
    _admin_route: FALSE

# === Frontend Routes (Tenant Editors - NO admin theme) ===

# Articles List Frontend
jaraba_content_hub.articles.frontend:
  path: '/content-hub/articles'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\ArticlesListController::list'
    _title: 'Articles'
  requirements:
    _permission: 'access content article overview'
  options:
    _admin_route: FALSE

# Article Add Form Frontend
jaraba_content_hub.articles.add.frontend:
  path: '/content-hub/articles/add'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\ArticlesListController::add'
    _title: 'New Article'
  requirements:
    _permission: 'create content article'
  options:
    _admin_route: FALSE

# Article Edit Form Frontend
jaraba_content_hub.articles.edit.frontend:
  path: '/content-hub/articles/{content_article}/edit'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\ArticlesListController::edit'
    _title: 'Edit Article'
  requirements:
    _entity_access: 'content_article.update'
  options:
    _admin_route: FALSE
    parameters:
      content_article:
        type: entity:content_article

# Categories List Frontend
jaraba_content_hub.categories.frontend:
  path: '/content-hub/categories'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\CategoriesListController::list'
    _title: 'Categories'
  requirements:
    _permission: 'administer content categories'
  options:
    _admin_route: FALSE

# Category Add Form Frontend
jaraba_content_hub.categories.add.frontend:
  path: '/content-hub/categories/add'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\CategoriesListController::add'
    _title: 'New Category'
  requirements:
    _permission: 'administer content categories'
  options:
    _admin_route: FALSE

# AI Generation Logs Frontend
jaraba_content_hub.ai_logs.frontend:
  path: '/content-hub/ai-logs'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\AiLogsListController::list'
    _title: 'AI Logs'
  requirements:
    _permission: 'administer ai generation logs'
  options:
    _admin_route: FALSE

# === Content Article Routes ===

# Slug-based canonical route for blog articles.
# Supports both slug (mi-articulo) and numeric ID (123) via ParamConverter.
entity.content_article.canonical:
  path: '/blog/{content_article}'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\BlogArticleController::view'
    _title_callback: '\Drupal\jaraba_content_hub\Controller\BlogArticleController::title'
  requirements:
    _access: 'TRUE'
  options:
    parameters:
      content_article:
        type: content_article_slug

entity.content_article.collection:
  path: '/admin/content/articles'
  defaults:
    _entity_list: 'content_article'
    _title: 'Articles'
  requirements:
    _permission: 'access content article overview'

entity.content_article.add_form:
  path: '/admin/content/articles/add'
  defaults:
    _entity_form: 'content_article.add'
    _title: 'Add Article'
  requirements:
    _permission: 'create content article'

entity.content_article.edit_form:
  path: '/admin/content/articles/{content_article}/edit'
  defaults:
    _entity_form: 'content_article.edit'
    _title_callback: '\Drupal\Core\Entity\Controller\EntityController::editTitle'
  requirements:
    _entity_access: 'content_article.update'
  options:
    parameters:
      content_article:
        type: entity:content_article

entity.content_article.delete_form:
  path: '/admin/content/articles/{content_article}/delete'
  defaults:
    _entity_form: 'content_article.delete'
    _title: 'Delete Article'
  requirements:
    _entity_access: 'content_article.delete'
  options:
    parameters:
      content_article:
        type: entity:content_article

entity.content_article.settings:
  path: '/admin/structure/content-hub/article'
  defaults:
    _form: '\Drupal\jaraba_content_hub\Form\ContentArticleSettingsForm'
    _title: 'Article Settings'
  requirements:
    _permission: 'administer content hub'

# === Content Category Routes ===

entity.content_category.canonical:
  path: '/blog/category/{content_category}'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\CategoryController::view'
    _title_callback: '\Drupal\Core\Entity\Controller\EntityController::title'
  requirements:
    _entity_access: 'content_category.view'
  options:
    parameters:
      content_category:
        type: entity:content_category

entity.content_category.collection:
  path: '/admin/structure/content-hub/categories'
  defaults:
    _entity_list: 'content_category'
    _title: 'Categories'
  requirements:
    _permission: 'administer content categories'

entity.content_category.add_form:
  path: '/admin/structure/content-hub/categories/add'
  defaults:
    _entity_form: 'content_category.add'
    _title: 'Add Category'
  requirements:
    _permission: 'administer content categories'

entity.content_category.edit_form:
  path: '/admin/structure/content-hub/categories/{content_category}/edit'
  defaults:
    _entity_form: 'content_category.edit'
    _title_callback: '\Drupal\Core\Entity\Controller\EntityController::editTitle'
  requirements:
    _entity_access: 'content_category.update'
  options:
    parameters:
      content_category:
        type: entity:content_category

entity.content_category.delete_form:
  path: '/admin/structure/content-hub/categories/{content_category}/delete'
  defaults:
    _entity_form: 'content_category.delete'
    _title: 'Delete Category'
  requirements:
    _entity_access: 'content_category.delete'
  options:
    parameters:
      content_category:
        type: entity:content_category

# === Blog Public Routes ===

jaraba_content_hub.blog:
  path: '/blog'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\BlogController::index'
    _title: 'Blog'
  requirements:
    _permission: 'access content'

# === REST API Routes ===

jaraba_content_hub.api.articles.list:
  path: '/api/v1/content/articles'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\ArticleApiController::list'
  methods: [GET]
  requirements:
    _permission: 'access content'

jaraba_content_hub.api.articles.get:
  path: '/api/v1/content/articles/{uuid}'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\ArticleApiController::get'
  methods: [GET]
  requirements:
    _permission: 'access content'

jaraba_content_hub.api.articles.create:
  path: '/api/v1/content/articles'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\ArticleApiController::createArticle'
  methods: [POST]
  requirements:
    _permission: 'create content article'
    _csrf_token: 'TRUE'

jaraba_content_hub.api.articles.update:
  path: '/api/v1/content/articles/{uuid}'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\ArticleApiController::update'
  methods: [PATCH]
  requirements:
    _permission: 'edit any content article'
    _csrf_request_header_token: 'TRUE'

jaraba_content_hub.api.articles.publish:
  path: '/api/v1/content/articles/{uuid}/publish'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\ArticleApiController::publish'
  methods: [POST]
  requirements:
    _permission: 'publish content article'
    _csrf_token: 'TRUE'

# === AI Writing Assistant API Routes ===

jaraba_content_hub.api.ai.outline:
  path: '/api/v1/content/ai/outline'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\WritingAssistantController::generateOutline'
  methods: [POST]
  requirements:
    _permission: 'use content ai assistant'
    _csrf_token: 'TRUE'

jaraba_content_hub.api.ai.expand:
  path: '/api/v1/content/ai/expand-section'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\WritingAssistantController::expandSection'
  methods: [POST]
  requirements:
    _permission: 'use content ai assistant'
    _csrf_token: 'TRUE'

jaraba_content_hub.api.ai.headline:
  path: '/api/v1/content/ai/optimize-headline'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\WritingAssistantController::optimizeHeadline'
  methods: [POST]
  requirements:
    _permission: 'use content ai assistant'
    _csrf_token: 'TRUE'

jaraba_content_hub.api.ai.seo:
  path: '/api/v1/content/ai/improve-seo'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\WritingAssistantController::improveSeo'
  methods: [POST]
  requirements:
    _permission: 'use content ai assistant'
    _csrf_token: 'TRUE'

jaraba_content_hub.api.ai.full_article:
  path: '/api/v1/content/ai/full-article'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\WritingAssistantController::generateFullArticle'
  methods: [POST]
  requirements:
    _permission: 'use content ai assistant'
    _csrf_token: 'TRUE'

jaraba_content_hub.api.ai.create_draft:
  path: '/api/v1/content/ai/create-draft'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\WritingAssistantController::createDraft'
  methods: [POST]
  requirements:
    _permission: 'use content ai assistant'
    _csrf_token: 'TRUE'

jaraba_content_hub.api.ai.apply_seo:
  path: '/api/v1/content/ai/articles/{articleId}/apply-seo'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\WritingAssistantController::applySeoToArticle'
  methods: [POST]
  requirements:
    _permission: 'use content ai assistant'
    _csrf_token: 'TRUE'

# AI Generation Logs (Admin)
jaraba_content_hub.ai_logs:
  path: '/admin/content/ai-generation-logs'
  defaults:
    _entity_list: 'ai_generation_log'
    _title: 'AI Generation Logs'
  requirements:
    _permission: 'administer ai generation logs'

# === F.4 Recommendations API Routes ===

jaraba_content_hub.api.recommendations.related:
  path: '/api/v1/content/articles/{article_id}/related'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\RecommendationController::getRelated'
  methods: [GET]
  requirements:
    _access: 'TRUE'
    article_id: '\d+'

jaraba_content_hub.api.recommendations.index:
  path: '/api/v1/content/articles/{article_id}/index'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\RecommendationController::indexArticle'
  methods: [POST]
  requirements:
    _permission: 'administer content articles'
    article_id: '\d+'
    _csrf_token: 'TRUE'

jaraba_content_hub.api.recommendations.reindex:
  path: '/api/v1/content/reindex-all'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\RecommendationController::reindexAll'
  methods: [POST]
  requirements:
    _permission: 'administer content articles'
    _csrf_token: 'TRUE'

entity.ai_generation_log.settings:
  path: '/admin/structure/ai-generation-log/settings'
  defaults:
    _form: 'Drupal\jaraba_content_hub\Form\AiGenerationLogSettingsForm'
    _title: 'AI Generation Log settings'
  requirements:
    _permission: 'administer ai generation logs'

entity.content_category.settings:
  path: '/admin/structure/content-category/settings'
  defaults:
    _form: 'Drupal\jaraba_content_hub\Form\ContentCategorySettingsForm'
    _title: 'Content Category settings'
  requirements:
    _permission: 'administer content categories'

# === Canvas Editor Routes ===

jaraba_content_hub.article.canvas_editor:
  path: '/content-hub/articles/{content_article}/canvas'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\ArticleCanvasEditorController::editor'
    _title_callback: '\Drupal\jaraba_content_hub\Controller\ArticleCanvasEditorController::editorTitle'
  requirements:
    _permission: 'use article canvas editor'
  options:
    _admin_route: FALSE
    parameters:
      content_article:
        type: entity:content_article

# === Canvas Editor API Routes ===

jaraba_content_hub.api.article.canvas.get:
  path: '/api/v1/articles/{content_article}/canvas'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\ArticleCanvasApiController::getCanvas'
  methods: [GET]
  requirements:
    _permission: 'use article canvas editor'
  options:
    parameters:
      content_article:
        type: entity:content_article

jaraba_content_hub.api.article.canvas.save:
  path: '/api/v1/articles/{content_article}/canvas'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\ArticleCanvasApiController::saveCanvas'
  methods: [PATCH]
  requirements:
    _permission: 'use article canvas editor'
    _csrf_request_header_token: 'TRUE'
  options:
    parameters:
      content_article:
        type: entity:content_article

# === Newsletter Subscribe API ===

jaraba_content_hub.api.newsletter.subscribe:
  path: '/api/v1/content-hub/newsletter/subscribe'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\NewsletterController::subscribe'
  methods: [POST]
  requirements:
    _access: 'TRUE'
    _csrf_request_header_token: 'TRUE'

# === Content Author Entity Routes ===

entity.content_author.canonical:
  path: '/blog/autor/{content_author}'
  defaults:
    _controller: '\Drupal\Core\Entity\Controller\EntityViewController::view'
    _title_callback: '\Drupal\Core\Entity\Controller\EntityController::title'
  requirements:
    _entity_access: 'content_author.view'
  options:
    parameters:
      content_author:
        type: entity:content_author

entity.content_author.collection:
  path: '/admin/structure/content-hub/authors'
  defaults:
    _entity_list: 'content_author'
    _title: 'Content Authors'
  requirements:
    _permission: 'administer content authors'

entity.content_author.add_form:
  path: '/admin/structure/content-hub/authors/add'
  defaults:
    _entity_form: 'content_author.add'
    _title: 'Add Author'
  requirements:
    _permission: 'administer content authors'

entity.content_author.edit_form:
  path: '/admin/structure/content-hub/authors/{content_author}/edit'
  defaults:
    _entity_form: 'content_author.edit'
    _title_callback: '\Drupal\Core\Entity\Controller\EntityController::editTitle'
  requirements:
    _entity_access: 'content_author.update'
  options:
    parameters:
      content_author:
        type: entity:content_author

entity.content_author.delete_form:
  path: '/admin/structure/content-hub/authors/{content_author}/delete'
  defaults:
    _entity_form: 'content_author.delete'
    _title: 'Delete Author'
  requirements:
    _entity_access: 'content_author.delete'
  options:
    parameters:
      content_author:
        type: entity:content_author

entity.content_author.settings:
  path: '/admin/structure/content-author/settings'
  defaults:
    _form: 'Drupal\jaraba_content_hub\Form\ContentAuthorSettingsForm'
    _title: 'Content Author settings'
  requirements:
    _permission: 'administer content authors'

# === Blog Public Routes (Consolidated) ===

jaraba_content_hub.blog.category:
  path: '/blog/categoria/{slug}'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\BlogController::category'
    _title_callback: '\Drupal\jaraba_content_hub\Controller\BlogController::categoryTitle'
  requirements:
    _permission: 'access content'

jaraba_content_hub.blog.author:
  path: '/blog/autor/{slug}'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\BlogController::author'
    _title_callback: '\Drupal\jaraba_content_hub\Controller\BlogController::authorTitle'
  requirements:
    _permission: 'access content'

jaraba_content_hub.blog.rss:
  path: '/blog/feed.xml'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\BlogController::rssFeed'
  requirements:
    _access: 'TRUE'

# === Comment API Routes (REV-PHASE4) ===

jaraba_content_hub.api.comments.list:
  path: '/api/v1/content/articles/{article_id}/comments'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\CommentApiController::list'
  methods: [GET]
  requirements:
    _permission: 'access content'
    article_id: '\d+'

jaraba_content_hub.api.comments.create:
  path: '/api/v1/content/articles/{article_id}/comments'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\CommentApiController::createComment'
  methods: [POST]
  requirements:
    _permission: 'post comments'
    article_id: '\d+'
    _csrf_request_header_token: 'TRUE'

jaraba_content_hub.api.comments.moderate:
  path: '/api/v1/content/comments/{comment_id}/moderate'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\CommentApiController::moderate'
  methods: [POST]
  requirements:
    _permission: 'moderate comments'
    comment_id: '\d+'
    _csrf_request_header_token: 'TRUE'

jaraba_content_hub.api.comments.helpful:
  path: '/api/v1/content/comments/{comment_id}/helpful'
  defaults:
    _controller: '\Drupal\jaraba_content_hub\Controller\CommentApiController::helpful'
  methods: [POST]
  requirements:
    _permission: 'access content'
    comment_id: '\d+'
    _csrf_request_header_token: 'TRUE'

# === Content Comment Entity Routes ===

entity.content_comment.canonical:
  path: '/admin/content/content-comment/{content_comment}'
  defaults:
    _entity_view: 'content_comment.full'
    _title_callback: '\Drupal\Core\Entity\Controller\EntityController::title'
  requirements:
    _entity_access: 'content_comment.view'
  options:
    parameters:
      content_comment:
        type: entity:content_comment

entity.content_comment.collection:
  path: '/admin/content/content-comments'
  defaults:
    _entity_list: 'content_comment'
    _title: 'Comentarios'
  requirements:
    _permission: 'moderate comments'

entity.content_comment.add_form:
  path: '/admin/content/content-comment/add'
  defaults:
    _entity_form: 'content_comment.add'
    _title: 'Nuevo Comentario'
  requirements:
    _permission: 'administer content hub'

entity.content_comment.edit_form:
  path: '/admin/content/content-comment/{content_comment}/edit'
  defaults:
    _entity_form: 'content_comment.edit'
    _title_callback: '\Drupal\Core\Entity\Controller\EntityController::editTitle'
  requirements:
    _entity_access: 'content_comment.update'
  options:
    parameters:
      content_comment:
        type: entity:content_comment

entity.content_comment.delete_form:
  path: '/admin/content/content-comment/{content_comment}/delete'
  defaults:
    _entity_form: 'content_comment.delete'
    _title: 'Eliminar Comentario'
  requirements:
    _entity_access: 'content_comment.delete'
  options:
    parameters:
      content_comment:
        type: entity:content_comment

entity.content_comment.settings:
  path: '/admin/structure/content-comment/settings'
  defaults:
    _form: 'Drupal\jaraba_content_hub\Form\ContentCommentSettingsForm'
    _title: 'Configuracion de Comentarios'
  requirements:
    _permission: 'administer content hub'

