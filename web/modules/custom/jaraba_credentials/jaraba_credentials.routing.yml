# Rutas del módulo Jaraba Credentials
# CRÍTICO: Content Entities en /admin/content, Settings en /admin/structure

# ============================================
# ISSUER PROFILES
# ============================================

entity.issuer_profile.collection:
  path: '/admin/content/issuer-profiles'
  defaults:
    _entity_list: 'issuer_profile'
    _title: 'Perfiles de Emisor'
  requirements:
    _permission: 'manage issuer profiles'

entity.issuer_profile.canonical:
  path: '/admin/content/issuer-profiles/{issuer_profile}'
  defaults:
    _entity_view: 'issuer_profile'
    _title: 'Ver Perfil de Emisor'
  requirements:
    _permission: 'manage issuer profiles'

entity.issuer_profile.add_form:
  path: '/admin/content/issuer-profiles/add'
  defaults:
    _entity_form: 'issuer_profile.add'
    _title: 'Añadir Perfil de Emisor'
  requirements:
    _permission: 'manage issuer profiles'

entity.issuer_profile.edit_form:
  path: '/admin/content/issuer-profiles/{issuer_profile}/edit'
  defaults:
    _entity_form: 'issuer_profile.edit'
    _title: 'Editar Perfil de Emisor'
  requirements:
    _permission: 'manage issuer profiles'

entity.issuer_profile.delete_form:
  path: '/admin/content/issuer-profiles/{issuer_profile}/delete'
  defaults:
    _entity_form: 'issuer_profile.delete'
    _title: 'Eliminar Perfil de Emisor'
  requirements:
    _permission: 'manage issuer profiles'

entity.issuer_profile.settings:
  path: '/admin/structure/issuer-profile'
  defaults:
    _form: 'Drupal\jaraba_credentials\Form\IssuerProfileSettingsForm'
    _title: 'Configuración Perfil de Emisor'
  requirements:
    _permission: 'manage issuer profiles'

# ============================================
# CREDENTIAL TEMPLATES
# ============================================

entity.credential_template.collection:
  path: '/admin/content/credential-templates'
  defaults:
    _entity_list: 'credential_template'
    _title: 'Templates de Credenciales'
  requirements:
    _permission: 'manage credential templates'

entity.credential_template.canonical:
  path: '/admin/content/credential-templates/{credential_template}'
  defaults:
    _entity_view: 'credential_template'
    _title: 'Ver Template'
  requirements:
    _permission: 'manage credential templates'

entity.credential_template.add_form:
  path: '/admin/content/credential-templates/add'
  defaults:
    _entity_form: 'credential_template.add'
    _title: 'Añadir Template de Credencial'
  requirements:
    _permission: 'manage credential templates'

entity.credential_template.edit_form:
  path: '/admin/content/credential-templates/{credential_template}/edit'
  defaults:
    _entity_form: 'credential_template.edit'
    _title: 'Editar Template'
  requirements:
    _permission: 'manage credential templates'

entity.credential_template.delete_form:
  path: '/admin/content/credential-templates/{credential_template}/delete'
  defaults:
    _entity_form: 'credential_template.delete'
    _title: 'Eliminar Template'
  requirements:
    _permission: 'manage credential templates'

entity.credential_template.settings:
  path: '/admin/structure/credential-template'
  defaults:
    _form: 'Drupal\jaraba_credentials\Form\CredentialTemplateSettingsForm'
    _title: 'Configuración Template de Credencial'
  requirements:
    _permission: 'manage credential templates'

# ============================================
# ISSUED CREDENTIALS
# ============================================

entity.issued_credential.collection:
  path: '/admin/content/issued-credentials'
  defaults:
    _entity_list: 'issued_credential'
    _title: 'Credenciales Emitidas'
  requirements:
    _permission: 'administer credentials'

entity.issued_credential.canonical:
  path: '/admin/content/issued-credentials/{issued_credential}'
  defaults:
    _entity_view: 'issued_credential'
    _title: 'Ver Credencial'
  requirements:
    _permission: 'administer credentials'

entity.issued_credential.add_form:
  path: '/admin/content/issued-credentials/add'
  defaults:
    _entity_form: 'issued_credential.add'
    _title: 'Emitir Nueva Credencial'
  requirements:
    _permission: 'issue credentials'

entity.issued_credential.edit_form:
  path: '/admin/content/issued-credentials/{issued_credential}/edit'
  defaults:
    _entity_form: 'issued_credential.edit'
    _title: 'Editar Credencial'
  requirements:
    _permission: 'administer credentials'

entity.issued_credential.settings:
  path: '/admin/structure/issued-credential'
  defaults:
    _form: 'Drupal\jaraba_credentials\Form\IssuedCredentialSettingsForm'
    _title: 'Configuración Credenciales Emitidas'
  requirements:
    _permission: 'administer credentials'

# ============================================
# VERIFICACIÓN PÚBLICA
# ============================================

jaraba_credentials.verify:
  path: '/verify/{uuid}'
  defaults:
    _controller: 'Drupal\jaraba_credentials\Controller\VerifyController::verify'
    _title: 'Verificar Credencial'
  requirements:
    _access: 'TRUE'
  options:
    no_cache: TRUE

jaraba_credentials.verify_json:
  path: '/verify/{uuid}/json'
  defaults:
    _controller: 'Drupal\jaraba_credentials\Controller\VerifyController::verifyJson'
  requirements:
    _access: 'TRUE'
  options:
    no_cache: TRUE

# ============================================
# FRONTEND: MIS CERTIFICACIONES
# ============================================

jaraba_credentials.my_credentials:
  path: '/my-certifications'
  defaults:
    _controller: 'Drupal\jaraba_credentials\Controller\CredentialsDashboardController::dashboard'
    _title: 'Mis Certificaciones'
  requirements:
    _user_is_logged_in: 'TRUE'

# ============================================
# CONFIGURACIÓN DEL MÓDULO
# ============================================

jaraba_credentials.settings:
  path: '/admin/config/training/credentials'
  defaults:
    _form: 'Drupal\jaraba_credentials\Form\CredentialsSettingsForm'
    _title: 'Configuración de Credenciales'
  requirements:
    _permission: 'administer credentials'

# ============================================
# API REST
# ============================================

jaraba_credentials.api.credentials:
  path: '/api/v1/credentials'
  defaults:
    _controller: 'Drupal\jaraba_credentials\Controller\CredentialsApiController::list'
  methods: [GET]
  requirements:
    _user_is_logged_in: 'TRUE'

jaraba_credentials.api.credential:
  path: '/api/v1/credentials/{uuid}'
  defaults:
    _controller: 'Drupal\jaraba_credentials\Controller\CredentialsApiController::get'
  methods: [GET]
  requirements:
    _permission: 'verify credentials'
