# Rutas para webhooks de Make.com / Social Commerce

# Webhook genérico para recibir datos desde Make.com
jaraba_social_commerce.webhook.receive:
  path: '/api/social-commerce/webhook/{channel}'
  defaults:
    _controller: '\Drupal\jaraba_social_commerce\Controller\SocialWebhookController::receive'
  requirements:
    _access: 'TRUE'
  methods: [POST]

# Endpoint para obtener productos en formato Meta Catalog
jaraba_social_commerce.api.products.meta:
  path: '/api/social-commerce/products/meta'
  defaults:
    _controller: '\Drupal\jaraba_social_commerce\Controller\SocialWebhookController::getProductsForMeta'
  requirements:
    _access: 'TRUE'
  methods: [GET]

# Endpoint para obtener productos en formato Google Merchant
jaraba_social_commerce.api.products.google:
  path: '/api/social-commerce/products/google'
  defaults:
    _controller: '\Drupal\jaraba_social_commerce\Controller\SocialWebhookController::getProductsForGoogle'
  requirements:
    _access: 'TRUE'
  methods: [GET]

# Endpoint para sincronización manual (trigger Make.com scenario)
jaraba_social_commerce.api.sync:
  path: '/api/social-commerce/sync/{channel}'
  defaults:
    _controller: '\Drupal\jaraba_social_commerce\Controller\SocialWebhookController::triggerSync'
  requirements:
    _user_is_logged_in: 'TRUE'
  methods: [POST]
