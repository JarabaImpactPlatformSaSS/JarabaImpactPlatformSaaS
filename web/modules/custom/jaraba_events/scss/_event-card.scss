// =============================================================================
// Componente: Tarjeta de evento
//
// ESTRUCTURA:
// Estilos BEM para la tarjeta reutilizable de evento que aparece en el
// marketplace y en la sección de eventos relacionados.
//
// PATRÓN:
// - var(--ej-*, $fallback) para inyección desde Drupal UI
// - Mobile-first con breakpoints min-width
// - Glassmorphism premium: hover con translateY(-6px) scale(1.02)
// - color-mix() para variantes de color
// =============================================================================

@use 'variables' as *;

.ej-event-card {
  @include events-card;
  display: flex;
  flex-direction: column;
  height: 100%;

  // --- Imagen ---
  &__image {
    position: relative;
    aspect-ratio: 16 / 9;
    overflow: hidden;
    background: var(--ej-surface-color, #f5f5f5);

    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform $events-transition-slow;
    }

    .ej-event-card:hover & img {
      transform: scale(1.05);
    }
  }

  &__image-placeholder {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    color: var(--ej-text-muted, #9e9e9e);
    background: var(--ej-surface-color, #f5f5f5);
  }

  // --- Badge de tipo ---
  &__badge {
    position: absolute;
    top: $events-spacing-sm;
    left: $events-spacing-sm;
    z-index: $events-z-badge;

    &--webinar { @include events-badge($events-type-webinar); }
    &--workshop { @include events-badge($events-type-workshop); }
    &--conference { @include events-badge($events-type-conference); }
    &--meetup { @include events-badge($events-type-meetup); }
    &--demo { @include events-badge($events-type-demo); }
    &--networking { @include events-badge($events-type-networking); }
  }

  // --- Badge de formato ---
  &__format {
    position: absolute;
    top: $events-spacing-sm;
    right: $events-spacing-sm;
    z-index: $events-z-badge;
    @include events-badge(rgba(0, 0, 0, 0.6));
    backdrop-filter: blur(8px);
  }

  // --- Contenido ---
  &__content {
    flex: 1;
    padding: $events-spacing-md;
    display: flex;
    flex-direction: column;
    gap: $events-spacing-sm;
  }

  &__date {
    font-size: 0.8125rem;
    color: var(--ej-primary-color, $events-primary);
    font-weight: 600;
  }

  &__title {
    margin: 0;
    font-size: 1.0625rem;
    font-weight: $events-heading-weight;
    line-height: 1.3;
    color: var(--ej-heading-color, #212121);

    a {
      color: inherit;
      text-decoration: none;

      &:hover {
        color: var(--ej-primary-color, $events-primary);
      }
    }
  }

  &__desc {
    margin: 0;
    font-size: 0.875rem;
    color: var(--ej-text-color, #616161);
    line-height: 1.5;
  }

  // --- Footer ---
  &__footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: $events-spacing-sm;
    padding: $events-spacing-md;
    border-top: 1px solid var(--ej-card-border, rgba(0, 0, 0, 0.06));
  }

  &__price {
    font-weight: 600;
  }

  &__price-free {
    color: $events-success;
    font-weight: 700;
  }

  &__price-amount {
    color: var(--ej-heading-color, #212121);
  }

  &__spots {
    font-size: 0.75rem;
    font-weight: 600;

    &--limited {
      color: $events-warning;
    }

    &--sold-out {
      color: $events-error;
    }
  }

  &__cta {
    @include events-button-primary;
    padding: $events-spacing-xs $events-spacing-md;
    font-size: 0.8125rem;
  }

  // --- Modificador: featured ---
  &--featured {
    border: 2px solid var(--ej-primary-color, $events-primary);

    .ej-event-card__badge::after {
      content: '';
    }
  }
}
