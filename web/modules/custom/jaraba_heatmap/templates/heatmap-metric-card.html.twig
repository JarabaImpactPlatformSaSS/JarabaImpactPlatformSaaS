{#
/**
 * @file
 * Template for a reusable metric card in the heatmap dashboard.
 *
 * Variables:
 * - title: Card title (translated string).
 * - value: Metric value (string or number).
 * - icon: Icon identifier (chart-bar, document, users, arrow-down).
 * - trend: Trend percentage (optional, float).
 * - trend_direction: 'up' or 'down' (optional).
 */
#}

<div class="heatmap-metric-card">
  <div class="heatmap-metric-card__icon heatmap-metric-card__icon--{{ icon }}">
    {# SVG icons inline for performance (no external dependency) #}
    {% if icon == 'chart-bar' %}
      <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
        <rect x="3" y="12" width="4" height="9" rx="1"/>
        <rect x="10" y="7" width="4" height="14" rx="1"/>
        <rect x="17" y="3" width="4" height="18" rx="1"/>
      </svg>
    {% elseif icon == 'document' %}
      <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
        <polyline points="14 2 14 8 20 8"/>
        <line x1="16" y1="13" x2="8" y2="13"/>
        <line x1="16" y1="17" x2="8" y2="17"/>
      </svg>
    {% elseif icon == 'users' %}
      <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
        <circle cx="9" cy="7" r="4"/>
        <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
        <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
      </svg>
    {% elseif icon == 'arrow-down' %}
      <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
        <line x1="12" y1="5" x2="12" y2="19"/>
        <polyline points="19 12 12 19 5 12"/>
      </svg>
    {% endif %}
  </div>
  <div class="heatmap-metric-card__body">
    <span class="heatmap-metric-card__value">{{ value }}</span>
    <span class="heatmap-metric-card__title">{{ title }}</span>
  </div>
  {% if trend is not null %}
    <div class="heatmap-metric-card__trend heatmap-metric-card__trend--{{ trend_direction|default('neutral') }}">
      {% if trend_direction == 'up' %}
        <svg viewBox="0 0 12 12" width="12" height="12" aria-hidden="true">
          <polyline points="1 9 6 3 11 9" fill="none" stroke="currentColor" stroke-width="2"/>
        </svg>
      {% elseif trend_direction == 'down' %}
        <svg viewBox="0 0 12 12" width="12" height="12" aria-hidden="true">
          <polyline points="1 3 6 9 11 3" fill="none" stroke="currentColor" stroke-width="2"/>
        </svg>
      {% endif %}
      <span>{{ trend }}%</span>
    </div>
  {% endif %}
</div>
