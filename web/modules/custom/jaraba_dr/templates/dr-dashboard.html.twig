{#
/**
 * @file
 * Template para el dashboard de administración de Disaster Recovery.
 *
 * Variables:
 * - backup_status: Estado de los backups (array de verificaciones recientes).
 * - test_results: Resultados de tests DR recientes.
 * - active_incidents: Incidentes activos.
 * - failover_status: Estado del failover.
 * - service_status: Estado de los servicios monitorizados.
 * - metrics: Métricas consolidadas de DR (RTO/RPO, uptime).
 * - last_updated: Timestamp de última actualización.
 *
 * DIRECTRIZ: Clases BEM, {% include %} para parciales, sin {{ page.* }}.
 */
#}
<div class="jaraba-dr-dashboard">
  <div class="dr-dashboard__header">
    <div>
      <h1>{{ 'Disaster Recovery'|t }}</h1>
      <p class="dr-dashboard__subtitle">
        {{ 'Panel de administración de continuidad y recuperación ante desastres'|t }}
      </p>
    </div>
    <span class="dr-dashboard__updated">
      {{ 'Última actualización:'|t }} {{ last_updated|date('d/m/Y H:i:s') }}
    </span>
  </div>

  <div class="dr-dashboard__grid">
    {# Sección 1: Estado de backups #}
    <div class="dr-dashboard__section dr-dashboard__backups">
      {% include '@jaraba_dr/partials/_backup-status.html.twig' with {
        backup_status: backup_status
      } only %}
    </div>

    {# Sección 2: Resultados de tests DR #}
    <div class="dr-dashboard__section dr-dashboard__tests">
      {% include '@jaraba_dr/partials/_dr-tests.html.twig' with {
        test_results: test_results,
        metrics: metrics
      } only %}
    </div>

    {# Sección 3: Incidentes activos #}
    <div class="dr-dashboard__section dr-dashboard__incidents">
      {% include '@jaraba_dr/partials/_incidents-active.html.twig' with {
        active_incidents: active_incidents
      } only %}
    </div>

    {# Sección 4: Vista previa de la página de estado #}
    <div class="dr-dashboard__section dr-dashboard__status-preview">
      {% include '@jaraba_dr/partials/_status-preview.html.twig' with {
        service_status: service_status
      } only %}
    </div>
  </div>
</div>
