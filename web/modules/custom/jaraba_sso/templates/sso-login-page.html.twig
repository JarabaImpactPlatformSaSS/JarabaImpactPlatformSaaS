{#
/**
 * @file
 * SSO Provider Selection Page.
 *
 * Displays available SSO providers for the current tenant,
 * allowing users to select their identity provider for authentication.
 *
 * Variables:
 * - providers: array of SSO providers, each with:
 *   - id: int — provider entity ID
 *   - name: string — provider display name
 *   - type: string — "saml" or "oidc"
 *   - login_url: string — URL to initiate SSO login
 * - tenant_name: string — current tenant name
 * - force_sso: bool — whether SSO is forced (hides password login)
 */
#}
<div class="sso-login-page">
  <div class="sso-login-page__header">
    <h2 class="sso-login-page__title">{{ 'Sign in with SSO'|t }}</h2>
    {% if tenant_name %}
      <p class="sso-login-page__subtitle">
        {{ 'Select your identity provider for'|t }} <strong>{{ tenant_name }}</strong>
      </p>
    {% endif %}
  </div>

  {% if providers|length > 0 %}
    <div class="sso-login-page__providers">
      {% for provider in providers %}
        <a href="{{ provider.login_url }}"
           class="sso-login-page__provider sso-login-page__provider--{{ provider.type }}"
           title="{{ 'Sign in with'|t }} {{ provider.name }}">
          <div class="sso-login-page__provider-icon">
            {% if provider.type == 'saml' %}
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
              </svg>
            {% else %}
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/>
                <polyline points="10 17 15 12 10 7"/>
                <line x1="15" y1="12" x2="3" y2="12"/>
              </svg>
            {% endif %}
          </div>
          <div class="sso-login-page__provider-info">
            <span class="sso-login-page__provider-name">{{ provider.name }}</span>
            <span class="sso-login-page__provider-type">
              {{ provider.type == 'saml' ? 'SAML 2.0' : 'OpenID Connect' }}
            </span>
          </div>
          <div class="sso-login-page__provider-arrow">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="9 18 15 12 9 6"/>
            </svg>
          </div>
        </a>
      {% endfor %}
    </div>
  {% else %}
    <div class="sso-login-page__empty">
      <p>{{ 'No SSO providers configured for this organization.'|t }}</p>
      <p>{{ 'Contact your administrator to set up SSO.'|t }}</p>
    </div>
  {% endif %}

  {% if not force_sso %}
    <div class="sso-login-page__divider">
      <span>{{ 'or'|t }}</span>
    </div>

    <div class="sso-login-page__alternative">
      <a href="/user/login" class="sso-login-page__password-link">
        {{ 'Sign in with password'|t }}
      </a>
    </div>
  {% endif %}

  <div class="sso-login-page__footer">
    <p class="sso-login-page__security-note">
      {{ 'Your authentication is handled securely by your organization\'s identity provider.'|t }}
    </p>
  </div>
</div>
