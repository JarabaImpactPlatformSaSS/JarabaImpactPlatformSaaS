{#
/**
 * @file
 * Enhanced admin/structure overview with categories, search and filters.
 *
 * Variables:
 *   - categories: Array of categorized sections, each with:
 *       - label: Section title
 *       - icon: Emoji icon
 *       - description: Section description
 *       - items: Array of {title, description, url, provider}
 *   - total_items: Total number of items across all categories
 */
#}

<div class="ej-admin-structure" id="ej-admin-structure">

  {# ── Search Bar ── #}
  <div class="ej-admin-structure__search">
    <div class="ej-admin-structure__search-inner">
      <svg class="ej-admin-structure__search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="20" height="20">
        <path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"/>
      </svg>
      <input
        type="search"
        class="ej-admin-structure__search-input"
        id="ej-structure-search"
        placeholder="{{ 'Buscar en Estructura...'|t }}"
        autocomplete="off"
      />
      <span class="ej-admin-structure__search-count" id="ej-structure-count">
        {{ total_items }} {{ 'elementos'|t }}
      </span>
    </div>
  </div>
  {# ── Tab Navigation ── #}
  <nav class="ej-admin-structure__tabs" id="ej-structure-tabs" aria-label="{{ 'Navegación por secciones'|t }}">
    <div class="ej-admin-structure__tabs-track">
      <button class="ej-admin-structure__tab is-active" data-target="all" type="button">
        {{ 'Todas'|t }}
      </button>
      {% for cat_key, category in categories %}
        <button class="ej-admin-structure__tab" data-target="{{ cat_key }}" type="button">
          <span class="ej-admin-structure__tab-icon">{{ category.icon }}</span>
          {{ category.label }}
        </button>
      {% endfor %}
    </div>
  </nav>

  {# ── Category Sections ── #}
  {% for cat_key, category in categories %}
    <section class="ej-admin-structure__section" data-category="{{ cat_key }}">
      <div class="ej-admin-structure__section-header">
        <span class="ej-admin-structure__section-icon">{{ category.icon }}</span>
        <h2 class="ej-admin-structure__section-title">{{ category.label }}</h2>
        <span class="ej-admin-structure__section-count">{{ category.items|length }}</span>
        <span class="ej-admin-structure__section-desc">{{ category.description }}</span>
      </div>

      <div class="ej-admin-structure__grid">
        {% for item in category.items %}
          <a href="{{ item.url }}" class="ej-admin-structure__card" data-provider="{{ item.provider }}" data-title="{{ item.title|lower }}" data-description="{{ item.description|lower }}">
            <h3 class="ej-admin-structure__card-title">{{ item.title }}</h3>
            {% if item.description %}
              <p class="ej-admin-structure__card-desc">{{ item.description }}</p>
            {% endif %}
            <span class="ej-admin-structure__card-module">{{ item.provider }}</span>
          </a>
        {% endfor %}
      </div>
    </section>
  {% endfor %}

  {# ── Empty state ── #}
  <div class="ej-admin-structure__empty" id="ej-structure-empty" style="display:none;">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="48" height="48">
      <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"/>
    </svg>
    <p>{{ 'No se encontraron resultados para tu búsqueda.'|t }}</p>
  </div>

</div>
