{#
/**
 * @file
 * Template para la demo de storytelling con IA.
 *
 * Variables:
 * - session: Datos de la sesión de demo (session_id, tenant_name, profile, etc.).
 * - generated_story: Historia generada (string con markdown **bold**).
 *
 * S2-02: Reescrito sin CSS/JS inline. CSS en _demo.scss, JS en behavior.
 * ICON-EMOJI-001: jaraba_icon() en lugar de emojis Unicode.
 * ROUTE-LANGPREFIX-001: URLs via path().
 *
 * Q1 2027 - Gap P0: Time-to-Value < 60s
 */
#}

<div class="demo-storytelling" data-demo-storytelling data-session-id="{{ session.session_id }}">
  {# Banner de Demo #}
  <div class="demo-banner">
    <a href="{{ path('ecosistema_jaraba_core.demo_dashboard', { sessionId: session.session_id }) }}"
       class="demo-banner__back-link">
      &larr; {{ 'Volver al Dashboard'|t }}
    </a>
    <span class="demo-banner__badge">
      {{ jaraba_icon('navigation', 'play', { size: '14px', color: 'blanco' }) }}
      {{ 'MODO DEMO'|t }}
    </span>
  </div>

  <div class="demo-storytelling__header">
    <div class="demo-storytelling__icon">
      {{ jaraba_icon('ai', 'sparkles', { size: '32px', color: 'naranja-impulso' }) }}
    </div>
    <h1 class="demo-storytelling__title">{{ 'Tu Historia Generada por IA'|t }}</h1>
    <p class="demo-storytelling__subtitle">{{ session.tenant_name }}</p>
  </div>

  {# Historia Generada #}
  <div class="demo-story-card">
    <div class="demo-story-card__content" data-story-content>
      {{ generated_story }}
    </div>
    <div class="demo-story-card__actions">
      <button class="demo-story-btn demo-story-btn--primary" data-story-regenerate type="button">
        {{ jaraba_icon('navigation', 'refresh', { size: '16px', color: 'blanco' }) }}
        {{ 'Regenerar Historia'|t }}
      </button>
      <button class="demo-story-btn demo-story-btn--secondary" data-story-copy type="button">
        {{ jaraba_icon('navigation', 'copy', { size: '16px', color: 'azul-corporativo' }) }}
        {{ 'Copiar'|t }}
      </button>
    </div>
    <div class="demo-story-card__feedback" data-story-feedback aria-live="polite"></div>
  </div>

  {# Info Box #}
  <div class="demo-ai-info">
    <h3 class="demo-ai-info__title">
      {{ jaraba_icon('ai', 'brain', { size: '20px', color: 'azul-corporativo' }) }}
      {{ '¿Cómo funciona?'|t }}
    </h3>
    <p class="demo-ai-info__text">
      {{ 'Nuestra IA analiza tu perfil, productos y ubicación para crear una historia única que conecta con tus clientes. En producción, podrás:'|t }}
    </p>
    <ul class="demo-ai-info__list">
      <li class="demo-ai-info__item">
        {{ jaraba_icon('business', 'check', { size: '16px', color: 'verde-innovacion' }) }}
        {{ 'Personalizar el tono y estilo'|t }}
      </li>
      <li class="demo-ai-info__item">
        {{ jaraba_icon('business', 'check', { size: '16px', color: 'verde-innovacion' }) }}
        {{ 'Generar versiones para diferentes plataformas'|t }}
      </li>
      <li class="demo-ai-info__item">
        {{ jaraba_icon('business', 'check', { size: '16px', color: 'verde-innovacion' }) }}
        {{ 'Traducir automáticamente a otros idiomas'|t }}
      </li>
      <li class="demo-ai-info__item">
        {{ jaraba_icon('business', 'check', { size: '16px', color: 'verde-innovacion' }) }}
        {{ 'Integrar con tus redes sociales'|t }}
      </li>
    </ul>
  </div>

  {# CTA Conversión #}
  <div class="demo-cta-convert">
    <p class="demo-cta-convert__text">{{ '¿Te gusta lo que ves?'|t }}</p>
    <a href="{{ path('ecosistema_jaraba_core.onboarding.register', { vertical: session.profile.vertical|default('agroconecta') }) }}"
       class="demo-cta-convert__btn">
      {{ 'Crear Mi Cuenta Real'|t }} &rarr;
    </a>
  </div>
</div>
