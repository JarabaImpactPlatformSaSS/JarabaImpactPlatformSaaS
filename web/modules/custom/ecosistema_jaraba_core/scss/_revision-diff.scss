// ============================================================
// REVISION DIFF - Gap G: Diff Visual de Revisiones
// ============================================================
// PROPÓSITO: Estilos para lista de revisiones y comparación visual
// UBICACIÓN: Compilado a través de main.scss
// VER: docs/planificacion/20260202-Auditoria_Plan_Elevacion_Clase_Mundial_v1.md
// ============================================================

@use 'variables' as *;

// ═══════════════════════════════════════════════════════════════
// LISTA DE REVISIONES
// ═══════════════════════════════════════════════════════════════

.revision-list {
    max-width: 1200px;
    margin: 0 auto;
    padding: var(--ej-spacing-lg, 2rem);
}

.revision-list__instructions {
    display: flex;
    align-items: center;
    gap: var(--ej-spacing-sm, 0.5rem);
    padding: var(--ej-spacing-md, 1rem);
    background: color-mix(in srgb, var(--ej-color-innovation, #00A9A5) 10%, white);
    border-radius: var(--ej-border-radius, 8px);
    margin-bottom: var(--ej-spacing-lg, 2rem);
    color: var(--ej-color-innovation, #00A9A5);
    border: 1px solid color-mix(in srgb, var(--ej-color-innovation, #00A9A5) 20%, transparent);

    svg {
        flex-shrink: 0;
    }
}

.revision-list__table {
    width: 100%;
    border-collapse: collapse;
    background: var(--ej-color-surface, #fff);
    border-radius: var(--ej-border-radius-lg, 12px);
    overflow: hidden;
    box-shadow: var(--ej-shadow-sm, 0 1px 3px rgba(0, 0, 0, 0.1));
}

.revision-list__th,
.revision-list__cell {
    padding: var(--ej-spacing-md, 1rem);
    text-align: left;
}

.revision-list__th {
    background: var(--ej-color-surface-elevated, #f9fafb);
    font-weight: 600;
    color: var(--ej-text-muted, #6b7280);
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;

    &--check {
        width: 80px;
        text-align: center;
    }
}

.revision-list__row {
    border-bottom: 1px solid var(--ej-border-color, #e5e7eb);
    transition: background 0.15s ease;

    &:hover {
        background: var(--ej-color-surface-hover, #f9fafb);
    }

    &--current {
        background: color-mix(in srgb, var(--ej-color-success, #10B981) 8%, white);

        &:hover {
            background: color-mix(in srgb, var(--ej-color-success, #10B981) 12%, white);
        }
    }
}

.revision-list__cell {
    &--radio {
        text-align: center;

        input[type="radio"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: var(--ej-color-corporate, #233D63);
        }
    }

    &--date {
        font-family: var(--ej-font-mono, 'JetBrains Mono', monospace);
        font-size: 0.875rem;
    }

    &--log {
        color: var(--ej-text-muted, #6b7280);
        font-size: 0.875rem;
        max-width: 300px;
    }
}

.revision-list__actions {
    margin-top: var(--ej-spacing-lg, 2rem);
    display: flex;
    justify-content: center;
}

.revision-list__empty {
    padding: var(--ej-spacing-xl, 3rem);
    text-align: center;
}

// ═══════════════════════════════════════════════════════════════
// COMPARACIÓN DE REVISIONES
// ═══════════════════════════════════════════════════════════════

.revision-diff {
    max-width: 1400px;
    margin: 0 auto;
    padding: var(--ej-spacing-lg, 2rem);
}

.revision-diff__versions {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    gap: var(--ej-spacing-lg, 2rem);
    align-items: center;
    margin-bottom: var(--ej-spacing-xl, 3rem);
    padding: var(--ej-spacing-lg, 2rem);
    background: var(--ej-color-surface-elevated, #f9fafb);
    border-radius: var(--ej-border-radius-lg, 12px);
}

.revision-diff__version {
    padding: var(--ej-spacing-md, 1rem);
    background: var(--ej-color-surface, #fff);
    border-radius: var(--ej-border-radius, 8px);
    box-shadow: var(--ej-shadow-sm, 0 1px 3px rgba(0, 0, 0, 0.1));

    &--old {
        border-left: 4px solid var(--ej-color-warning, #F59E0B);
    }

    &--new {
        border-left: 4px solid var(--ej-color-success, #10B981);
    }
}

.revision-diff__version-badge {
    display: inline-flex;
    align-items: center;
    gap: var(--ej-spacing-xs, 0.25rem);
    padding: var(--ej-spacing-xs, 0.25rem) var(--ej-spacing-sm, 0.5rem);
    background: var(--ej-color-surface-elevated, #f3f4f6);
    border-radius: var(--ej-border-radius-sm, 4px);
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: var(--ej-spacing-sm, 0.5rem);
}

.revision-diff__version-meta {
    display: flex;
    flex-direction: column;
    gap: var(--ej-spacing-xs, 0.25rem);
}

.revision-diff__date {
    font-family: var(--ej-font-mono, 'JetBrains Mono', monospace);
    font-size: 1rem;
    font-weight: 600;
    color: var(--ej-text-primary, #1f2937);
}

.revision-diff__user {
    font-size: 0.875rem;
    color: var(--ej-text-muted, #6b7280);
}

.revision-diff__log {
    margin-top: var(--ej-spacing-sm, 0.5rem);
    font-style: italic;
    color: var(--ej-text-muted, #9ca3af);
    font-size: 0.875rem;
}

.revision-diff__arrow {
    color: var(--ej-text-muted, #6b7280);
}

// Campos de diferencia
.revision-diff__content {
    display: flex;
    flex-direction: column;
    gap: var(--ej-spacing-lg, 2rem);
}

.revision-diff__field {
    background: var(--ej-color-surface, #fff);
    border-radius: var(--ej-border-radius-lg, 12px);
    box-shadow: var(--ej-shadow-sm, 0 1px 3px rgba(0, 0, 0, 0.1));
    overflow: hidden;
}

.revision-diff__field-name {
    display: flex;
    align-items: center;
    gap: var(--ej-spacing-sm, 0.5rem);
    padding: var(--ej-spacing-md, 1rem);
    background: var(--ej-color-surface-elevated, #f9fafb);
    margin: 0;
    font-size: 1rem;
    font-weight: 600;
}

.revision-diff__field--added .revision-diff__field-name {
    background: color-mix(in srgb, var(--ej-color-success, #10B981) 10%, white);
    color: var(--ej-color-success, #10B981);
}

.revision-diff__field--removed .revision-diff__field-name {
    background: color-mix(in srgb, var(--ej-color-danger, #EF4444) 10%, white);
    color: var(--ej-color-danger, #EF4444);
}

.revision-diff__field--modified .revision-diff__field-name {
    background: color-mix(in srgb, var(--ej-color-warning, #F59E0B) 10%, white);
    color: var(--ej-color-impulse, #FF8C42);
}

// Comparación lado a lado
.revision-diff__comparison {
    display: grid;
    grid-template-columns: 1fr 1fr;
}

.revision-diff__old,
.revision-diff__new {
    padding: var(--ej-spacing-md, 1rem);
}

.revision-diff__old {
    background: color-mix(in srgb, var(--ej-color-danger, #EF4444) 5%, white);
    border-right: 1px solid var(--ej-border-color, #e5e7eb);
}

.revision-diff__new {
    background: color-mix(in srgb, var(--ej-color-success, #10B981) 5%, white);
}

.revision-diff__label {
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--ej-text-muted, #6b7280);
    margin-bottom: var(--ej-spacing-sm, 0.5rem);
}

.revision-diff__value {
    font-family: var(--ej-font-mono, 'JetBrains Mono', monospace);
    font-size: 0.875rem;
    white-space: pre-wrap;
    word-break: break-word;
}

// Cambios en secciones
.revision-diff__sections {
    padding: var(--ej-spacing-md, 1rem);
    display: flex;
    flex-direction: column;
    gap: var(--ej-spacing-sm, 0.5rem);
}

.revision-diff__section-change {
    display: flex;
    align-items: center;
    gap: var(--ej-spacing-sm, 0.5rem);
    padding: var(--ej-spacing-sm, 0.5rem) var(--ej-spacing-md, 1rem);
    border-radius: var(--ej-border-radius-sm, 4px);

    &--added {
        background: color-mix(in srgb, var(--ej-color-success, #10B981) 10%, white);
    }

    &--removed {
        background: color-mix(in srgb, var(--ej-color-danger, #EF4444) 10%, white);
    }

    &--modified {
        background: color-mix(in srgb, var(--ej-color-warning, #F59E0B) 10%, white);
    }

    &--reordered {
        background: color-mix(in srgb, var(--ej-color-innovation, #00A9A5) 10%, white);
    }
}

.revision-diff__section-type {
    display: inline-flex;
    align-items: center;
    gap: var(--ej-spacing-xs, 0.25rem);
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
}

.revision-diff__section-label {
    font-weight: 500;
}

.revision-diff__fields-changed {
    font-size: 0.75rem;
    color: var(--ej-text-muted, #6b7280);
}

// Sin cambios
.revision-diff__no-changes {
    padding: var(--ej-spacing-xl, 3rem);
    text-align: center;
    background: var(--ej-color-surface, #fff);
    border-radius: var(--ej-border-radius-lg, 12px);
}

// Acciones de rollback
.revision-diff__actions {
    margin-top: var(--ej-spacing-xl, 3rem);
    padding: var(--ej-spacing-lg, 2rem);
    background: var(--ej-color-surface-elevated, #f9fafb);
    border-radius: var(--ej-border-radius-lg, 12px);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--ej-spacing-md, 1rem);
}

.revision-diff__actions-info {
    display: flex;
    align-items: center;
    gap: var(--ej-spacing-sm, 0.5rem);
    font-size: 0.875rem;
    color: var(--ej-text-muted, #6b7280);
}

// Animaciones
.fade-in {
    animation: fadeInUp 0.3s ease forwards;
    opacity: 0;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

// Responsive
@media (max-width: 768px) {
    .revision-diff__versions {
        grid-template-columns: 1fr;
    }

    .revision-diff__arrow {
        transform: rotate(90deg);
        justify-self: center;
    }

    .revision-diff__comparison {
        grid-template-columns: 1fr;
    }

    .revision-diff__old {
        border-right: none;
        border-bottom: 1px solid var(--ej-border-color, #e5e7eb);
    }
}