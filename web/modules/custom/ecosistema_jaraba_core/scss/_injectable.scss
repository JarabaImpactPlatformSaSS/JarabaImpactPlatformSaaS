// =============================================================================
// VARIABLES CSS INYECTABLES - PERSONALIZACIÓN EN TIEMPO DE EJECUCIÓN
// =============================================================================
// Este archivo genera las CSS Custom Properties (variables) que pueden ser
// modificadas en tiempo de ejecución desde la configuración de la vertical
// o tenant en Drupal.
//
// El tema de Drupal inyecta los valores personalizados en el <head> de la
// página mediante hook_page_attachments o un bloque de configuración.
//
// Ejemplo de inyección desde PHP:
// $variables['#attached']['html_head'][] = [
//   ['#type' => 'html_tag', '#tag' => 'style', '#value' => ':root { --ej-color-primary: #FF8C42; }'],
//   'ecosistema_jaraba_custom_vars',
// ];
// =============================================================================

@use 'variables' as *;

// ---------------------------------------------------------------------------
// DEFINICIÓN DE VARIABLES INYECTABLES EN :root
// ---------------------------------------------------------------------------

:root {
    // =========================================================================
    // COLORES PRIMARIOS: Ahora inyectados por StylePresetService
    // via <style id="ej-design-tokens"> en PageAttachmentsHooks.
    // NO definir aquí --ej-color-primary, --ej-color-secondary, --ej-color-accent
    // ni --ej-color-success, --ej-color-warning, --ej-color-error.
    // =========================================================================

    // Colores derivados calculados (dependen de los tokens inyectados)
    --ej-color-primary-hover: color-mix(in srgb, var(--ej-color-primary, #{$ej-color-primary-fallback}) 85%, black);
    --ej-color-secondary-hover: color-mix(in srgb, var(--ej-color-secondary, #{$ej-color-secondary-fallback}) 85%, black);

    // Light: versión clara para fondos
    --ej-color-primary-light: color-mix(in srgb, var(--ej-color-primary, #{$ej-color-primary-fallback}) 15%, white);
    --ej-color-secondary-light: color-mix(in srgb, var(--ej-color-secondary, #{$ej-color-secondary-fallback}) 15%, white);

    // Info (no gestionado por token system todavía)
    --ej-color-info: #{$ej-color-info};

    // Tipografía: --ej-font-family-heading y --ej-font-family-body son inyectados.
    // Alias genérico con fallback:
    --ej-font-family: var(--ej-font-family-body, #{$ej-font-family-fallback});

    // Grises (escala fija, no inyectable por token)
    --ej-gray-50: #{$ej-gray-50};
    --ej-gray-100: #{$ej-gray-100};
    --ej-gray-200: #{$ej-gray-200};
    --ej-gray-300: #{$ej-gray-300};
    --ej-gray-400: #{$ej-gray-400};
    --ej-gray-500: #{$ej-gray-500};
    --ej-gray-600: #{$ej-gray-600};
    --ej-gray-700: #{$ej-gray-700};
    --ej-gray-800: #{$ej-gray-800};
    --ej-gray-900: #{$ej-gray-900};

    // Texto
    --ej-text-primary: #{$ej-gray-900};
    --ej-text-secondary: #{$ej-gray-600};
    --ej-text-muted: #{$ej-gray-500};
    --ej-text-light: #{$ej-gray-400};

    // Fondos
    --ej-bg-page: linear-gradient(135deg, #{$ej-gray-50} 0%, #{$ej-gray-200} 100%);
    --ej-bg-card: #ffffff;
    --ej-bg-input: #ffffff;

    // Bordes
    --ej-border-color: #{$ej-gray-300};
    --ej-border-color-light: #{$ej-gray-200};

    // Sombras como variables para posible personalización
    --ej-shadow-sm: #{$ej-shadow-sm};
    --ej-shadow-md: #{$ej-shadow-md};
    --ej-shadow-lg: #{$ej-shadow-lg};

    // Radio de bordes
    --ej-border-radius: #{$ej-border-radius-md};
    --ej-border-radius-sm: #{$ej-border-radius-sm};
    --ej-border-radius-lg: #{$ej-border-radius-lg};

    // Transiciones
    --ej-transition: all #{$ej-transition-duration-normal} #{$ej-transition-easing};
    --ej-transition-fast: all #{$ej-transition-duration-fast} #{$ej-transition-easing};

    // =========================================================================
    // PREMIUM TOKENS (f-102 Industry Style Presets)
    // =========================================================================
    // Inyectables por StylePresetService via DesignTokenConfig.effect_tokens.
    // Cada Industry Preset puede sobrescribir estos valores.

    // Glassmorphism
    --ej-glass-bg: #{$ej-glass-bg-fallback};
    --ej-glass-bg-dark: #{$ej-glass-bg-dark-fallback};
    --ej-glass-blur: blur(#{$ej-glass-blur-fallback});
    --ej-glass-border: #{$ej-glass-border-fallback};

    // Surfaces (contextuales — varían por preset)
    --ej-color-surface: #{$ej-color-surface-fallback};
    --ej-color-surface-elevated: #{$ej-color-surface-elevated-fallback};
    --ej-color-surface-dark: #{$ej-color-surface-dark-fallback};

    // Gradients
    --ej-gradient-primary: #{$ej-gradient-primary-fallback};

    // Transitions premium
    --ej-transition-spring: all #{$ej-transition-duration-spring} #{$ej-transition-easing-spring};
    --ej-transition-slow: all #{$ej-transition-duration-slow} #{$ej-transition-easing};
}

// ---------------------------------------------------------------------------
// SOPORTE PARA MODO OSCURO (futuro)
// ---------------------------------------------------------------------------
// Cuando se implemente dark mode, estas variables se sobrescribirán

@media (prefers-color-scheme: dark) {
    // :root {
    //   --ej-text-primary: #{$ej-gray-100};
    //   --ej-text-secondary: #{$ej-gray-400};
    //   --ej-bg-page: linear-gradient(135deg, #{$ej-gray-900} 0%, #{$ej-gray-800} 100%);
    //   --ej-bg-card: #{$ej-gray-800};
    //   --ej-border-color: #{$ej-gray-700};
    // }
}