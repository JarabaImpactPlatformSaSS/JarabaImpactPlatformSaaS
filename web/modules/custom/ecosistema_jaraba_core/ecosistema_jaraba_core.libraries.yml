# ============================================================================
# BIBLIOTECAS DEL MÓDULO ECOSISTEMA JARABA CORE
# ============================================================================
# Define las bibliotecas de CSS y JS del módulo.
# Las bibliotecas se cargan condicionalmente según la página/funcionalidad.
# 
# COMPILACIÓN SCSS:
# Los archivos SCSS en scss/ se compilan a css/ con el siguiente comando:
# npx sass scss/main.scss:css/ecosistema-jaraba-core.css --style=compressed
# ============================================================================

# ---------------------------------------------------------------------------
# AUDIT-PERF-N12: Canonical Chart.js CDN — single source of truth
# ---------------------------------------------------------------------------
# Todos los módulos deben declarar ecosistema_jaraba_core/chartjs como
# dependencia en vez de incluir la URL del CDN directamente.

chartjs:
  version: 4.4.1
  js:
    https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js: { type: external, minified: true, attributes: { crossorigin: anonymous, integrity: 'sha384-9nhczxUqK87bcKHh20fSQcTGD4qq5GhayNYSYWqwBkINBhOfQLg/P5HG5lF1urn4' } }

# ---------------------------------------------------------------------------
# BIBLIOTECA PRINCIPAL DEL MÓDULO
# ---------------------------------------------------------------------------
# Incluye los estilos base compilados desde SCSS.
# Se carga automáticamente cuando se usan los templates del módulo.

global:
  version: 1.x
  css:
    theme:
      css/ecosistema-jaraba-core.css: {}
  dependencies:
    - core/drupal

# ---------------------------------------------------------------------------
# BIBLIOTECA DE ONBOARDING
# ---------------------------------------------------------------------------
# Estilos y JavaScript específicos para el flujo de registro de tenants.
# Incluye validación de formularios, toggle de precios, confetti, etc.

onboarding:
  version: 1.x
  css:
    theme:
      css/ecosistema-jaraba-core.css: {}
  js:
    js/ecosistema-jaraba-onboarding.js: {}
  dependencies:
    - core/drupal
    - core/drupal.ajax
    - core/jquery
    - core/once

# ---------------------------------------------------------------------------
# BIBLIOTECA DE AUTOFIRMA
# ---------------------------------------------------------------------------
# JavaScript para integración con AutoFirma (firma digital de documentos).

autofirma:
  version: 1.x
  js:
    js/ecosistema-jaraba-firma.js: {}
  dependencies:
    - core/drupal
    - core/drupal.ajax
    - core/jquery
    - core/once

# ---------------------------------------------------------------------------
# BIBLIOTECA DE STRIPE
# ---------------------------------------------------------------------------
# Integración con Stripe Elements/Checkout para configuración de pagos.
# Carga el SDK de Stripe desde CDN.

stripe:
  version: 1.x
  js:
    https://js.stripe.com/v3/: { type: external, minified: true }
    js/ecosistema-jaraba-stripe.js: {}
  dependencies:
    - core/drupal
    - core/drupal.ajax
    - ecosistema_jaraba_core/onboarding

# ---------------------------------------------------------------------------
# BIBLIOTECA DEL DASHBOARD DE TENANT
# ---------------------------------------------------------------------------
# Estilos para el panel de administración del Tenant.
# Incluye cards, métricas, acciones rápidas y estilos responsivos.
# También incluye JavaScript para el portal de facturación Stripe.

tenant_dashboard:
  version: 1.x
  css:
    theme:
      css/ecosistema-jaraba-core.css: {}
  js:
    js/ecosistema-jaraba-billing.js: {}
  dependencies:
    - core/drupal
    - core/once

# ---------------------------------------------------------------------------
# BIBLIOTECA DEL DASHBOARD DE SALUD
# ---------------------------------------------------------------------------
# Dashboard de observabilidad con estado de servicios, métricas y quick actions.
# Diseño premium con dark theme y glassmorphism.

health-dashboard:
  version: 1.x
  css:
    theme:
      css/ecosistema-jaraba-core.css: {}
  js:
    js/health-dashboard.js: {}
  dependencies:
    - core/drupal
    - core/drupalSettings
    - core/once

# ---------------------------------------------------------------------------
# BIBLIOTECA DEL DASHBOARD FINOPS
# ---------------------------------------------------------------------------
# Dashboard de optimización de costes con métricas por tenant,
# proyecciones y recomendaciones de ahorro.
# AUDIT-PERF-N12: Chart.js via dependencia canónica ecosistema_jaraba_core/chartjs

finops-dashboard:
  version: 1.x
  css:
    theme:
      css/ecosistema-jaraba-core.css: {}
  js:
    js/finops-ai-charts.js: {}
  dependencies:
    - core/drupal
    - core/drupalSettings
    - core/once
    - ecosistema_jaraba_core/chartjs

# ---------------------------------------------------------------------------
# BIBLIOTECA DEL TENANT SELF-SERVICE DASHBOARD
# ---------------------------------------------------------------------------
# Dashboard self-service para tenants con gráficos de tendencias.
# AUDIT-PERF-N12: Chart.js via dependencia canónica ecosistema_jaraba_core/chartjs

tenant-dashboard:
  version: 1.x
  css:
    theme:
      css/ecosistema-jaraba-core.css: {}
  js:
    js/tenant-dashboard-charts.js: {}
  dependencies:
    - core/drupal
    - core/drupalSettings
    - core/once
    - ecosistema_jaraba_core/chartjs

# ---------------------------------------------------------------------------
# BIBLIOTECA DEL MARKETPLACE
# ---------------------------------------------------------------------------
# Landing page del marketplace con productos cross-tenant.

marketplace:
  version: 1.x
  css:
    theme:
      css/ecosistema-jaraba-core.css: {}
  dependencies:
    - core/drupal

# ---------------------------------------------------------------------------
# BIBLIOTECA DE DEMO LANDING
# ---------------------------------------------------------------------------
# Landing de selección de perfil de demo.

demo-landing:
  version: 1.x
  css:
    theme:
      css/ecosistema-jaraba-core.css: {}
  dependencies:
    - core/drupal

# ---------------------------------------------------------------------------
# BIBLIOTECA DE DEMO DASHBOARD
# ---------------------------------------------------------------------------
# Dashboard interactivo con métricas y gráficos para demo.
# AUDIT-PERF-N12: Chart.js via dependencia canónica ecosistema_jaraba_core/chartjs

demo-dashboard:
  version: 1.x
  css:
    theme:
      css/ecosistema-jaraba-core.css: {}
  dependencies:
    - core/drupal
    - core/drupalSettings
    - ecosistema_jaraba_core/chartjs

# ---------------------------------------------------------------------------
# BIBLIOTECA DE CHARTS (ALIAS PARA DEMO)
# ---------------------------------------------------------------------------
# AUDIT-PERF-N12: Alias que ahora delega a ecosistema_jaraba_core/chartjs

charts:
  version: 1.x
  dependencies:
    - core/drupal
    - ecosistema_jaraba_core/chartjs

# ---------------------------------------------------------------------------
# BIBLIOTECA DE DEMO STORYTELLING
# ---------------------------------------------------------------------------
# Página de generación de historias con IA.

demo-storytelling:
  version: 1.x
  css:
    theme:
      css/ecosistema-jaraba-core.css: {}
  dependencies:
    - core/drupal

# ---------------------------------------------------------------------------
# BIBLIOTECA DE CONTEXTUAL AI COPILOT (Q1 2027)
# ---------------------------------------------------------------------------
# Widget flotante de asistente IA contextual.
# Se carga globalmente para usuarios autenticados.

contextual-copilot:
  version: 1.x
  css:
    component:
      css/ecosistema-jaraba-core.css: {}
  js:
    js/contextual-copilot.js: {}
  dependencies:
    - core/drupal
    - core/drupalSettings

# ---------------------------------------------------------------------------
# BIBLIOTECA DE PWA (Q1 2027)
# ---------------------------------------------------------------------------
# Progressive Web App: Service Worker, offline-first, push notifications.
# Se carga globalmente para todos los usuarios.

pwa:
  version: 1.x
  js:
    js/pwa-register.js: {}
  dependencies:
    - core/drupal
    - core/drupalSettings

# ---------------------------------------------------------------------------
# BIBLIOTECA DE DIAGNÓSTICO EXPRESS (Q1 2027)
# ---------------------------------------------------------------------------
# Sistema de diagnóstico TTV < 60s para Value-First Onboarding.
# Motor de scoring 100% client-side, perfiles, impacto económico.

diagnostic:
  version: 1.x
  css:
    theme:
      css/ecosistema-jaraba-core.css: {}
  js:
    js/diagnostic-scoring-engine.js: {}
  dependencies:
    - core/drupal
    - core/drupalSettings
    - core/once

# ---------------------------------------------------------------------------
# SISTEMA DE MODALES CRUD (Spec 20260120b)
# ---------------------------------------------------------------------------
# Behavior que detecta links con data-dialog-type="modal" y configura
# Drupal.dialog con opciones por defecto. Callback on close refresca contenido.

modal-system:
  version: 1.x
  js:
    js/modal-system.js: {}
  dependencies:
    - core/drupal
    - core/once
    - core/drupal.dialog
    - core/drupal.dialog.ajax
    - core/drupal.ajax

# ---------------------------------------------------------------------------
# BIBLIOTECA DE CORRECCIÓN DE TABS ADMIN
# ---------------------------------------------------------------------------
# Fix para pestañas administrativas que truncan texto en español.
# Se carga en todas las páginas /admin/*.

admin-tabs-fix:
  version: 1.x
  css:
    theme:
      css/admin-tabs-fix.css: {}

# ---------------------------------------------------------------------------
# BIBLIOTECA RBAC MATRIX (Admin Center D.2)
# ---------------------------------------------------------------------------
# Matriz visual de permisos por rol con toggle AJAX y filtro por módulo.

rbac-matrix:
  version: 1.x
  css:
    theme:
      css/rbac-matrix.css: {}
  js:
    js/rbac-matrix.js: {}
  dependencies:
    - core/drupal
    - core/once

# ---------------------------------------------------------------------------
# BIBLIOTECA DE USAGE DASHBOARD (G111 / f111)
# ---------------------------------------------------------------------------
# Dashboard de uso y facturación para tenants.
# AUDIT-PERF-N12: Chart.js via dependencia canónica ecosistema_jaraba_core/chartjs

usage-dashboard:
  version: 1.x
  css:
    theme:
      css/ecosistema-jaraba-core.css: {}
  js:
    js/usage-dashboard.js: {}
  dependencies:
    - core/drupal
    - core/drupalSettings
    - core/once
    - ecosistema_jaraba_core/chartjs

# ---------------------------------------------------------------------------
# COMPLIANCE DASHBOARD (G115-1)
# ---------------------------------------------------------------------------

compliance-dashboard:
  version: 1.x
  css:
    theme:
      css/compliance-dashboard.css: {}
  js:
    js/compliance-dashboard.js: {}
  dependencies:
    - core/drupal
    - core/drupalSettings
    - core/once

# ---------------------------------------------------------------------------
# RESELLER PORTAL (G117-4)
# ---------------------------------------------------------------------------
# Portal de partner/reseller con dashboard de comisiones y tenants.

reseller-portal:
  version: 1.x
  css:
    theme:
      css/reseller-portal.css: {}
  js:
    js/reseller-portal.js: {}
  dependencies:
    - core/drupal
    - core/once

# ---------------------------------------------------------------------------
# LEAD MAGNETS (F3 Doc 178)
# ---------------------------------------------------------------------------
# Estilos y JavaScript para lead magnets publicos por vertical.
# Incluye formulario de captura, calculadora interactiva, scoring client-side.

# ---------------------------------------------------------------------------
# VISITOR JOURNEY TRACKING (F3 Doc 178)
# ---------------------------------------------------------------------------
# Deteccion de vertical del visitante + tracking AIDA del funnel.
# Se carga globalmente en todas las paginas frontend (no admin).

visitor-journey:
  version: 1.x
  js:
    js/visitor-vertical-detection.js: {}
    js/aida-tracking.js: {}
  dependencies:
    - core/drupal
    - core/drupalSettings
    - core/once

lead-magnet:
  version: 1.x
  css:
    theme:
      css/ecosistema-jaraba-core.css: {}
  js:
    js/lead-magnet.js: {}
  dependencies:
    - core/drupal
    - core/drupalSettings
    - core/once

# ---------------------------------------------------------------------------
# ADMIN CENTER DASHBOARD (F6 Doc 181)
# ---------------------------------------------------------------------------

admin-center:
  version: 1.x
  css:
    theme:
      css/admin-center.css: {}
  js:
    js/admin-center-layout.js: {}
  dependencies:
    - core/drupal
    - core/drupalSettings
    - core/once

# ---------------------------------------------------------------------------
# ADMIN CENTER DATATABLE (F6 Doc 181 / Spec f104 §FASE 2)
# ---------------------------------------------------------------------------
# Reusable DataTable component: sort, filter, server-side pagination, skeletons.

admin-center-datatable:
  version: 1.x
  css:
    theme:
      css/ecosistema-jaraba-core.css: {}
  js:
    js/admin-center-datatable.js: {}
  dependencies:
    - core/drupal
    - core/once
    - ecosistema_jaraba_theme/slide-panel

# ---------------------------------------------------------------------------
# ADMIN CENTER TENANTS PAGE (F6 Doc 181 / Spec f104 §FASE 2)
# ---------------------------------------------------------------------------
# Initializer for the tenants DataTable: columns, filters, row actions.

admin-center-tenants:
  version: 1.x
  js:
    js/admin-center-tenants-init.js: {}
  dependencies:
    - core/drupal
    - core/drupalSettings
    - core/once
    - ecosistema_jaraba_core/admin-center-datatable

# ---------------------------------------------------------------------------
# ADMIN CENTER USERS PAGE (F6 Doc 181 / Spec f104 §FASE 3)
# ---------------------------------------------------------------------------
# Initializer for the users DataTable: columns, filters, row actions.

admin-center-users:
  version: 1.x
  js:
    js/admin-center-users-init.js: {}
  dependencies:
    - core/drupal
    - core/drupalSettings
    - core/once
    - ecosistema_jaraba_core/admin-center-datatable

# ---------------------------------------------------------------------------
# ADMIN CENTER ANALYTICS PAGE (F6 Doc 181 / Spec f104 §FASE 6)
# ---------------------------------------------------------------------------
# Analytics dashboard: scorecards, Chart.js trends, AI telemetry table.

admin-center-analytics:
  version: 1.x
  css:
    theme:
      css/ecosistema-jaraba-core.css: {}
  js:
    js/admin-center-analytics-init.js: {}
  dependencies:
    - core/drupal
    - core/drupalSettings
    - core/once
    - ecosistema_jaraba_core/chartjs

# ---------------------------------------------------------------------------
# ADMIN CENTER LOGS PAGE (F6 Doc 181 / Spec f104 §FASE 6)
# ---------------------------------------------------------------------------
# Activity log viewer: source tabs, severity filters, search, paginated table.

admin-center-logs:
  version: 1.x
  css:
    theme:
      css/ecosistema-jaraba-core.css: {}
  js:
    js/admin-center-logs-init.js: {}
  dependencies:
    - core/drupal
    - core/drupalSettings
    - core/once

# ---------------------------------------------------------------------------
# ADMIN CENTER ALERTS PAGE (F6 Doc 181 / Spec f104 §FASE 5)
# ---------------------------------------------------------------------------
# Alerts dashboard: scorecards, alert cards, playbook grid.

admin-center-alerts:
  version: 1.x
  css:
    theme:
      css/ecosistema-jaraba-core.css: {}
  js:
    js/admin-center-alerts-init.js: {}
  dependencies:
    - core/drupal
    - core/drupalSettings
    - core/once
    - ecosistema_jaraba_theme/slide-panel

# ---------------------------------------------------------------------------
# ADMIN CENTER FINANCE PAGE (F6 Doc 181 / Spec f104 §FASE 4)
# ---------------------------------------------------------------------------
# Centro Financiero: scorecards, SaaS metrics table, tenant analytics.

admin-center-finance:
  version: 1.x
  css:
    theme:
      css/ecosistema-jaraba-core.css: {}
  js:
    js/admin-center-finance-init.js: {}
  dependencies:
    - core/drupal
    - core/drupalSettings
    - core/once

# ---------------------------------------------------------------------------
# GLOBAL COMMAND PALETTE + KEYBOARD SHORTCUTS (F6 Doc 181)
# ---------------------------------------------------------------------------
# Adjuntado via hook_preprocess_html() en todas las rutas admin.

admin-command-palette:
  version: 1.x
  css:
    theme:
      css/admin-command-palette.css: {}
  js:
    js/admin-command-palette.js: {}
  dependencies:
    - core/drupal
    - core/drupalSettings
    - core/once

# ---------------------------------------------------------------------------
# ADMIN STRUCTURE ENHANCED UX
# ---------------------------------------------------------------------------
# Página /admin/structure categorizada con búsqueda en tiempo real.

admin-structure:
  version: 1.x
  css:
    theme:
      css/ecosistema-jaraba-core.css: {}
  js:
    js/admin-structure.js: {}
  dependencies:
    - core/drupal
    - core/once

# ---------------------------------------------------------------------------
# ADMIN CENTER SETTINGS PAGE (F6 Doc 181 / Spec f104 §FASE 7)
# ---------------------------------------------------------------------------
# Configuración global: General, Planes, Integraciones, API Keys.

admin-center-settings:
  version: 1.x
  css:
    theme:
      css/ecosistema-jaraba-core.css: {}
  js:
    js/admin-center-settings-init.js: {}
  dependencies:
    - core/drupal
    - core/drupalSettings
    - core/once

# Back to Top - Botón flotante "Volver arriba" para páginas admin
back-to-top:
  version: 1.x
  css:
    theme:
      css/ecosistema-jaraba-core.css: {}
  js:
    js/back-to-top.js: {}
  dependencies:
    - core/drupal
    - core/once

# ---------------------------------------------------------------------------
# COMPLIANCE PANEL UNIFICADO (Stack Compliance Legal N1 — FASE 12)
# ---------------------------------------------------------------------------
# Panel cross-modulo que agrega KPIs de jaraba_privacy, jaraba_legal, jaraba_dr
# con score global, grados A-F y alertas por umbral.

compliance-panel:
  version: 1.x
  css:
    theme:
      css/ecosistema-jaraba-core.css: {}
  js:
    js/compliance-panel.js: {}
  dependencies:
    - core/drupal
    - core/drupalSettings
    - core/once

# ---------------------------------------------------------------------------
# STACK CUMPLIMIENTO FISCAL (FASE 0)
# ---------------------------------------------------------------------------
# Estilos compartidos para el dashboard fiscal unificado y parciales
# reutilizables (_certificate-status, _fiscal-status-badge, _fiscal-tenant-selector).
# Incluye variables CSS fiscales (--ej-fiscal-*).

fiscal-styles:
  version: 1.x
  css:
    theme:
      css/ecosistema-jaraba-core.css: {}
  dependencies:
    - core/drupal
