// =============================================================================
// Detalle de Experimento A/B
// =============================================================================

@use 'variables' as *;

.ej-ab-detail {
  @include ab-container;
  padding-block: $ab-space-xl;

  // --- Header ---
  &__header {
    display: flex;
    flex-direction: column;
    gap: $ab-space-lg;
    margin-bottom: $ab-space-2xl;

    @media (min-width: $ab-bp-lg) {
      flex-direction: row;
      justify-content: space-between;
      align-items: flex-start;
    }
  }

  &__breadcrumb {
    display: flex;
    align-items: center;
    gap: $ab-space-xs;
    font-size: 0.8125rem;
    color: var(--ej-text-muted, #9e9e9e);
    margin-bottom: $ab-space-sm;

    a {
      color: var(--ej-primary-color, $ab-primary);
      text-decoration: none;

      &:hover { text-decoration: underline; }
    }
  }

  &__title {
    margin: 0 0 $ab-space-sm;
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--ej-heading-color, #212121);
  }

  &__meta {
    display: flex;
    gap: $ab-space-md;
    align-items: center;
    flex-wrap: wrap;
  }

  &__status {
    padding: $ab-space-xs $ab-space-sm;
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    border-radius: $ab-radius-sm;

    &--running { background: color-mix(in srgb, $ab-success 15%, white); color: $ab-success; }
    &--paused { background: color-mix(in srgb, $ab-warning 15%, white); color: $ab-warning; }
    &--completed { background: color-mix(in srgb, $ab-primary 15%, white); color: $ab-primary; }
    &--draft { background: var(--ej-surface-color, #f5f5f5); color: var(--ej-text-muted, #9e9e9e); }
  }

  &__type, &__dates {
    font-size: 0.875rem;
    color: var(--ej-text-color, #616161);
  }

  &__hypothesis {
    margin-top: $ab-space-sm;
    padding: $ab-space-md;
    background: var(--ej-surface-color, #f5f5f5);
    border-radius: $ab-radius-sm;
    font-size: 0.9375rem;
    color: var(--ej-text-color, #424242);
    line-height: 1.5;
  }

  // --- KPIs del header ---
  &__header-kpis {
    display: flex;
    gap: $ab-space-md;
  }

  &__kpi {
    @include ab-card;
    padding: $ab-space-md $ab-space-lg;
    text-align: center;
    min-width: 100px;
  }

  &__kpi-value {
    display: block;
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--ej-primary-color, $ab-primary);
  }

  &__kpi-label {
    font-size: 0.6875rem;
    color: var(--ej-text-muted, #9e9e9e);
    text-transform: uppercase;
  }

  // --- Variants table ---
  &__variants {
    margin-bottom: $ab-space-2xl;

    h2 {
      margin: 0 0 $ab-space-md;
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--ej-heading-color, #212121);
    }
  }

  &__table-wrapper {
    overflow-x: auto;
    @include ab-card;
  }

  &__table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.875rem;

    th, td { padding: $ab-space-sm $ab-space-md; text-align: left; }
    th {
      background: var(--ej-surface-color, #fafafa);
      font-weight: 600;
      border-bottom: 2px solid var(--ej-card-border, rgba(0, 0, 0, 0.08));
    }
    td { border-bottom: 1px solid var(--ej-card-border, rgba(0, 0, 0, 0.04)); }
  }

  &__variant--winner { background: color-mix(in srgb, $ab-success 5%, white); }
  &__variant--control td { font-style: italic; }

  &__variant-name { font-weight: 600; }
  &__control-badge {
    display: inline-block;
    padding: 0 $ab-space-xs;
    font-size: 0.625rem;
    font-weight: 700;
    text-transform: uppercase;
    color: var(--ej-text-muted, #9e9e9e);
    border: 1px solid var(--ej-card-border, #d0d0d0);
    border-radius: 3px;
    margin-left: $ab-space-xs;
    font-style: normal;
  }

  &__lift {
    font-weight: 700;

    &--positive { color: $ab-success; }
    &--negative { color: $ab-error; }
    &--baseline { color: var(--ej-text-muted, #9e9e9e); font-size: 0.75rem; }
  }

  &__confidence {
    &--high { color: $ab-success; font-weight: 700; }
  }

  &__winner-badge {
    padding: $ab-space-xs $ab-space-sm;
    background: $ab-success;
    color: #fff;
    font-size: 0.6875rem;
    font-weight: 700;
    border-radius: $ab-radius-sm;
    text-transform: uppercase;
  }

  &__significant-badge {
    padding: $ab-space-xs $ab-space-sm;
    background: color-mix(in srgb, $ab-primary 15%, white);
    color: $ab-primary;
    font-size: 0.6875rem;
    font-weight: 700;
    border-radius: $ab-radius-sm;
    text-transform: uppercase;
  }

  &__pending-badge {
    font-size: 0.75rem;
    color: var(--ej-text-muted, #9e9e9e);
  }

  // --- Analysis ---
  &__analysis {
    margin-bottom: $ab-space-2xl;

    h2 {
      margin: 0 0 $ab-space-md;
      font-size: 1.25rem;
      font-weight: 700;
    }
  }

  &__analysis-card {
    @include ab-card;
    padding: $ab-space-lg;
  }

  &__analysis-result {
    padding: $ab-space-md;
    border-radius: $ab-radius-sm;
    margin-bottom: $ab-space-md;

    strong { display: block; margin-bottom: $ab-space-xs; }
    p { margin: 0; font-size: 0.9375rem; }

    &--winner {
      background: color-mix(in srgb, $ab-success 10%, white);
      border-left: 4px solid $ab-success;
    }

    &--pending {
      background: var(--ej-surface-color, #f5f5f5);
      border-left: 4px solid var(--ej-text-muted, #bdbdbd);
    }
  }

  &__analysis-meta {
    display: flex;
    gap: $ab-space-lg;
    font-size: 0.8125rem;
    color: var(--ej-text-muted, #9e9e9e);
  }

  // --- Actions ---
  &__actions {
    padding-top: $ab-space-lg;
    border-top: 1px solid var(--ej-card-border, rgba(0, 0, 0, 0.06));
  }

  &__back-link {
    display: inline-block;
    padding: $ab-space-sm $ab-space-lg;
    background: var(--ej-primary-color, $ab-primary);
    color: #ffffff;
    text-decoration: none;
    border-radius: $ab-radius-sm;
    font-weight: 600;

    &:hover {
      background: color-mix(in srgb, var(--ej-primary-color, $ab-primary) 85%, black);
    }
  }
}
