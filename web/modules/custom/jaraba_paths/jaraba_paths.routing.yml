# Rutas del módulo jaraba_paths

# === Field UI Settings ===
entity.digitalization_path.settings:
  path: '/admin/structure/digitalization-path'
  defaults:
    _title: 'Configuración de Itinerarios'
    _form: '\Drupal\jaraba_paths\Form\DigitalizationPathSettingsForm'
  requirements:
    _permission: 'administer digitalization paths'

# === API REST ===
jaraba_paths.api.list:
  path: '/api/v1/paths'
  defaults:
    _controller: '\Drupal\jaraba_paths\Controller\PathApiController::listPaths'
    _title: 'List Paths'
  methods: [GET]
  requirements:
    _permission: 'view any digitalization path'
  options:
    _format: json

jaraba_paths.api.get:
  path: '/api/v1/paths/{uuid}'
  defaults:
    _controller: '\Drupal\jaraba_paths\Controller\PathApiController::getPath'
  methods: [GET]
  requirements:
    _permission: 'view any digitalization path'
    uuid: '[a-f0-9\-]+'
  options:
    _format: json

jaraba_paths.api.enroll:
  path: '/api/v1/paths/{uuid}/enroll'
  defaults:
    _controller: '\Drupal\jaraba_paths\Controller\PathApiController::enroll'
  methods: [POST]
  requirements:
    _permission: 'enroll in path'
    uuid: '[a-f0-9\-]+'
  options:
    _format: json

jaraba_paths.api.progress:
  path: '/api/v1/enrollments/{uuid}/progress'
  defaults:
    _controller: '\Drupal\jaraba_paths\Controller\PathApiController::getProgress'
  methods: [GET]
  requirements:
    _permission: 'view own enrollment'
    uuid: '[a-f0-9\-]+'
  options:
    _format: json

jaraba_paths.api.complete_step:
  path: '/api/v1/enrollments/{enrollment_uuid}/steps/{step_id}/complete'
  defaults:
    _controller: '\Drupal\jaraba_paths\Controller\PathApiController::completeStep'
  methods: [POST]
  requirements:
    _permission: 'track own progress'
    enrollment_uuid: '[a-f0-9\-]+'
    step_id: '\d+'
  options:
    _format: json

jaraba_paths.api.recommendations:
  path: '/api/v1/paths/recommendations'
  defaults:
    _controller: '\Drupal\jaraba_paths\Controller\PathApiController::getRecommendations'
  methods: [GET]
  requirements:
    _permission: 'view any digitalization path'
  options:
    _format: json

# === Frontend Routes ===
jaraba_paths.catalog:
  path: '/paths'
  defaults:
    _controller: '\Drupal\jaraba_paths\Controller\PathFrontendController::catalog'
    _title: 'Itinerarios de Digitalización'
  requirements:
    _permission: 'view any digitalization path'

jaraba_paths.detail:
  path: '/path/{digitalization_path}'
  defaults:
    _controller: '\Drupal\jaraba_paths\Controller\PathFrontendController::detail'
    _title: 'Detalle del Itinerario'
  requirements:
    _permission: 'view any digitalization path'

jaraba_paths.my_progress:
  path: '/my-progress'
  defaults:
    _controller: '\Drupal\jaraba_paths\Controller\PathFrontendController::myProgress'
    _title: 'Mi Progreso'
  requirements:
    _permission: 'view own enrollment'

entity.path_enrollment.collection:
  path: '/admin/content/path-enrollments'
  defaults:
    _entity_list: 'path_enrollment'
    _title: 'Path Enrollments'
  requirements:
    _permission: 'administer site configuration'

# === Field UI Settings — Entity settings forms ===

entity.path_enrollment.settings:
  path: '/admin/structure/path-enrollment/settings'
  defaults:
    _form: 'Drupal\jaraba_paths\Form\PathEnrollmentSettingsForm'
    _title: 'Inscripcion en Itinerario settings'
  requirements:
    _permission: 'view any enrollment'

entity.path_module.settings:
  path: '/admin/structure/path-module/settings'
  defaults:
    _form: 'Drupal\jaraba_paths\Form\PathModuleSettingsForm'
    _title: 'Modulo del Itinerario settings'
  requirements:
    _permission: 'administer digitalization paths'

entity.path_phase.settings:
  path: '/admin/structure/path-phase/settings'
  defaults:
    _form: 'Drupal\jaraba_paths\Form\PathPhaseSettingsForm'
    _title: 'Fase del Itinerario settings'
  requirements:
    _permission: 'administer digitalization paths'

entity.path_step.settings:
  path: '/admin/structure/path-step/settings'
  defaults:
    _form: 'Drupal\jaraba_paths\Form\PathStepSettingsForm'
    _title: 'Paso del Itinerario settings'
  requirements:
    _permission: 'administer digitalization paths'
