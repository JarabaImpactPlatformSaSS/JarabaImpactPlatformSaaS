<?php

/**
 * @file
 * Hook implementations for Jaraba Self-Discovery module.
 */

/**
 * Implements hook_page_attachments_alter().
 *
 * Adjunta la librería modal-system a las rutas del módulo self-discovery
 * para que los enlaces CRUD abran en modal (Fase 2 Empleabilidad).
 */
function jaraba_self_discovery_page_attachments_alter(array &$attachments): void {
  $route = \Drupal::routeMatch()->getRouteName() ?: '';
  if (str_starts_with($route, 'jaraba_self_discovery.')) {
    $attachments['#attached']['library'][] = 'jaraba_self_discovery/modal-actions';
  }
}

/**
 * Implements hook_theme().
 *
 * Define los templates Twig para el módulo.
 */
function jaraba_self_discovery_theme(): array {
  return [
    'self_discovery_dashboard' => [
      'variables' => [
        'assessments' => [],
        'labels' => [],
      ],
      'template' => 'self-discovery-dashboard',
    ],
    'self_discovery_life_wheel' => [
      'variables' => [
        'scores' => [],
        'last_assessment' => NULL,
        'labels' => [],
      ],
      'template' => 'self-discovery-life-wheel',
    ],
    'self_discovery_timeline' => [
      'variables' => [
        'events' => [],
        'labels' => [],
      ],
      'template' => 'self-discovery-timeline',
    ],
    'self_discovery_interests' => [
      'variables' => [
        'form' => NULL,
        'labels' => [],
      ],
      'template' => 'self-discovery-interests',
    ],
    'self_discovery_strengths' => [
      'variables' => [
        'form' => NULL,
        'labels' => [],
      ],
      'template' => 'self-discovery-strengths',
    ],
  ];
}
