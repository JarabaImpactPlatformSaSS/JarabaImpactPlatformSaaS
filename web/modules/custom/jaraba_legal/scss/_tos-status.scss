// =============================================================================
// TOS STATUS â€” SCSS
// =============================================================================
// Estilos del widget de estado de Terms of Service y modal de aceptacion.
//
// DIRECTRIZ: @use (nunca @import), color-mix() (nunca rgba()),
//            var(--ej-*) con fallback #{$legal-*}.
// BEM: .tos-status, .tos-status__*
// =============================================================================

@use 'sass:color';
@use 'variables-legal' as *;

// ---------------------------------------------------------------------------
// CONTENEDOR PRINCIPAL
// ---------------------------------------------------------------------------

.tos-status {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.tos-status__info {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  flex-wrap: wrap;
}

// ---------------------------------------------------------------------------
// BADGES DE ESTADO ToS
// ---------------------------------------------------------------------------

.tos-status__badge {
  display: inline-flex;
  align-items: center;
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
  font-size: 0.8125rem;
  font-weight: 500;

  &--accepted {
    background: var(--ej-legal-success-light, #{$legal-success-light-fallback});
    color: var(--ej-legal-tos-accepted, #{$legal-tos-accepted-fallback});
  }

  &--pending_acceptance,
  &--pending {
    background: var(--ej-legal-warning-light, #{$legal-warning-light-fallback});
    color: var(--ej-legal-tos-pending, #{$legal-tos-pending-fallback});
  }

  &--expired {
    background: var(--ej-legal-danger-light, #{$legal-danger-light-fallback});
    color: var(--ej-legal-tos-expired, #{$legal-tos-expired-fallback});
  }
}

.tos-status__version {
  font-family: $legal-font-mono;
  font-size: 0.8125rem;
  color: var(--ej-color-text-secondary, #6B7280);
}

.tos-status__date {
  font-size: 0.8125rem;
  color: var(--ej-color-text-secondary, #6B7280);
}

.tos-status__empty {
  color: var(--ej-legal-warning, #{$legal-warning-fallback});
  font-weight: 500;
}

// ---------------------------------------------------------------------------
// BOTON DE ACEPTACION
// ---------------------------------------------------------------------------

.tos-status__accept-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.625rem 1.25rem;
  border: none;
  border-radius: 6px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  background: var(--ej-legal-primary, #{$legal-primary-fallback});
  color: #FFFFFF;
  transition: background-color 150ms ease;

  &:hover {
    background: color-mix(in srgb, var(--ej-legal-primary, #{$legal-primary-fallback}) 85%, #000000);
  }

  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
}

.tos-status__history-link {
  font-size: 0.8125rem;
  color: var(--ej-legal-primary, #{$legal-primary-fallback});
  text-decoration: underline;

  &:hover {
    color: color-mix(in srgb, var(--ej-legal-primary, #{$legal-primary-fallback}) 85%, #000000);
  }
}

// ---------------------------------------------------------------------------
// MODAL DE ACEPTACION TOS
// ---------------------------------------------------------------------------

.tos-status__modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: $legal-modal-z-index;
  background: color-mix(in srgb, #000000 50%, transparent);
  align-items: center;
  justify-content: center;

  &--active {
    display: flex;
  }
}

.tos-status__modal-content {
  background: var(--ej-color-surface, #FFFFFF);
  border-radius: $legal-card-radius;
  padding: 2rem;
  max-width: 600px;
  width: calc(100% - 2rem);
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 8px 32px color-mix(in srgb, #000000 20%, transparent);
}

.tos-status__modal-title {
  margin: 0 0 1rem;
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--ej-color-text-primary, #1F2937);
}

.tos-status__modal-body {
  margin-bottom: 1.5rem;
  max-height: 300px;
  overflow-y: auto;
  padding: 1rem;
  background: var(--ej-color-background, #F9FAFB);
  border: 1px solid var(--ej-color-border, #E5E7EB);
  border-radius: 6px;
  font-size: 0.875rem;
  line-height: 1.6;
}

.tos-status__modal-form {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.tos-status__modal-field {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.tos-status__modal-field label {
  font-size: 0.8125rem;
  font-weight: 500;
  color: var(--ej-color-text-primary, #1F2937);
}

.tos-status__modal-field input,
.tos-status__modal-field select {
  padding: 0.5rem 0.75rem;
  border: 1px solid var(--ej-color-border, #E5E7EB);
  border-radius: 6px;
  font-size: 0.875rem;
}

.tos-status__modal-checkbox {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.875rem;
}

.tos-status__modal-checkbox input[type='checkbox'] {
  width: 1rem;
  height: 1rem;
  accent-color: var(--ej-legal-primary, #{$legal-primary-fallback});
}

.tos-status__modal-actions {
  display: flex;
  justify-content: flex-end;
  gap: 0.75rem;
  margin-top: 1rem;
}

.tos-status__modal-error {
  padding: 0.75rem 1rem;
  border-radius: 6px;
  background: var(--ej-legal-danger-light, #{$legal-danger-light-fallback});
  color: var(--ej-legal-danger, #{$legal-danger-fallback});
  font-size: 0.8125rem;
  display: none;

  &--visible {
    display: block;
  }
}
