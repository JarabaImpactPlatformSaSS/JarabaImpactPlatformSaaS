{#
 # Template: JarabaLex - Planes Legales
 # Category: jarabalex
 # Type: pricing
 #
 # Header + grid de 3 pricing cards con nombre, precio, periodo, features y CTA
 # Premium: staggered animations, featured card highlight, jaraba_icon system
 # - Usa jaraba_icon(category, name, { variant, size, color }) para iconos
 #}
<section class="pb-section pb-section--pricing pb-section--jarabalex jaraba-block jaraba-block--premium"
         data-block-type="jarabalex_pricing"
         aria-label="{{ title|default('Planes Legales')|t }}"
         data-effect="fade-up">
  <div class="pb-section__container">
    <div class="pb-section__header">
      <span class="pb-section__eyebrow">{{ eyebrow|default('Planes')|t }}</span>
      <h2 class="pb-section__title">{{ title|default('Planes de asesoría jurídica a tu medida')|t }}</h2>
      <p class="pb-section__subtitle">{{ subtitle|default('Elige el nivel de servicio que mejor se adapte a las necesidades de tu empresa.')|t }}</p>
    </div>
    <div class="pb-section__pricing-grid">
      {% set default_plans = [
        { name: 'Consulta', price: '0€', period: '/primera sesión', featured: false, badge: '', cta: 'Reservar consulta', url: '/consulta-gratuita', features: ['Sesión de 30 minutos', 'Evaluación inicial', 'Orientación legal básica'] },
        { name: 'Pyme', price: '149€', period: '/mes', featured: true, badge: 'Más popular', cta: 'Contratar', url: '/planes/pyme', features: ['Asesoría mercantil y laboral', 'Revisión de contratos', 'Consultas ilimitadas', 'Soporte prioritario'] },
        { name: 'Corporativo', price: '499€', period: '/mes', featured: false, badge: '', cta: 'Contactar', url: '/planes/corporativo', features: ['Todo de Pyme', 'Litigios incluidos', 'Compliance integral', 'Abogado dedicado'] }
      ] %}
      {% set items = plans|default(default_plans) %}
      {% for plan in items %}
        <div class="pb-section__pricing-card {{ plan.featured ? 'pb-section__pricing-card--featured' : '' }}"
             data-effect="fade-up"
             data-delay="{{ loop.index0 * 100 }}">
          {% if plan.badge %}
            <span class="pb-section__pricing-badge">{{ plan.badge|t }}</span>
          {% endif %}
          <h3 class="pb-section__pricing-name">{{ plan.name|default('Plan')|t }}</h3>
          <div class="pb-section__pricing-price">
            <span class="pb-section__pricing-amount">{{ plan.price|default('0€') }}</span>
            <span class="pb-section__pricing-period">{{ plan.period|default('/mes') }}</span>
          </div>
          <ul class="pb-section__pricing-features">
            {% for feature in plan.features|default([]) %}
              <li>{{ feature|t }}</li>
            {% endfor %}
          </ul>
          <a href="{{ plan.url|default('#') }}" class="pb-section__cta {{ plan.featured ? 'pb-section__cta--primary' : 'pb-section__cta--secondary' }}">
            {{ plan.cta|default('Elegir plan')|t }}
          </a>
        </div>
      {% endfor %}
    </div>
  </div>
</section>
