{#
/**
 * @file
 * Template para el bloque Prueba Social.
 *
 * DIRECTRICES:
 * - Usa jaraba_icon(category, name, { variant, size, color }) para iconos
 * - Usa {% trans %} para textos de interfaz
 * - Usa var(--ej-*) v√≠a SCSS
 *
 * @ingroup jaraba_page_builder
 */
#}
{% set bg_class = content.background|default('light') %}
{% set layout = content.layout|default('inline') %}

<section class="jaraba-social-proof jaraba-social-proof--{{ bg_class }} jaraba-social-proof--{{ layout }} jaraba-block"
         data-block-type="trust_social_proof">
  <div class="jaraba-block__container">
    
    {% if content.title %}
      <h2 class="jaraba-social-proof__title">{{ content.title }}</h2>
    {% endif %}
    
    <div class="jaraba-social-proof__content">
      
      {# User avatars #}
      {% if content.avatars is not empty %}
        <div class="jaraba-social-proof__avatars">
          <div class="jaraba-social-proof__avatar-stack">
            {% for avatar in content.avatars|slice(0, 5) %}
              <img src="{{ avatar }}" 
                   alt="" 
                   class="jaraba-social-proof__avatar"
                   loading="lazy">
            {% endfor %}
          </div>
          {% if content.avatars_count %}
            <span class="jaraba-social-proof__avatars-text">{{ content.avatars_count }}</span>
          {% endif %}
        </div>
      {% endif %}
      
      {# Trust items #}
      {% if content.items is not empty %}
        <div class="jaraba-social-proof__items">
          {% for item in content.items %}
            <div class="jaraba-social-proof__item jaraba-social-proof__item--{{ item.type }}">
              {% if item.image %}
                <img src="{{ item.image }}" alt="{{ item.label }}" class="jaraba-social-proof__item-image">
              {% elseif item.icon %}
                {{ jaraba_icon('ui', item.icon, { variant: 'duotone', size: '24px', color: 'warning' }) }}
              {% elseif item.type == 'rating' %}
                <div class="jaraba-social-proof__stars">
                  {% for i in 1..5 %}
                    {{ jaraba_icon('ui', 'star', { variant: 'filled', size: '16px', color: 'warning' }) }}
                  {% endfor %}
                </div>
              {% endif %}
              <div class="jaraba-social-proof__item-text">
                <span class="jaraba-social-proof__item-value">{{ item.value }}</span>
                <span class="jaraba-social-proof__item-label">{{ item.label }}</span>
              </div>
            </div>
          {% endfor %}
        </div>
      {% endif %}
      
    </div>
    
  </div>
</section>
