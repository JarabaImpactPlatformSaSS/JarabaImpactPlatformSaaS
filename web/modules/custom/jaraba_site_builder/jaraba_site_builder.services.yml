services:
  jaraba_site_builder.structure:
    class: Drupal\jaraba_site_builder\Service\SiteStructureService
    arguments:
      - '@entity_type.manager'
      - '@database'
      - '@ecosistema_jaraba_core.tenant_context'
      - '@logger.channel.jaraba_site_builder'
      - '@jaraba_site_builder.redirect'

  jaraba_site_builder.redirect:
    class: Drupal\jaraba_site_builder\Service\RedirectService
    arguments:
      - '@entity_type.manager'
      - '@database'
      - '@logger.channel.jaraba_site_builder'

  jaraba_site_builder.sitemap:
    class: Drupal\jaraba_site_builder\Service\SitemapGeneratorService
    arguments:
      - '@jaraba_site_builder.structure'
      - '@entity_type.manager'
      - '@file_url_generator'
      - '@ecosistema_jaraba_core.tenant_context'

  jaraba_site_builder.access_check:
    class: Drupal\jaraba_site_builder\Access\SiteBuilderAccessCheck
    arguments:
      - '@current_user'
    tags:
      - { name: access_check, applies_to: _site_builder_access }

  # Sprint B1: Analíticas del dashboard premium.
  jaraba_site_builder.analytics:
    class: Drupal\jaraba_site_builder\Service\SiteAnalyticsService
    arguments:
      - '@entity_type.manager'
      - '@ecosistema_jaraba_core.tenant_context'
      - '@jaraba_site_builder.structure'
      - '@jaraba_site_builder.seo_auditor'

  # Sprint B2: Servicio de auditoría SEO.
  jaraba_site_builder.seo_auditor:
    class: Drupal\jaraba_site_builder\Service\SeoAuditorService
    arguments:
      - '@entity_type.manager'

  logger.channel.jaraba_site_builder:
    parent: logger.channel_base
    arguments: ['jaraba_site_builder']

  # Canvas v2 Full Page Editor - Servicios de Variantes
  jaraba_site_builder.header_variant:
    class: Drupal\jaraba_site_builder\Service\HeaderVariantService
    arguments:
      - '@entity_type.manager'
      - '@ecosistema_jaraba_core.tenant_context'
      - '@renderer'
      - '@jaraba_site_builder.structure'

  jaraba_site_builder.footer_variant:
    class: Drupal\jaraba_site_builder\Service\FooterVariantService
    arguments:
      - '@entity_type.manager'
      - '@ecosistema_jaraba_core.tenant_context'
      - '@renderer'
      - '@jaraba_site_builder.structure'

  # Fase 1 Doc 177: Sistema de Navegación Global
  jaraba_site_builder.menu:
    class: Drupal\jaraba_site_builder\Service\MenuService
    arguments:
      - '@entity_type.manager'
      - '@database'
      - '@ecosistema_jaraba_core.tenant_context'
      - '@logger.channel.jaraba_site_builder'

  jaraba_site_builder.navigation_render:
    class: Drupal\jaraba_site_builder\Service\NavigationRenderService
    arguments:
      - '@entity_type.manager'
      - '@ecosistema_jaraba_core.tenant_context'
      - '@jaraba_site_builder.menu'
      - '@file_url_generator'

  # =========================================================================
  # Fase 4 Doc 179: SEO/GEO Avanzado - 5 servicios
  # =========================================================================

  jaraba_site_builder.seo_manager:
    class: Drupal\jaraba_site_builder\Service\SeoManagerService
    arguments:
      - '@entity_type.manager'
      - '@ecosistema_jaraba_core.tenant_context'
      - '@jaraba_site_builder.seo_auditor'
      - '@logger.channel.jaraba_site_builder'

  jaraba_site_builder.schema_generator:
    class: Drupal\jaraba_site_builder\Service\SchemaGeneratorService
    arguments:
      - '@entity_type.manager'
      - '@ecosistema_jaraba_core.tenant_context'
      - '@logger.channel.jaraba_site_builder'

  jaraba_site_builder.hreflang_manager:
    class: Drupal\jaraba_site_builder\Service\HreflangManagerService
    arguments:
      - '@entity_type.manager'
      - '@ecosistema_jaraba_core.tenant_context'
      - '@language_manager'
      - '@logger.channel.jaraba_site_builder'

  jaraba_site_builder.geo_targeting:
    class: Drupal\jaraba_site_builder\Service\GeoTargetingService
    arguments:
      - '@entity_type.manager'
      - '@ecosistema_jaraba_core.tenant_context'
      - '@logger.channel.jaraba_site_builder'

  jaraba_site_builder.seo_ai_assistant:
    class: Drupal\jaraba_site_builder\Service\SeoAiAssistantService
    arguments:
      - '@ai.provider'
      - '@entity_type.manager'
      - '@ecosistema_jaraba_core.tenant_context'
      - '@logger.channel.jaraba_site_builder'
