# ğŸ—ï¸ DOCUMENTO MAESTRO DE ARQUITECTURA
## Jaraba Impact Platform SaaS v4.0

**Fecha:** 2026-02-15
**VersiÃ³n:** 28.0.0 (Emprendimiento v2 Paridad Empleabilidad â€” 7 Gaps Cerrados)
**Estado:** ProducciÃ³n (IONOS)
**Nivel de Madurez:** 4.9 / 5.0 (elevada tras resolver 23/65 hallazgos: 7 CrÃ­ticos + 8 Altos + 8 Medios)

---

## ğŸ“‘ Tabla de Contenidos

1. [VisiÃ³n del Proyecto](#1-visiÃ³n-del-proyecto)
2. [Propuesta de Valor](#2-propuesta-de-valor)
3. [Arquitectura de Alto Nivel](#3-arquitectura-de-alto-nivel)
4. [Stack TecnolÃ³gico](#4-stack-tecnolÃ³gico)
5. [Modelo Multi-Tenant](#5-modelo-multi-tenant)
6. [Modelo de Datos](#6-modelo-de-datos)
7. [MÃ³dulos del Sistema](#7-mÃ³dulos-del-sistema)
8. [Inteligencia Artificial](#8-inteligencia-artificial)
9. [Seguridad y Cumplimiento](#9-seguridad-y-cumplimiento)
10. [Infraestructura y DevOps](#10-infraestructura-y-devops)
11. [Roadmap](#11-roadmap)
12. [Estado de AuditorÃ­a (2026-02-13)](#12-estado-de-auditorÃ­a-2026-02-13)

---

## 1. VisiÃ³n del Proyecto

### 1.1 Â¿QuÃ© es Jaraba Impact Platform?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                         â”‚
â”‚   ğŸŒ± JARABA IMPACT PLATFORM                                             â”‚
â”‚                                                                         â”‚
â”‚   "La primera plataforma de comercio diseÃ±ada para que                  â”‚
â”‚    la Inteligencia Artificial venda tus productos"                      â”‚
â”‚                                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                                                                  â”‚  â”‚
â”‚   â”‚   Productores    â”€â”€â–¶    Plataforma    â”€â”€â–¶    Consumidores       â”‚  â”‚
â”‚   â”‚   Locales              AI-First            Conscientes          â”‚  â”‚
â”‚   â”‚                                                                  â”‚  â”‚
â”‚   â”‚   ğŸ§‘â€ğŸŒ¾ ğŸ«’ ğŸ· ğŸ§€        ğŸ¤– ğŸ’» ğŸ“Š           ğŸ‘¥ ğŸ›’ ğŸ’š              â”‚  â”‚
â”‚   â”‚                                                                  â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 Problema que Resuelve

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ANTES vs DESPUÃ‰S                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         ANTES              â”‚              DESPUÃ‰S                        â”‚
â”‚                            â”‚                                             â”‚
â”‚  âŒ Productores aislados   â”‚  âœ… Ecosistema conectado                    â”‚
â”‚  âŒ Sin presencia digital  â”‚  âœ… Tienda online + IA                      â”‚
â”‚  âŒ Marketing inexistente  â”‚  âœ… Agentes IA de marketing                 â”‚
â”‚  âŒ Sin trazabilidad       â”‚  âœ… Blockchain + certificados               â”‚
â”‚  âŒ Ventas limitadas       â”‚  âœ… GEO: IA vende por ti                    â”‚
â”‚  âŒ GestiÃ³n manual         â”‚  âœ… AutomatizaciÃ³n completa                 â”‚
â”‚                            â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Propuesta de Valor

### 2.1 Para Productores

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     BENEFICIOS PARA PRODUCTORES                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   ğŸ›’ TIENDA ONLINE                                                      â”‚
â”‚   â””â”€â”€ E-commerce completo sin conocimientos tÃ©cnicos                    â”‚
â”‚       â””â”€â”€ Drupal Commerce 3.x con pagos Stripe                          â”‚
â”‚                                                                         â”‚
â”‚   ğŸ¤– AGENTES IA                                                         â”‚
â”‚   â”œâ”€â”€ ğŸ“ Storytelling: Genera biografÃ­as y descripciones                â”‚
â”‚   â”œâ”€â”€ ğŸ“£ Marketing: CampaÃ±as automÃ¡ticas en redes sociales              â”‚
â”‚   â”œâ”€â”€ ğŸ’¬ Customer Experience: Recordatorios y upselling                 â”‚
â”‚   â””â”€â”€ ğŸ“Š Analytics: Insights de negocio                                 â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“œ CERTIFICACIÃ“N                                                      â”‚
â”‚   â”œâ”€â”€ Firma digital con FNMT/AutoFirma                                  â”‚
â”‚   â”œâ”€â”€ Trazabilidad desde origen                                         â”‚
â”‚   â””â”€â”€ Anclaje blockchain (opcional)                                     â”‚
â”‚                                                                         â”‚
â”‚   ğŸ¨ MARCA PROPIA                                                       â”‚
â”‚   â””â”€â”€ PersonalizaciÃ³n visual por productor/cooperativa                  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Para Consumidores

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     BENEFICIOS PARA CONSUMIDORES                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   ğŸ” TRANSPARENCIA                                                      â”‚
â”‚   â””â”€â”€ Conoce el origen exacto de cada producto                          â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“± TRAZABILIDAD                                                       â”‚
â”‚   â””â”€â”€ Escanea QR y ve todo el recorrido del producto                    â”‚
â”‚                                                                         â”‚
â”‚   ğŸŒ IMPACTO                                                            â”‚
â”‚   â””â”€â”€ Apoya directamente a productores locales                          â”‚
â”‚                                                                         â”‚
â”‚   ğŸ¤ CONFIANZA                                                          â”‚
â”‚   â””â”€â”€ Certificados digitales verificables                               â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 Estrategia GEO (Generative Engine Optimization)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              GEO                                         â”‚
â”‚           "OptimizaciÃ³n para Motores Generativos (IA)"                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   SEO Tradicional:                  GEO (Nuevo):                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚   â”‚   Google     â”‚                  â”‚   ChatGPT    â”‚                    â”‚
â”‚   â”‚   Ranking    â”‚                  â”‚   Perplexity â”‚                    â”‚
â”‚   â”‚   Keywords   â”‚                  â”‚   Claude     â”‚                    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚   Gemini     â”‚                    â”‚
â”‚                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                         â”‚
â”‚   Â¿CÃ³mo funciona GEO?                                                   â”‚
â”‚                                                                         â”‚
â”‚   Usuario: "Â¿DÃ³nde comprar aceite de oliva premium en JaÃ©n?"            â”‚
â”‚                        â”‚                                                â”‚
â”‚                        â–¼                                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ ChatGPT lee nuestra web (Answer Capsules + Schema.org)           â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                        â”‚                                                â”‚
â”‚                        â–¼                                                â”‚
â”‚   "Te recomiendo la Cooperativa de JaÃ©n en jarabaagroconecta.com,       â”‚
â”‚    tienen aceite virgen extra con certificaciÃ³n de origen..."          â”‚
â”‚                                                                         â”‚
â”‚   ğŸ¯ LA IA VENDE POR NOSOTROS                                           â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Arquitectura de Alto Nivel

### 3.1 Diagrama de Contexto (C4 Level 1)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DIAGRAMA DE CONTEXTO                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚                              USUARIOS                                    â”‚
â”‚                                                                         â”‚
â”‚        ğŸ‘¤              ğŸ‘¤              ğŸ‘¤              ğŸ‘¤               â”‚
â”‚    Administrador   Gestor Tenant   Productor       Cliente              â”‚
â”‚         â”‚               â”‚              â”‚               â”‚                â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                 â”‚                                       â”‚
â”‚                                 â–¼                                       â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚         â”‚                                               â”‚               â”‚
â”‚         â”‚      ğŸ¢ JARABA IMPACT PLATFORM                â”‚               â”‚
â”‚         â”‚         Drupal 11 + Commerce 3.x              â”‚               â”‚
â”‚         â”‚         Single-Instance Multi-Tenant          â”‚               â”‚
â”‚         â”‚                                               â”‚               â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                 â”‚                                       â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚         â–¼           â–¼          â–¼          â–¼           â–¼                 â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚    â”‚ ğŸ’³      â”‚ â”‚ ğŸ¤–      â”‚ â”‚ ğŸ“œ      â”‚ â”‚ ğŸ§       â”‚ â”‚ â›“ï¸      â”‚         â”‚
â”‚    â”‚ Stripe  â”‚ â”‚ OpenAI  â”‚ â”‚ FNMT    â”‚ â”‚ Qdrant  â”‚ â”‚ EBSI    â”‚         â”‚
â”‚    â”‚ Connect â”‚ â”‚ Claude  â”‚ â”‚ AutoFirmaâ”‚ â”‚ VectorDBâ”‚ â”‚ Blockchainâ”‚       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                         â”‚
â”‚                        SISTEMAS EXTERNOS                                 â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Diagrama de Contenedores (C4 Level 2)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DIAGRAMA DE CONTENEDORES                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                         FRONTEND                                    â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚â”‚
â”‚  â”‚  â”‚ ğŸ¨ Twig      â”‚  â”‚ ğŸ›’ Commerce  â”‚  â”‚ ğŸ’¬ Chat IA   â”‚              â”‚â”‚
â”‚  â”‚  â”‚ Templates    â”‚  â”‚ Storefront   â”‚  â”‚ Widget       â”‚              â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                    â”‚                                    â”‚
â”‚                                    â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                        BACKEND DRUPAL 11                            â”‚â”‚
â”‚  â”‚                                                                     â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚  â”‚  â”‚                    MÃ“DULOS CORE                               â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â”‚ecosistema_ â”‚ â”‚ jaraba_    â”‚ â”‚ jaraba_    â”‚ â”‚ jaraba_    â”‚ â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â”‚jaraba_core â”‚ â”‚ commerce   â”‚ â”‚ rag        â”‚ â”‚ social     â”‚ â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚  â”‚                                                                     â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚  â”‚  â”‚                    SERVICIOS                                  â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â”‚ Tenant     â”‚ â”‚ Plan       â”‚ â”‚ KB Indexer â”‚ â”‚ Agent      â”‚ â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â”‚ Manager    â”‚ â”‚ Validator  â”‚ â”‚ Service    â”‚ â”‚ Orchestratorâ”‚â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                    â”‚                                    â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚         â–¼                          â–¼                          â–¼        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ—„ï¸ MariaDB   â”‚          â”‚ ğŸ”´ Redis     â”‚          â”‚ ğŸ§  Qdrant    â”‚  â”‚
â”‚  â”‚ Database     â”‚          â”‚ Cache        â”‚          â”‚ VectorDB     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Stack TecnolÃ³gico

### 4.1 TecnologÃ­as Principales

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        STACK TECNOLÃ“GICO                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   BACKEND                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  Drupal 11.x      â”‚  PHP 8.4+         â”‚  Composer 2.x          â”‚  â”‚
â”‚   â”‚  CMS + Framework  â”‚  Lenguaje         â”‚  Dependencias          â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚   E-COMMERCE                                                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  Commerce 3.x     â”‚  Stripe Connect   â”‚  Product Bundles       â”‚  â”‚
â”‚   â”‚  Drupal Nativo    â”‚  Split Payments   â”‚  Variaciones           â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚   BASE DE DATOS                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  MariaDB 10.11    â”‚  Redis 7.x        â”‚  Qdrant 1.16           â”‚  â”‚
â”‚   â”‚  Relacional       â”‚  Cache/Queue      â”‚  Vector DB             â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚   INTELIGENCIA ARTIFICIAL                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  OpenAI           â”‚  Anthropic        â”‚  Google AI             â”‚  â”‚
â”‚   â”‚  GPT-4 / Embeddingsâ”‚  Claude          â”‚  Gemini                â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚   INFRAESTRUCTURA                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  IONOS (Prod)     â”‚  Lando (Dev)      â”‚  GitHub Actions        â”‚  â”‚
â”‚   â”‚  Hosting          â”‚  Local Docker     â”‚  CI/CD                 â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Modelo Multi-Tenant

### 5.1 JerarquÃ­a del Ecosistema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MODELO MULTI-TENANT                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚                    ğŸ¢ PLATAFORMA JARABA                                  â”‚
â”‚                    (Single-Instance Drupal)                              â”‚
â”‚                              â”‚                                          â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚          â–¼                  â–¼                  â–¼                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚ ğŸŒ¾ VERTICAL â”‚    â”‚ ğŸ“š VERTICALâ”‚    â”‚ ğŸ”ï¸ VERTICALâ”‚                   â”‚
â”‚   â”‚ AgroConectaâ”‚    â”‚ FormaTech  â”‚    â”‚ TurismoLocalâ”‚                  â”‚
â”‚   â”‚            â”‚    â”‚            â”‚    â”‚             â”‚                   â”‚
â”‚   â”‚ Productoresâ”‚    â”‚ FormaciÃ³n  â”‚    â”‚ Experienciasâ”‚                  â”‚
â”‚   â”‚ AgrÃ­colas  â”‚    â”‚ Online     â”‚    â”‚ TurÃ­sticas  â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚          â”‚                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚   â–¼                                 â–¼                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚   â”‚ ğŸ›ï¸ TENANT   â”‚            â”‚ ğŸ›ï¸ TENANT   â”‚                              â”‚
â”‚   â”‚ Cooperativaâ”‚            â”‚ D.O.       â”‚                              â”‚
â”‚   â”‚ JaÃ©n       â”‚            â”‚ La Mancha  â”‚                              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚          â”‚                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚   â–¼                                 â–¼                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚   â”‚ ğŸ§‘â€ğŸŒ¾ PRODUCTORâ”‚            â”‚ ğŸ§‘â€ğŸŒ¾ PRODUCTORâ”‚                              â”‚
â”‚   â”‚ Finca      â”‚            â”‚ Bodega     â”‚                              â”‚
â”‚   â”‚ El Olivo   â”‚            â”‚ La ViÃ±a    â”‚                              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 Aislamiento de Datos

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ESTRATEGIA DE AISLAMIENTO                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   Single-Instance + Group Module (NO multisite)                         â”‚
â”‚                                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                    BASE DE DATOS ÃšNICA                           â”‚  â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚  â”‚
â”‚   â”‚  â”‚ Tenant Aâ”‚  â”‚ Tenant Bâ”‚  â”‚ Tenant Câ”‚  â”‚ Shared  â”‚            â”‚  â”‚
â”‚   â”‚  â”‚ (Group) â”‚  â”‚ (Group) â”‚  â”‚ (Group) â”‚  â”‚ Config  â”‚            â”‚  â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚  â”‚
â”‚   â”‚       â†‘            â†‘            â†‘            â†‘                  â”‚  â”‚
â”‚   â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚  â”‚
â”‚   â”‚                         â”‚                                        â”‚  â”‚
â”‚   â”‚                  Group Content                                   â”‚  â”‚
â”‚   â”‚               (Aislamiento LÃ³gico)                               â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚   VENTAJAS:                                                             â”‚
â”‚   âœ… Efecto red: Queries cruzadas (matching talento â†” empresas)        â”‚
â”‚   âœ… Mantenimiento: 1 actualizaciÃ³n para todos                          â”‚
â”‚   âœ… Escalabilidad: Sin lÃ­mite de tenants                               â”‚
â”‚   âœ… Datos compartidos: TaxonomÃ­as, catÃ¡logos                          â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Modelo de Datos

### 6.1 Entidades Principales

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MODELO DE ENTIDADES                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                        VERTICAL                                  â”‚  â”‚
â”‚   â”‚  id, nombre, slug, descripciÃ³n, tema_base                        â”‚  â”‚
â”‚   â”‚  features[] (referencia a Feature Config Entity)                 â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                               â”‚ 1:N                                     â”‚
â”‚                               â–¼                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                         TENANT                                   â”‚  â”‚
â”‚   â”‚  id, nombre, dominio, vertical_id (FK)                           â”‚  â”‚
â”‚   â”‚  plan_id (FK â†’ SaasPlan), group_id, domain_id                    â”‚  â”‚
â”‚   â”‚  configuraciÃ³n (logo, colores, credenciales)                     â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                               â”‚ 1:N                                     â”‚
â”‚                               â–¼                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                       PRODUCTOR                                  â”‚  â”‚
â”‚   â”‚  id, nombre, email, telÃ©fono                                     â”‚  â”‚
â”‚   â”‚  tenant_id (FK), user_id (FK Drupal)                             â”‚  â”‚
â”‚   â”‚  estado (activo|suspendido|pendiente)                            â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                               â”‚ 1:N                                     â”‚
â”‚                               â–¼                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                     COMMERCE PRODUCT                             â”‚  â”‚
â”‚   â”‚  id, tÃ­tulo, descripciÃ³n, SKU                                    â”‚  â”‚
â”‚   â”‚  precio, stock, imÃ¡genes                                         â”‚  â”‚
â”‚   â”‚  productor_id (FK), categorÃ­as                                   â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                               â”‚ 1:N                                     â”‚
â”‚                               â–¼                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                          LOTE                                    â”‚  â”‚
â”‚   â”‚  id, cÃ³digo_trazabilidad, producto_id (FK)                       â”‚  â”‚
â”‚   â”‚  fecha_producciÃ³n, origen, hash_blockchain                       â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                               â”‚ 1:N                                     â”‚
â”‚                               â–¼                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                      CERTIFICADO                                 â”‚  â”‚
â”‚   â”‚  id, tipo, lote_id (FK), fecha_emisiÃ³n                           â”‚  â”‚
â”‚   â”‚  firma_digital, validez, documento_pdf                           â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 Planes SaaS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PLANES SAAS                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚   â”‚    BÃSICO      â”‚  PROFESIONAL   â”‚   ENTERPRISE   â”‚                 â”‚
â”‚   â”‚    â‚¬49/mes     â”‚    â‚¬149/mes    â”‚    â‚¬499/mes    â”‚                 â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
â”‚   â”‚                â”‚                â”‚                â”‚                 â”‚
â”‚   â”‚ 10 productores â”‚ 50 productores â”‚ âˆ productores  â”‚                 â”‚
â”‚   â”‚ 5 GB storage   â”‚ 25 GB storage  â”‚ 100 GB storage â”‚                 â”‚
â”‚   â”‚ 1 dominio      â”‚ 3 dominios     â”‚ âˆ dominios     â”‚                 â”‚
â”‚   â”‚                â”‚                â”‚                â”‚                 â”‚
â”‚   â”‚ âŒ Agentes IA  â”‚ âœ… Agentes IA  â”‚ âœ… Agentes IA  â”‚                 â”‚
â”‚   â”‚ âŒ Firma FNMT  â”‚ âœ… Firma FNMT  â”‚ âœ… Firma FNMT  â”‚                 â”‚
â”‚   â”‚ âŒ Blockchain  â”‚ âŒ Blockchain  â”‚ âœ… Blockchain  â”‚                 â”‚
â”‚   â”‚ âŒ White-label â”‚ âŒ White-label â”‚ âœ… White-label â”‚                 â”‚
â”‚   â”‚                â”‚                â”‚                â”‚                 â”‚
â”‚   â”‚ SLA: 99.5%     â”‚ SLA: 99.9%     â”‚ SLA: 99.95%    â”‚                 â”‚
â”‚   â”‚ Soporte: Email â”‚ Soporte: Chat  â”‚ Soporte: 24/7  â”‚                 â”‚
â”‚   â”‚                â”‚                â”‚                â”‚                 â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. MÃ³dulos del Sistema

### 7.1 MÃ³dulos Custom

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MÃ“DULOS CUSTOM                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   ğŸ“¦ ecosistema_jaraba_core (120+ archivos)                             â”‚
â”‚   â”œâ”€â”€ Entidades: Vertical, SaasPlan, Tenant, AIAgent, Feature           â”‚
â”‚   â”œâ”€â”€ Servicios Core: TenantManager, PlanValidator, OnboardingService   â”‚
â”‚   â”œâ”€â”€ Servicios Q1 2027 (12 nuevos):                                    â”‚
â”‚   â”‚   â”œâ”€â”€ ReverseTrialService - Reverse Trial + downgrade automÃ¡tico   â”‚
â”‚   â”‚   â”œâ”€â”€ AgentAutonomyService - 4 niveles autonomÃ­a agentes IA        â”‚
â”‚   â”‚   â”œâ”€â”€ ContextualCopilotService - Copilot contextual embebido       â”‚
â”‚   â”‚   â”œâ”€â”€ MicroAutomationService - Auto-tagging, smart sorting         â”‚
â”‚   â”‚   â”œâ”€â”€ AICostOptimizationService - FinOps IA, model routing         â”‚
â”‚   â”‚   â”œâ”€â”€ ExpansionRevenueService - PQA scoring, NRR tracking          â”‚
â”‚   â”‚   â”œâ”€â”€ VideoGeoService - Video Schema.org, YouTube SEO              â”‚
â”‚   â”‚   â”œâ”€â”€ MultilingualGeoService - hreflang, Answer Capsules           â”‚
â”‚   â”‚   â””â”€â”€ SandboxTenantService - Demo pre-registro temporal            â”‚
â”‚   â”œâ”€â”€ Controllers: ApiController, CopilotController, SandboxController â”‚
â”‚   â”œâ”€â”€ API REST: OpenAPI 3.0, Swagger UI, 25+ endpoints                  â”‚
â”‚   â”œâ”€â”€ PWA: manifest.json, sw.js (offline-first), push notifications    â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (Q1 2027)                                   â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_commerce                                                    â”‚
â”‚   â”œâ”€â”€ IntegraciÃ³n Drupal Commerce 3.x                                   â”‚
â”‚   â”œâ”€â”€ Stripe Connect split payments                                     â”‚
â”‚   â”œâ”€â”€ Product display optimizado GEO                                    â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n                                             â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_rag                                                         â”‚
â”‚   â”œâ”€â”€ Knowledge Base AI-Nativa                                          â”‚
â”‚   â”œâ”€â”€ QdrantDirectClient (Vector DB)                                    â”‚
â”‚   â”œâ”€â”€ KbIndexerService (Embeddings)                                     â”‚
â”‚   â”œâ”€â”€ IndexaciÃ³n automÃ¡tica de productos                                â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (v5.1)                                      â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_tenant_knowledge âœ… (Knowledge Training + Help Center)       â”‚
â”‚   â”œâ”€â”€ Entrenamiento KB del Tenant: FAQs, PolÃ­ticas, Documentos          â”‚
â”‚   â”œâ”€â”€ Centro de Ayuda PÃºblico: /ayuda (G114)                            â”‚
â”‚   â”‚   â”œâ”€â”€ G114-1: Landing categorÃ­as + bÃºsqueda + artÃ­culos populares  â”‚
â”‚   â”‚   â”œâ”€â”€ G114-2: Versionado con diff visual para FAQs/PolÃ­ticas       â”‚
â”‚   â”‚   â”œâ”€â”€ G114-3: Soporte multilingÃ¼e                                   â”‚
â”‚   â”‚   â””â”€â”€ G114-4: FAQ Bot Contextual (chat widget pÃºblico)              â”‚
â”‚   â”œâ”€â”€ FaqBotService: embedding â†’ Qdrant â†’ LLM grounded â†’ escalaciÃ³n    â”‚
â”‚   â”‚   â””â”€â”€ 3-tier scoring: â‰¥0.75 grounded, 0.55-0.75 low, <0.55 escala â”‚
â”‚   â”œâ”€â”€ API: POST /api/v1/help/chat (pÃºblico, rate limited 10/min/IP)    â”‚
â”‚   â”œâ”€â”€ KnowledgeIndexerService: IndexaciÃ³n automÃ¡tica en Qdrant          â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (G114 completo, 4/4 gaps cerrados)          â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_social_commerce                                             â”‚
â”‚   â”œâ”€â”€ IntegraciÃ³n Make.com                                              â”‚
â”‚   â”œâ”€â”€ Facebook, Instagram, TikTok, Pinterest                            â”‚
â”‚   â””â”€â”€ Estado: ğŸ”„ Desarrollo                                             â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_agroconecta_core âœ… (Vertical AgroConecta + Copilots)        â”‚
â”‚   â”œâ”€â”€ 20 Content Entities, 6 Controllers, 17 Services, 15 Forms        â”‚
â”‚   â”œâ”€â”€ Fases 1-3: Commerce Core + Orders + Producer/Customer Portal     â”‚
â”‚   â”œâ”€â”€ Sprint AC6-1: QR Dashboard (QrService, qr-dashboard.js)          â”‚
â”‚   â”œâ”€â”€ Sprint AC6-2: Partner Document Hub B2B (Doc 82)                  â”‚
â”‚   â”‚   â”œâ”€â”€ PartnerRelationship + ProductDocument + DocumentDownloadLog  â”‚
â”‚   â”‚   â”œâ”€â”€ PartnerDocumentService: 12+ mÃ©todos (CRUD, magic link, CSV)  â”‚
â”‚   â”‚   â”œâ”€â”€ 17 API endpoints: 9 productor + 8 portal pÃºblico (token)     â”‚
â”‚   â”‚   â””â”€â”€ Frontend: _partner-hub.scss, partner-hub.js, 2 Twig          â”‚
â”‚   â”œâ”€â”€ Fase 9: Producer Copilot (Doc 67)                                â”‚
â”‚   â”‚   â”œâ”€â”€ DemandForecasterService: PredicciÃ³n demanda histÃ³rico+season â”‚
â”‚   â”‚   â”œâ”€â”€ MarketSpyService: Inteligencia competitiva                   â”‚
â”‚   â”‚   â””â”€â”€ CopilotConversationInterface + CopilotMessageInterface       â”‚
â”‚   â”œâ”€â”€ Fase 10: Sales Agent (Doc 68)                                    â”‚
â”‚   â”‚   â”œâ”€â”€ CrossSellEngine: Motor venta cruzada por categorÃ­a           â”‚
â”‚   â”‚   â”œâ”€â”€ CartRecoveryService: Secuencia recuperaciÃ³n (1h/24h/72h/7d)  â”‚
â”‚   â”‚   â”œâ”€â”€ WhatsAppApiService: WhatsApp Business API webhooks           â”‚
â”‚   â”‚   â””â”€â”€ SalesAgentService: IntegraciÃ³n con jaraba_ai_agents          â”‚
â”‚   â”œâ”€â”€ PatrÃ³n: Clean Twig pages + var(--ej-*) + hook_preprocess_html    â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (Copilots completados, ~900h total)        â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_agroconecta_traceability ğŸ“‹                                 â”‚
â”‚   â”œâ”€â”€ Entidades: AgroBatch, TraceEvent, TraceCertificate, AgroQR       â”‚
â”‚   â”œâ”€â”€ Hash Anchoring: SHA-256 â†’ OpenTimestamps/Polygon                  â”‚
â”‚   â”œâ”€â”€ QR DinÃ¡mico: Analytics + lead capture                             â”‚
â”‚   â””â”€â”€ Estado: ğŸ“‹ Planificado (Fase 5)                                   â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_agroconecta_ai âœ… (Completado en core + ai_agents)           â”‚
â”‚   â”œâ”€â”€ Producer Copilot: SEO, pricing, stock alerts, market spy          â”‚
â”‚   â”‚   â””â”€â”€ Implementado en jaraba_agroconecta_core (Fase 9)             â”‚
â”‚   â”œâ”€â”€ Sales Agent: WhatsApp/Web, recommendations, abandoned cart        â”‚
â”‚   â”‚   â””â”€â”€ Implementado en jaraba_agroconecta_core + ai_agents (Fase 10)â”‚
â”‚   â”œâ”€â”€ RAG: CopilotConversationInterface, CopilotMessageInterface       â”‚
â”‚   â”‚   â””â”€â”€ Interfaces unificadas en ecosistema_jaraba_core              â”‚
â”‚   â””â”€â”€ Estado: âœ… Completado (Fases 9-10 en mÃ³dulos existentes)          â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_servicios_conecta âœ… (Vertical ServiciosConecta)              â”‚
â”‚   â”œâ”€â”€ 5 Content Entities, 3 Controllers, 4 Services, 2 TaxonomÃ­as     â”‚
â”‚   â”œâ”€â”€ Fase 1: Marketplace + Provider Portal + Booking Engine           â”‚
â”‚   â”‚   â”œâ”€â”€ ProviderProfile, ServiceOffering, Booking                    â”‚
â”‚   â”‚   â”œâ”€â”€ AvailabilitySlot, ServicePackage                             â”‚
â”‚   â”‚   â””â”€â”€ TaxonomÃ­as: servicios_category, servicios_modality           â”‚
â”‚   â”œâ”€â”€ Frontend: 4 SCSS partials + Twig templates (Dart Sass @use)      â”‚
â”‚   â”œâ”€â”€ PatrÃ³n: Clean Twig pages + var(--ej-*) + hook_preprocess_html    â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (Fase 1, ~40h)                             â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_foc                                                          â”‚
â”‚   â”œâ”€â”€ Centro de Operaciones Financieras (FOC)                           â”‚
â”‚   â”œâ”€â”€ Entidades: FinancialTransaction, CostAllocation, MetricSnapshot  â”‚
â”‚   â”œâ”€â”€ Stripe Connect: Destination Charges + Application Fee            â”‚
â”‚   â”œâ”€â”€ Motor FinOps: MÃ©tricas SaaS 2.0 + Triple Motor EconÃ³mico          â”‚
â”‚   â”œâ”€â”€ ETL: Webhooks Stripe + ActiveCampaign + Make.com                  â”‚
â”‚   â”œâ”€â”€ Alertas: Sistema ECA con Playbooks automatizados                  â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n                                             â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_billing (Clase Mundial v7.0.0)                               â”‚
â”‚   â”œâ”€â”€ Ciclo completo de billing SaaS â€” 15 gaps cerrados                â”‚
â”‚   â”œâ”€â”€ Entidades: BillingInvoice (+6 campos fiscales),                  â”‚
â”‚   â”‚   BillingUsageRecord (+5 campos sync), BillingPaymentMethod,       â”‚
â”‚   â”‚   BillingCustomer (tenantâ†”Stripe), TenantAddon (add-ons activos)  â”‚
â”‚   â”œâ”€â”€ Servicios locales: PlanValidator (+soporte add-ons),             â”‚
â”‚   â”‚   TenantSubscriptionService, TenantMeteringService,               â”‚
â”‚   â”‚   PricingRuleEngine, ReverseTrialService,                          â”‚
â”‚   â”‚   ExpansionRevenueService, ImpactCreditService, SyntheticCfoServiceâ”‚
â”‚   â”œâ”€â”€ Servicios nuevos: DunningService (6 pasos cobro),               â”‚
â”‚   â”‚   FeatureAccessService (plan+addons verificacion)                  â”‚
â”‚   â”œâ”€â”€ Stripe API: StripeCustomerService (+sync BillingCustomer),       â”‚
â”‚   â”‚   StripeSubscriptionService, StripeInvoiceService                  â”‚
â”‚   â”‚   (+campos fiscales, +flushUsageToStripe)                          â”‚
â”‚   â”‚   (via jaraba_foc StripeConnectService)                            â”‚
â”‚   â”œâ”€â”€ API REST: BillingApiController (13 endpoints),                   â”‚
â”‚   â”‚   UsageBillingApiController (7 endpoints),                         â”‚
â”‚   â”‚   AddonApiController (6 endpoints) = 26 endpoints total            â”‚
â”‚   â”œâ”€â”€ Webhook: BillingWebhookController (10 eventos Stripe)            â”‚
â”‚   â”œâ”€â”€ Permisos: administer billing, view invoices,                     â”‚
â”‚   â”‚   manage payment methods, manage billing customers,                â”‚
â”‚   â”‚   manage tenant addons, view billing dunning, view billing usage   â”‚
â”‚   â”œâ”€â”€ Tests: 88 tests, 304 assertions (Unit)                          â”‚
â”‚   â”œâ”€â”€ CatÃ¡logo Stripe: 5 productos Ã— 4 tiers Ã— 2 intervalos = 40 preciosâ”‚
â”‚   â”‚   â””â”€â”€ Lookup keys, comisiones marketplace (agroconecta 8%...)       â”‚
â”‚   â””â”€â”€ Estado: âœ… Clase Mundial                                          â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ ecosistema_jaraba_core â€” Security & Compliance (G115-1) âœ…         â”‚
â”‚   â”œâ”€â”€ AuditLog Entity: Inmutable, campos severity/event_type/actor/IP  â”‚
â”‚   â”œâ”€â”€ AuditLogService: Logging centralizado de eventos de seguridad    â”‚
â”‚   â”œâ”€â”€ ComplianceDashboardController: /admin/seguridad                  â”‚
â”‚   â”‚   â”œâ”€â”€ 25+ controles evaluados en tiempo real                       â”‚
â”‚   â”‚   â”œâ”€â”€ SOC 2 Type II + ISO 27001:2022 + ENS RD 311/2022 + GDPR     â”‚
â”‚   â”‚   â””â”€â”€ Security headers, audit events, stats agregados              â”‚
â”‚   â”œâ”€â”€ GDPR Drush Commands: gdpr:export, gdpr:anonymize, gdpr:report   â”‚
â”‚   â”œâ”€â”€ Frontend: compliance-dashboard.css/js + Twig template            â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (Feb 2026)                                  â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_analytics â€” Advanced Analytics (Cohort + Funnel) âœ…         â”‚
â”‚   â”œâ”€â”€ CohortDefinition Entity: Cohortes por fecha, compra, vertical    â”‚
â”‚   â”œâ”€â”€ FunnelDefinition Entity: Embudos configurables con pasos JSON    â”‚
â”‚   â”œâ”€â”€ CohortAnalysisService: Curva retenciÃ³n semanal, comparaciones    â”‚
â”‚   â”œâ”€â”€ FunnelTrackingService: ConversiÃ³n por pasos, ventana temporal    â”‚
â”‚   â”œâ”€â”€ API REST: /api/v1/analytics/cohorts/*, /api/v1/analytics/funnels/*â”‚
â”‚   â”œâ”€â”€ Frontend: heatmap retenciÃ³n, visualizaciÃ³n funnel, export CSV    â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (Feb 2026)                                  â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ ecosistema_jaraba_core â€” Avatar Detection + Navigation âœ…           â”‚
â”‚   â”œâ”€â”€ AvatarDetectionService: Cascada 4 niveles                        â”‚
â”‚   â”‚   â”œâ”€â”€ Nivel 1: Domain (3 dominios mapeados)                        â”‚
â”‚   â”‚   â”œâ”€â”€ Nivel 2: Path/UTM (5 paths + 3 campaÃ±as)                    â”‚
â”‚   â”‚   â”œâ”€â”€ Nivel 3: Group (membresÃ­a de grupo del usuario)              â”‚
â”‚   â”‚   â””â”€â”€ Nivel 4: Rol (ROLE_TO_AVATAR del usuario autenticado)        â”‚
â”‚   â”œâ”€â”€ ValueObject: AvatarDetectionResult (inmutable)                   â”‚
â”‚   â”‚   â””â”€â”€ avatarType, vertical, detectionSource, programaOrigen, confidence â”‚
â”‚   â”œâ”€â”€ AvatarNavigationService: Nav contextual 10 avatares (f-103)      â”‚
â”‚   â”‚   â”œâ”€â”€ getNavigationItems(): items con URL, icono, active state     â”‚
â”‚   â”‚   â”œâ”€â”€ getAvatar(): tipo avatar actual                              â”‚
â”‚   â”‚   â”œâ”€â”€ getAvatarLabel(): etiqueta traducible                        â”‚
â”‚   â”‚   â””â”€â”€ Resolucion segura URLs (try/catch modulos opcionales)        â”‚
â”‚   â”œâ”€â”€ DashboardRedirectController: /dashboard â†’ redirect por avatar    â”‚
â”‚   â”œâ”€â”€ Frontend: _avatar-nav.html.twig (bottom nav mobile + barra desktop)â”‚
â”‚   â”‚   â”œâ”€â”€ SCSS BEM: .avatar-nav / __badge / __list / __link / --active â”‚
â”‚   â”‚   â”œâ”€â”€ Body class: .has-avatar-nav (padding-bottom mobile)          â”‚
â”‚   â”‚   â””â”€â”€ Theme Setting: enable_avatar_nav (toggle configurable)       â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (Feb 2026)                                  â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ ecosistema_jaraba_core â€” Empleabilidad Services âœ… (ElevaciÃ³n 10F) â”‚
â”‚   â”œâ”€â”€ EmployabilityFeatureGateService (Fase 4): Escalera de valor       â”‚
â”‚   â”‚   â”œâ”€â”€ 3 features: job_applications (5/dÃ­a), job_alerts (3),         â”‚
â”‚   â”‚   â”‚   copilot_messages (10/dÃ­a) â€” planes FREE/STARTER/PROFESIONAL   â”‚
â”‚   â”‚   â””â”€â”€ FeatureGateResult ValueObject (allowed, remaining, limit)     â”‚
â”‚   â”œâ”€â”€ EmployabilityEmailSequenceService (Fase 6): 5 secuencias          â”‚
â”‚   â”‚   â”œâ”€â”€ SEQ_EMP_001 Onboarding, SEQ_EMP_002 Re-engagement            â”‚
â”‚   â”‚   â”œâ”€â”€ SEQ_EMP_003 Upsell, SEQ_EMP_004 Post-Interview               â”‚
â”‚   â”‚   â””â”€â”€ SEQ_EMP_005 Post-Hire + 5 MJML templates registrados         â”‚
â”‚   â”œâ”€â”€ EmployabilityCrossVerticalBridgeService (Fase 8): 4 bridges       â”‚
â”‚   â”‚   â”œâ”€â”€ emprendimiento (90d inactivo), servicios (freelance skills)   â”‚
â”‚   â”‚   â”œâ”€â”€ formaciÃ³n (recently_hired), comercio (verified_employer)      â”‚
â”‚   â”‚   â””â”€â”€ evaluateBridges() max 2 + dismiss tracking State API          â”‚
â”‚   â”œâ”€â”€ EmployabilityJourneyProgressionService (Fase 9): 7 reglas         â”‚
â”‚   â”‚   â”œâ”€â”€ inactivity_discovery, incomplete_profile, ready_but_inactive  â”‚
â”‚   â”‚   â”œâ”€â”€ application_frustration, interview_prep, offer_negotiation    â”‚
â”‚   â”‚   â””â”€â”€ post_employment_expansion + FAB dot/auto-expand + polling 5m  â”‚
â”‚   â”œâ”€â”€ EmployabilityHealthScoreService (Fase 10): 5 dimensiones          â”‚
â”‚   â”‚   â”œâ”€â”€ profile_completeness 25%, application_activity 30%            â”‚
â”‚   â”‚   â”œâ”€â”€ copilot_engagement 15%, training_progress 15%                 â”‚
â”‚   â”‚   â”œâ”€â”€ credential_advancement 15% â†’ score 0-100 + categorÃ­a          â”‚
â”‚   â”‚   â””â”€â”€ 8 KPIs: insertion_rate, time_to_employment, NPS, ARPU, etc.  â”‚
â”‚   â””â”€â”€ Estado: âœ… Clase Mundial (Feb 2026 â€” ElevaciÃ³n 10/10 Fases)       â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_diagnostic âœ… (DiagnÃ³stico Express Empleabilidad)            â”‚
â”‚   â”œâ”€â”€ EmployabilityDiagnostic Entity: 14 campos                       â”‚
â”‚   â”‚   â”œâ”€â”€ q_linkedin, q_cv_ats, q_estrategia, score, profile_type     â”‚
â”‚   â”‚   â”œâ”€â”€ primary_gap, anonymous_token, email_remarketing              â”‚
â”‚   â”‚   â””â”€â”€ avatar_confirmed, EntityOwnerInterface, EntityChangedInterface â”‚
â”‚   â”œâ”€â”€ EmployabilityScoringService: Pesos LinkedIn 40%/CV 35%/Estrategia 25% â”‚
â”‚   â”‚   â””â”€â”€ 5 perfiles: Invisible (<2), Desconectado (<4), En ConstrucciÃ³n (<6), â”‚
â”‚   â”‚       Competitivo (<8), MagnÃ©tico (â‰¥8)                             â”‚
â”‚   â”œâ”€â”€ EmployabilityDiagnosticController: 3 rutas /empleabilidad/diagnostico â”‚
â”‚   â”œâ”€â”€ Frontend: Wizard 3 pasos (JS) + Score Ring (SVG) + CSS compilado â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (Feb 2026)                                  â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_candidate âœ… (Copilot Empleabilidad + Perfil Candidato)       â”‚
â”‚   â”œâ”€â”€ EmployabilityCopilotAgent: 6 modos especializados               â”‚
â”‚   â”‚   â”œâ”€â”€ Profile Coach, Job Advisor, Interview Prep                   â”‚
â”‚   â”‚   â”œâ”€â”€ Learning Guide, Application Helper, FAQ                      â”‚
â”‚   â”‚   â”œâ”€â”€ DetecciÃ³n automÃ¡tica modo por keywords                       â”‚
â”‚   â”‚   â””â”€â”€ getSoftSuggestion(): upsell contextual por fase journey      â”‚
â”‚   â”œâ”€â”€ CopilotApiController:                                            â”‚
â”‚   â”‚   â”œâ”€â”€ POST /api/v1/copilot/employability/chat                      â”‚
â”‚   â”‚   â”œâ”€â”€ GET /suggestions (chips contextuales por pÃ¡gina)             â”‚
â”‚   â”‚   â””â”€â”€ GET|POST /api/v1/copilot/employability/proactive (Fase 9)   â”‚
â”‚   â”œâ”€â”€ Content Entities:                                                â”‚
â”‚   â”‚   â”œâ”€â”€ CandidateProfile: perfil profesional completo                â”‚
â”‚   â”‚   â”œâ”€â”€ CandidateSkill: skills con nivel + aÃ±os experiencia          â”‚
â”‚   â”‚   â””â”€â”€ CandidateLanguage: idiomas CEFR (A1-C2), 4 competencias     â”‚
â”‚   â”‚       (reading/writing/speaking/listening), certificaciones,       â”‚
â”‚   â”‚       is_native, source (manual/linkedin/cv_parser)                â”‚
â”‚   â”œâ”€â”€ Services: CandidateProfileService, CvBuilderService (+gate),     â”‚
â”‚   â”‚   ApplicationService (+gate +CRM +email enrollment)                â”‚
â”‚   â”œâ”€â”€ Frontend: modal-actions library, data-dialog-type="modal" CRUD,  â”‚
â”‚   â”‚   agent-fab.js (proactive polling 5min + FAB dot/auto-expand)      â”‚
â”‚   â”œâ”€â”€ DI: @ai.provider, @config.factory, @jaraba_ai_agents.tenant_brand_voice â”‚
â”‚   â”‚   â””â”€â”€ @jaraba_ai_agents.observability, @ecosistema_jaraba_core.unified_prompt_builder â”‚
â”‚   â””â”€â”€ Estado: âœ… Clase Mundial (Feb 2026 â€” ElevaciÃ³n 10/10 Fases)                                  â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_job_board âœ… (Bolsa de Empleo + Matching + CRM Pipeline)      â”‚
â”‚   â”œâ”€â”€ Content Entities:                                                â”‚
â”‚   â”‚   â”œâ”€â”€ JobPosting, JobApplication, JobAlert                         â”‚
â”‚   â”‚   â””â”€â”€ EmployerProfile: perfil empresa (company_name, legal_name,   â”‚
â”‚   â”‚       tax_id, industry taxonomy, company_size, logo, contact,      â”‚
â”‚   â”‚       is_verified, is_featured, tenant_id)                         â”‚
â”‚   â”œâ”€â”€ Services: MatchingService (experience/education/city entity      â”‚
â”‚   â”‚   queries), ApplicationService, JobPostingService, JobAlertService â”‚
â”‚   â”œâ”€â”€ CRM Integration (Fase 7): _sync_to_crm() mapea 7 estados        â”‚
â”‚   â”‚   (appliedâ†’lead, screeningâ†’mql, shortlistedâ†’sql, interviewedâ†’demo,â”‚
â”‚   â”‚   offeredâ†’proposal, hiredâ†’closed_won, rejectedâ†’closed_lost),       â”‚
â”‚   â”‚   _ensure_crm_contact() por email, keyValue store crm_sync         â”‚
â”‚   â”œâ”€â”€ Upgrade Triggers (Fase 5): status_change + first_milestone en    â”‚
â”‚   â”‚   shortlisted/hired transitions                                     â”‚
â”‚   â”œâ”€â”€ Email Enrollment (Fase 6): SEQ_EMP_004 interview + SEQ_EMP_005   â”‚
â”‚   â”‚   hired en _handle_application_update()                             â”‚
â”‚   â”œâ”€â”€ Controllers: JobSearchController, JobBoardApiController,          â”‚
â”‚   â”‚   agent-fab.js (rating POST /api/v1/job-board/agent-rating)        â”‚
â”‚   â””â”€â”€ Estado: âœ… Clase Mundial (Feb 2026 â€” ElevaciÃ³n 10/10 Fases)                                  â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_self_discovery âœ… (Self-Discovery Empleabilidad)               â”‚
â”‚   â”œâ”€â”€ Herramientas autoconocimiento: Rueda de Vida, Timeline, RIASEC,  â”‚
â”‚   â”‚   Fortalezas VIA                                                     â”‚
â”‚   â”œâ”€â”€ 4 Content Entities:                                                â”‚
â”‚   â”‚   â”œâ”€â”€ LifeWheelAssessment: 8 Ã¡reas, scores 1-10, trend              â”‚
â”‚   â”‚   â”œâ”€â”€ LifeTimeline: Eventos vitales, Phase 2/3 (factores, skills)   â”‚
â”‚   â”‚   â”œâ”€â”€ InterestProfile (RIASEC): 6 scores 0-100, riasec_code 3ch,   â”‚
â”‚   â”‚   â”‚   dominant_types JSON, suggested_careers JSON                    â”‚
â”‚   â”‚   â””â”€â”€ StrengthAssessment (VIA): top_strengths JSON (top 5),         â”‚
â”‚   â”‚       all_scores JSON (24 fortalezas), answers JSON                  â”‚
â”‚   â”œâ”€â”€ 4 Servicios Dedicados:                                             â”‚
â”‚   â”‚   â”œâ”€â”€ LifeWheelService: average, lowest/highest areas, trend         â”‚
â”‚   â”‚   â”œâ”€â”€ TimelineAnalysisService: patterns, top skills/values           â”‚
â”‚   â”‚   â”œâ”€â”€ RiasecService: profile, code, scores (fallback user.data)     â”‚
â”‚   â”‚   â””â”€â”€ StrengthAnalysisService: top5, catalog (fallback user.data)   â”‚
â”‚   â”œâ”€â”€ SelfDiscoveryContextService: Agregador para Copilot v2 context    â”‚
â”‚   â”‚   â””â”€â”€ Delega a 4 servicios (DI nullable) + fallback directo         â”‚
â”‚   â”œâ”€â”€ Forms: InterestsAssessmentForm (36 qs), StrengthsAssessmentForm   â”‚
â”‚   â”‚   (20 pares), TimelinePhase2Form, TimelinePhase3Form                â”‚
â”‚   â”œâ”€â”€ Admin: /admin/content tabs + /admin/structure links                â”‚
â”‚   â”œâ”€â”€ Tests: 5 unit test files (38 test methods)                        â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (Specs 20260122-25 100%)                     â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_business_tools (Vertical Emprendimiento)                     â”‚
â”‚   â”œâ”€â”€ Entidades: BusinessModelCanvas (9 bloques)                        â”‚
â”‚   â”œâ”€â”€ CanvasAiService: Sugerencias IA por sector (7 sectores)           â”‚
â”‚   â”œâ”€â”€ PDF Export: jsPDF con branding personalizado                       â”‚
â”‚   â”œâ”€â”€ Drag-Drop: SortableJS para reordenar elementos                    â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n                                              â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_mentoring                                                    â”‚
â”‚   â”œâ”€â”€ Entidades: MentorProfile, MentoringPackage, MentoringEngagement   â”‚
â”‚   â”œâ”€â”€ Stripe Connect: Pagos a mentores con split                         â”‚
â”‚   â”œâ”€â”€ Calendario: FullCalendar para disponibilidad                       â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n                                              â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_paths                                                        â”‚
â”‚   â”œâ”€â”€ Entidades: DigitalizationPath, PathMilestone                       â”‚
â”‚   â”œâ”€â”€ CatÃ¡logo: Itinerarios de digitalizaciÃ³n por sector                  â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n                                              â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_groups                                                       â”‚
â”‚   â”œâ”€â”€ Entidades: CollaborationGroup, GroupDiscussion                     â”‚
â”‚   â”œâ”€â”€ CÃ­rculos de Responsabilidad: Grupos de 3 emprendedores             â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n                                              â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_copilot_v2 âœ… (Clase Mundial â€” Specs 20260121a-e 100% + Gaps) â”‚
â”‚   â”œâ”€â”€ Copiloto IA Emprendimiento: 7 modos adaptativos                    â”‚
â”‚   â”‚   â””â”€â”€ coach, consultor, sparring, cfo, fiscal, laboral, devil        â”‚
â”‚   â”œâ”€â”€ 22 API Endpoints REST:                                             â”‚
â”‚   â”‚   â”œâ”€â”€ Hypothesis: CRUD + Prioritize ICE (5 endpoints)                â”‚
â”‚   â”‚   â”œâ”€â”€ Experiment: Lifecycle Testâ†’Startâ†’Learning Card (5 endpoints)   â”‚
â”‚   â”‚   â”œâ”€â”€ BMC Validation: SemÃ¡foros 9 bloques + Pivot Log (2 endpoints)  â”‚
â”‚   â”‚   â”œâ”€â”€ Entrepreneur: CRUD + DIME Scores (4 endpoints)                 â”‚
â”‚   â”‚   â”œâ”€â”€ Session History + Knowledge Search (2 endpoints)               â”‚
â”‚   â”‚   â”œâ”€â”€ Copilot Chat + Field Exit (4 endpoints)                        â”‚
â”‚   â”‚   â””â”€â”€ Chat SSE Stream: POST /api/copilot/chat/stream (streaming)    â”‚
â”‚   â”œâ”€â”€ 14+ Servicios ProducciÃ³n:                                          â”‚
â”‚   â”‚   â”œâ”€â”€ HypothesisPrioritizationService (ICE Score algorithm)          â”‚
â”‚   â”‚   â”œâ”€â”€ BmcValidationService (semÃ¡foros RED/YELLOW/GREEN/GRAY)         â”‚
â”‚   â”‚   â”œâ”€â”€ LearningCardService + TestCardGeneratorService                 â”‚
â”‚   â”‚   â”œâ”€â”€ ModeDetectorService: 175 triggers BD + fallback const          â”‚
â”‚   â”‚   â”‚   â””â”€â”€ copilot_mode_triggers tabla + cache 1h + admin UI          â”‚
â”‚   â”‚   â”œâ”€â”€ NormativeRAGService: Qdrant + fallback keyword                 â”‚
â”‚   â”‚   â”œâ”€â”€ CopilotOrchestratorService: Geminiâ†’Anthropicâ†’OpenAI            â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ + SelfDiscoveryContextService (10o arg nullable)           â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ + UpgradeContext: soft nudge en system prompt (>80% limit) â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ + recordLatencySample() + recordFallbackEvent()            â”‚
â”‚   â”‚   â”‚   â””â”€â”€ + getMetricsSummary() (P50/P99, fallback rate, costes)    â”‚
â”‚   â”‚   â””â”€â”€ PivotDetector, ContentGrounding, VPC, BusinessPattern          â”‚
â”‚   â”œâ”€â”€ 5 Content Entities (Access Handlers + ListBuilders):               â”‚
â”‚   â”‚   â””â”€â”€ EntrepreneurProfile, Hypothesis, Experiment,                   â”‚
â”‚   â”‚       EntrepreneurLearning, FieldExit                                â”‚
â”‚   â”œâ”€â”€ 2 Tablas Custom:                                                   â”‚
â”‚   â”‚   â”œâ”€â”€ copilot_mode_triggers (175 triggers, admin gestionable)        â”‚
â”‚   â”‚   â””â”€â”€ entrepreneur_milestone (hitos con puntos, append-only)         â”‚
â”‚   â”œâ”€â”€ 3 PÃ¡ginas Frontend Full-Width + Widget Chat SSE:                   â”‚
â”‚   â”‚   â”œâ”€â”€ BMC Dashboard (/emprendimiento/bmc) â€” Grid 5Ã—3, semÃ¡foros      â”‚
â”‚   â”‚   â”œâ”€â”€ Hypothesis Manager (/emprendimiento/hipotesis) â€” CRUD modales  â”‚
â”‚   â”‚   â”œâ”€â”€ Experiment Lifecycle (/emprendimiento/experimentos/gestion)    â”‚
â”‚   â”‚   â””â”€â”€ Chat Widget (Alpine.js + fetch ReadableStream, modo visual)   â”‚
â”‚   â”œâ”€â”€ Gamification: Impact Points + Milestones persistentes              â”‚
â”‚   â”‚   â””â”€â”€ PERSEVERE=100, PIVOT/ZOOM=75, KILL=50 + niveles 1-5           â”‚
â”‚   â”œâ”€â”€ Biblioteca: 44 experimentos Osterwalder                            â”‚
â”‚   â”œâ”€â”€ PatrÃ³n: Desbloqueo Progresivo UX (12 semanas)                     â”‚
â”‚   â”œâ”€â”€ Multi-proveedor optimizado: Gemini Flash (consultor/landing)       â”‚
â”‚   â”‚   â””â”€â”€ claude-sonnet-4-5, gpt-4o, gemini-2.5-flash, claude-haiku-4-5â”‚
â”‚   â”œâ”€â”€ EmprendimientoCopilotAgent (v2 Paridad): 6 modos especializados   â”‚
â”‚   â”‚   â””â”€â”€ business_strategist, financial_advisor,                       â”‚
â”‚   â”‚       customer_discovery_coach, pitch_trainer,                      â”‚
â”‚   â”‚       ecosystem_connector, faq                                      â”‚
â”‚   â”œâ”€â”€ CRM Sync Pipeline emprendedor: 7 estados CRM                     â”‚
â”‚   â”‚   â””â”€â”€ idea_registeredâ†’lead, bmcâ†’sql, mvpâ†’demo, scalingâ†’closed_won  â”‚
â”‚   â”œâ”€â”€ 7 Unit Test Suites (PHPUnit 11): 64 tests, 184 assertions         â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (v2.1 - Clase Mundial, Paridad Empleabilidad)â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_journey âœ… (Block C Journey Engine)                           â”‚
â”‚   â”œâ”€â”€ Motor de navegaciÃ³n inteligente: 7 verticales, 19 avatares         â”‚
â”‚   â”œâ”€â”€ JourneyState Entity: 7 estados (discovery â†’ advocacy + at_risk)    â”‚
â”‚   â”œâ”€â”€ JourneyEngineService: Transiciones, eventos, KPIs                   â”‚
â”‚   â”œâ”€â”€ JourneyContextService: AnÃ¡lisis contexto + risk_score               â”‚
â”‚   â”œâ”€â”€ JourneyTriggerService: 11 tipos triggers IA + NO_INTRUSION_RULES   â”‚
â”‚   â”‚   â””â”€â”€ evaluateEntrepreneurTriggers(): re-engagement 7d inactivos     â”‚
â”‚   â”œâ”€â”€ JourneyDefinitionLoader: 7 definiciones por vertical                â”‚
â”‚   â”œâ”€â”€ EmprendimientoCrossSellService: EjecuciÃ³n 4 reglas cross-sell      â”‚
â”‚   â”‚   â””â”€â”€ diagnostic_completed â†’ Curso BMC, before_mvp â†’ Kit validaciÃ³n  â”‚
â”‚   â”œâ”€â”€ EmprendimientoJourneyProgressionService: 7 reglas proactivas      â”‚
â”‚   â”‚   â””â”€â”€ inactivity_discovery, canvas_incomplete, hypothesis_stalled,  â”‚
â”‚   â”‚       all_killed_no_pivot, mvp_validated_no_mentor,                  â”‚
â”‚   â”‚       funding_eligible, post_scaling_expansion                       â”‚
â”‚   â”œâ”€â”€ EmprendimientoHealthScoreService: 5 dimensiones + 8 KPIs          â”‚
â”‚   â”‚   â””â”€â”€ canvas_completeness 25%, hypothesis_validation 30%,           â”‚
â”‚   â”‚       experiment_velocity 15%, copilot_engagement 15%,              â”‚
â”‚   â”‚       funding_readiness 15%                                          â”‚
â”‚   â”œâ”€â”€ EmprendimientoCrossVerticalBridgeService: 3 bridges salientes     â”‚
â”‚   â”‚   â””â”€â”€ formacion (scaling_needs_team_skills), servicios              â”‚
â”‚   â”‚       (needs_outsource_mvp), comercio (has_product_post_mvp)        â”‚
â”‚   â”œâ”€â”€ Cross-vertical: empleabilidad â†” emprendimiento bidireccional       â”‚
â”‚   â”‚   â””â”€â”€ RIASEC Eâ‰¥7 â†’ emprendimiento | at_risk â†’ empleabilidad          â”‚
â”‚   â”œâ”€â”€ API REST: 6 endpoints (/api/v1/journey/*)                           â”‚
â”‚   â”œâ”€â”€ Dashboard Admin: /admin/config/jaraba/journey                       â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (v1.1 - Cross-sell + re-engagement activos)  â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_heatmap âœ… (Native Analytics + Tracking Automation)            â”‚
â”‚   â”œâ”€â”€ Tracking: Clics, movimiento mouse, scroll depth                    â”‚
â”‚   â”œâ”€â”€ API: POST /api/heatmap/collect (Beacon API)                         â”‚
â”‚   â”œâ”€â”€ Storage: 4 tablas (events, aggregated, scroll_depth, screenshots)  â”‚
â”‚   â”œâ”€â”€ QueueWorker: HeatmapEventProcessor (cron 30s)                      â”‚
â”‚   â”œâ”€â”€ Screenshots: HeatmapScreenshotService (wkhtmltoimage, UPSERT)     â”‚
â”‚   â”œâ”€â”€ AgregaciÃ³n: Cron diario, limpieza semanal, anomaly detection       â”‚
â”‚   â”‚   â””â”€â”€ AnomalÃ­as: drop 50% / spike 200% vs media 7 dÃ­as              â”‚
â”‚   â”œâ”€â”€ Dashboard: Canvas 2D Zero Region (/heatmap/analytics)              â”‚
â”‚   â”œâ”€â”€ Cross-mÃ³dulo: auto-winner A/B c/6h, pixel health check diario     â”‚
â”‚   â”œâ”€â”€ hook_mail: experiment_winner + pixel_health_alert                   â”‚
â”‚   â”œâ”€â”€ Tests: 53 unitarios (250 assertions)                               â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (Fases 1-5 completadas, 2026-02-12)          â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_ai_agents âœ… (Agentic Workflows + IA Clase Mundial F11)        â”‚
â”‚   â”œâ”€â”€ Sistema Agentic: Workflows multi-step con herramientas autÃ³nomas  â”‚
â”‚   â”œâ”€â”€ Entidades: AgentTool, AiAgentExecution, AiToolExecution            â”‚
â”‚   â”œâ”€â”€ ToolRegistryService: Registro dinÃ¡mico de herramientas IA          â”‚
â”‚   â”‚   â””â”€â”€ 12+ tools: knowledge_base, email_sender, calendar, etc.        â”‚
â”‚   â”œâ”€â”€ AgentOrchestrator: Ejecutor de agentes con LLM router              â”‚
â”‚   â”‚   â””â”€â”€ Proveedores: Anthropic â†’ OpenAI â†’ Google Gemini (failover)     â”‚
â”‚   â”œâ”€â”€ AgentExecutionService: Tracking de ejecuciones + costes            â”‚
â”‚   â”œâ”€â”€ F11 Brand Voice Training:                                          â”‚
â”‚   â”‚   â”œâ”€â”€ BrandVoiceTrainerService: Qdrant `jaraba_brand_voice` 1536D   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ Feedback loop (approve/reject/edit) + LLM refinement      â”‚
â”‚   â”‚   â””â”€â”€ BrandVoiceTrainerApiController: 4 endpoints REST              â”‚
â”‚   â”œâ”€â”€ F11 Prompt A/B Testing:                                            â”‚
â”‚   â”‚   â”œâ”€â”€ PromptExperimentService: type='prompt_variant', auto-eval     â”‚
â”‚   â”‚   â”‚   â””â”€â”€ Integrado con jaraba_ab_testing StatisticalEngine         â”‚
â”‚   â”‚   â””â”€â”€ PromptExperimentApiController: 3 endpoints REST               â”‚
â”‚   â”œâ”€â”€ F11 MultiModal Preparation:                                        â”‚
â”‚   â”‚   â”œâ”€â”€ Interfaces: MultiModalInputInterface, MultiModalOutputInterfaceâ”‚
â”‚   â”‚   â””â”€â”€ MultiModalBridgeService: Stub para Whisper/ElevenLabs/DALL-E â”‚
â”‚   â”œâ”€â”€ Agentes AgroConecta:                                             â”‚
â”‚   â”‚   â”œâ”€â”€ SalesAgent: Extiende SmartBaseAgent, Model Routing            â”‚
â”‚   â”‚   â”‚   â””â”€â”€ fast/balanced/premium para ventas + cart recovery         â”‚
â”‚   â”‚   â””â”€â”€ MerchantCopilotAgent: Copilot comerciantes ComercioConecta   â”‚
â”‚   â”œâ”€â”€ API REST: /api/v1/agents/*, /api/v1/ai/brand-voice/*,            â”‚
â”‚   â”‚   /api/v1/ai/prompt-experiments/*, /api/v1/ai/multimodal/*           â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (v2.0 - IA Clase Mundial F11)               â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_insights_hub âœ… (Insights Hub â€” Monitoreo TÃ©cnico)           â”‚
â”‚   â”œâ”€â”€ 6 Content Entities: SearchConsoleConnection, SearchConsoleData,  â”‚
â”‚   â”‚   WebVitalsMetric, InsightsErrorLog, UptimeCheck, UptimeIncident   â”‚
â”‚   â”œâ”€â”€ Services: SearchConsoleService, WebVitalsCollectorService,       â”‚
â”‚   â”‚   WebVitalsAggregatorService, ErrorTrackingService,                â”‚
â”‚   â”‚   UptimeMonitorService, InsightsAggregatorService                  â”‚
â”‚   â”œâ”€â”€ Controllers: InsightsDashboard, InsightsAdmin, SearchConsoleApi, â”‚
â”‚   â”‚   WebVitalsApi, ErrorTrackingApi, UptimeApi                        â”‚
â”‚   â”œâ”€â”€ Frontend: /insights (4 tabs: SEO|Performance|Errors|Uptime)      â”‚
â”‚   â”œâ”€â”€ JS: web-vitals-tracker.js, error-tracker.js, insights-dashboard.jsâ”‚
â”‚   â”œâ”€â”€ Hooks: hook_cron (uptime, search_console_sync, web_vitals_agg)  â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (Spec 179a, Feb 2026)                      â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_legal_knowledge âœ… (Legal Knowledge â€” Base Normativa RAG)    â”‚
â”‚   â”œâ”€â”€ 4 Content Entities: LegalNorm, LegalChunk, LegalQueryLog,       â”‚
â”‚   â”‚   NormChangeAlert                                                   â”‚
â”‚   â”œâ”€â”€ Pipeline BOE: BoeApiClient â†’ LegalIngestionService â†’             â”‚
â”‚   â”‚   LegalChunkingService â†’ LegalEmbeddingService â†’ Qdrant           â”‚
â”‚   â”œâ”€â”€ RAG: LegalRagService (query â†’ Qdrant â†’ Claude â†’ citas BOE)      â”‚
â”‚   â”œâ”€â”€ Services: LegalCitationService, LegalDisclaimerService,          â”‚
â”‚   â”‚   LegalAlertService, TaxCalculatorService                          â”‚
â”‚   â”œâ”€â”€ Frontend: /legal (consultas) + /legal/calculadoras (IRPF/IVA)   â”‚
â”‚   â”œâ”€â”€ QueueWorkers: LegalNormIngestionWorker, AlertNotificationWorker  â”‚
â”‚   â”œâ”€â”€ Hooks: hook_cron (BOE sync diario) + hook_mail (alertas)        â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (Specs 178/178b, Feb 2026)                 â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_funding âœ… (Funding Intelligence â€” Subvenciones)             â”‚
â”‚   â”œâ”€â”€ 4 Content Entities: FundingCall, FundingSubscription,            â”‚
â”‚   â”‚   FundingMatch, FundingAlert                                        â”‚
â”‚   â”œâ”€â”€ API Clients: BdnsApiClient (BDNS) + BojaApiClient (BOJA)        â”‚
â”‚   â”œâ”€â”€ Matching IA: FundingMatchingEngine (5 criterios, scoring 0-100)  â”‚
â”‚   â”‚   â”œâ”€â”€ RegiÃ³n 20% + Beneficiario 25% + Sector 20% + TamaÃ±o 15%    â”‚
â”‚   â”‚   â”‚   + SemÃ¡ntico 20% (Qdrant cosine)                              â”‚
â”‚   â”‚   â””â”€â”€ Canvas Enrichment: sector, revenue, segments desde BMC       â”‚
â”‚   â”œâ”€â”€ Intelligence: FundingEligibilityCalculator,                      â”‚
â”‚   â”‚   FundingCopilotService (RAG + intenciones)                        â”‚
â”‚   â”œâ”€â”€ Alerts: FundingAlertService + FundingNotificationDispatcher      â”‚
â”‚   â”œâ”€â”€ Cache: FundingCacheService (calls 30min, matches 5min)           â”‚
â”‚   â”œâ”€â”€ BD: 12 Ã­ndices, HASH(tenant_id) + RANGE(created) partitioning   â”‚
â”‚   â”œâ”€â”€ Frontend: /funding (dashboard + calendario) + /funding/copilot   â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (Specs 179/179b, Feb 2026)                 â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_social âœ… (AI Social Manager - Marketing AI Stack)             â”‚
â”‚   â”œâ”€â”€ Entidades: SocialAccount, SocialPost, SocialPostVariant            â”‚
â”‚   â”œâ”€â”€ SocialPostService: GeneraciÃ³n IA + scheduling + publish            â”‚
â”‚   â”‚   â””â”€â”€ Plataformas: Facebook, Instagram, LinkedIn, Twitter, TikTok   â”‚
â”‚   â”œâ”€â”€ SocialAccountService: OAuth + token refresh por plataforma         â”‚
â”‚   â”œâ”€â”€ SocialCalendarService: Vista calendario + scheduling               â”‚
â”‚   â”œâ”€â”€ SocialAnalyticsService: MÃ©tricas cross-platform                    â”‚
â”‚   â”œâ”€â”€ MakeComIntegrationService: PublicaciÃ³n via Make.com                â”‚
â”‚   â”œâ”€â”€ Dashboard: /social con estadÃ­sticas y calendario                   â”‚
â”‚   â”œâ”€â”€ API REST: /api/v1/social/generate, /api/v1/social/schedule         â”‚
â”‚   â”œâ”€â”€ Tests: 3 unit test files (SocialPost, SocialAccount, Calendar)    â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (v2.0 - Marketing AI Stack 100%)             â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_crm âœ… (CRM Pipeline + B2B Sales Flow F9)                     â”‚
â”‚   â”œâ”€â”€ Entidades: Company, Contact, Opportunity (+5 BANT), Activity,     â”‚
â”‚   â”‚   PipelineStage                                                      â”‚
â”‚   â”œâ”€â”€ Pipeline B2B 8 etapas: Leadâ†’MQLâ†’SQLâ†’Demoâ†’Proposalâ†’Negotiationâ†’   â”‚
â”‚   â”‚   Wonâ†’Lost (Directriz #20 YAML-based allowed values)                â”‚
â”‚   â”œâ”€â”€ BANT Qualification: Budget/Authority/Need/Timeline                 â”‚
â”‚   â”‚   â””â”€â”€ Score 0-4 computado en preSave() (BANT_MAX_VALUES const)      â”‚
â”‚   â”œâ”€â”€ SalesPlaybookService: match(stage + BANT) â†’ next action           â”‚
â”‚   â”‚   â””â”€â”€ Prioridad (lowâ†’critical) + detalles + bant_details            â”‚
â”‚   â”œâ”€â”€ PipelineKanbanController: Vista Kanban drag & drop                 â”‚
â”‚   â”œâ”€â”€ CrmDashboardController: Dashboard unificado /crm                   â”‚
â”‚   â”œâ”€â”€ CrmApiController: 24 endpoints REST (CRUD + forecast + stages     â”‚
â”‚   â”‚   + playbook GET + bant PUT)                                         â”‚
â”‚   â”œâ”€â”€ CrmForecastingService: Forecast, win rate, avg deal size          â”‚
â”‚   â”œâ”€â”€ PipelineStageService: 8 stages B2B por defecto, reordenamiento   â”‚
â”‚   â”œâ”€â”€ Tests: 10 unit test files (Company, Contact, Opportunity, etc.)    â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (v4.0 - B2B Sales Flow F9)                  â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_email âœ… (Email Marketing + AI + 30 MJML Templates)            â”‚
â”‚   â”œâ”€â”€ Entidades: EmailCampaign, EmailList, EmailSequence, EmailTemplate, â”‚
â”‚   â”‚   EmailSequenceStep                                                  â”‚
â”‚   â”œâ”€â”€ EmailAIService: GeneraciÃ³n de subjects y copy con IA               â”‚
â”‚   â”‚   â””â”€â”€ generateSubjectLines(), generateEmailCopy(), A/B variants      â”‚
â”‚   â”œâ”€â”€ EmailApiController: 17 endpoints REST (listas, subs, campaigns)   â”‚
â”‚   â”œâ”€â”€ EmailWebhookController: POST /api/v1/webhooks/sendgrid (HMAC)    â”‚
â”‚   â”œâ”€â”€ SendGridClientService: sendEmail, sendBatch, processWebhook       â”‚
â”‚   â”œâ”€â”€ SequenceManagerService: enrollSubscriber, executeNextStep         â”‚
â”‚   â”œâ”€â”€ MJML Templates: 40 transaccionales + base.mjml                    â”‚
â”‚   â”‚   â”œâ”€â”€ auth/ (5): verify, welcome, password_reset/changed, new_login  â”‚
â”‚   â”‚   â”œâ”€â”€ billing/ (7): invoice, payment_failed, subscription...         â”‚
â”‚   â”‚   â”œâ”€â”€ marketplace/ (6): order_confirmed, shipped, delivered...       â”‚
â”‚   â”‚   â”œâ”€â”€ empleabilidad/ (5): job_match, application, shortlisted...    â”‚
â”‚   â”‚   â””â”€â”€ emprendimiento/ (11): welcome, diagnostic, canvas_milestone,  â”‚
â”‚   â”‚       experiment_result, mentor_matched, weekly_progress +           â”‚
â”‚   â”‚       seq_onboarding_founder, seq_canvas_abandonment,               â”‚
â”‚   â”‚       seq_upsell_starter, seq_mvp_celebration, seq_post_funding     â”‚
â”‚   â”œâ”€â”€ TemplateLoaderService: template_id â†’ MJML â†’ compilaciÃ³n           â”‚
â”‚   â”œâ”€â”€ MjmlCompilerService: MJML â†’ HTML responsive                       â”‚
â”‚   â”œâ”€â”€ Tests: 12 unit test files (Newsletter, MJML, Subscriber, etc.)    â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (v4.0 - Marketing AI Stack 100%)             â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_ab_testing âœ… (A/B Testing Engine)                            â”‚
â”‚   â”œâ”€â”€ Entidades: Experiment, ExperimentVariant, ExperimentExposure,     â”‚
â”‚   â”‚   ExperimentResult                                                   â”‚
â”‚   â”œâ”€â”€ ABTestingApiController: Deploy winner, exposure, conversion       â”‚
â”‚   â”œâ”€â”€ StatisticalEngineService: p-value, confidence, lift               â”‚
â”‚   â”œâ”€â”€ VariantAssignmentService: Deterministic variant assignment        â”‚
â”‚   â”œâ”€â”€ ExperimentAggregatorService: Metrics aggregation                  â”‚
â”‚   â”œâ”€â”€ OnboardingExperimentService: Onboarding flow experiments          â”‚
â”‚   â”œâ”€â”€ Tests: 8 unit test files                                          â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (v1.0 - Marketing AI Stack 100%)             â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_pixels âœ… (Pixel Manager CAPI v2)                             â”‚
â”‚   â”œâ”€â”€ Entidades: TrackingPixel, TrackingEvent, ConsentRecord,           â”‚
â”‚   â”‚   PixelCredential                                                    â”‚
â”‚   â”œâ”€â”€ PixelDispatcherService: Meta CAPI + Google MP + LinkedIn + TikTok â”‚
â”‚   â”œâ”€â”€ ConsentManagementService: GDPR consent record + revocation        â”‚
â”‚   â”œâ”€â”€ CredentialManagerService: Platform credentials                    â”‚
â”‚   â”œâ”€â”€ RedisQueueService: Redis-backed event queue + batch               â”‚
â”‚   â”œâ”€â”€ Tests: 5 unit test files                                          â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (v1.0 - Marketing AI Stack 100%)             â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_events âœ… (Marketing Events Manager)                          â”‚
â”‚   â”œâ”€â”€ Entidades: MarketingEvent (30+ campos), EventRegistration,        â”‚
â”‚   â”‚   EventLandingPage                                                   â”‚
â”‚   â”œâ”€â”€ EventApiController: CRUD eventos + registros + check-in + stats   â”‚
â”‚   â”œâ”€â”€ EventRegistrationService: Registro, check-in, waitlist            â”‚
â”‚   â”œâ”€â”€ EventAnalyticsService: Tasas asistencia, engagement, conversiÃ³n   â”‚
â”‚   â”œâ”€â”€ EventCertificateService: GeneraciÃ³n certificados PDF              â”‚
â”‚   â”œâ”€â”€ Tests: 3 unit test files                                          â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (v1.0 - Marketing AI Stack 100%)             â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_referral âœ… (Programa de Referidos)                           â”‚
â”‚   â”œâ”€â”€ Entidades: ReferralProgram, ReferralCode, ReferralReward          â”‚
â”‚   â”œâ”€â”€ ReferralApiController: 9 endpoints REST                           â”‚
â”‚   â”œâ”€â”€ RewardProcessingService: CreaciÃ³n, validaciÃ³n, Stripe payouts     â”‚
â”‚   â”œâ”€â”€ LeaderboardService: Ranking, niveles embajador, gamificaciÃ³n      â”‚
â”‚   â”œâ”€â”€ ReferralTrackingService: Clicks, signups, conversiones            â”‚
â”‚   â”œâ”€â”€ Tests: 3 unit test files                                          â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (v1.0 - Marketing AI Stack 100%)             â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_ads âœ… (Ads Multi-Platform Manager)                           â”‚
â”‚   â”œâ”€â”€ Entidades: AdsAccount, AdsCampaignSync, AdsMetricsDaily,         â”‚
â”‚   â”‚   AdsAudienceSync, AdsConversionEvent                               â”‚
â”‚   â”œâ”€â”€ AdsOAuthController: OAuth flows Meta + Google                     â”‚
â”‚   â”œâ”€â”€ MetaAdsClientService: Meta Marketing API v18                      â”‚
â”‚   â”œâ”€â”€ GoogleAdsClientService: Google Ads API v16                        â”‚
â”‚   â”œâ”€â”€ AdsAudienceSyncService: Sync CRM â†’ plataformas ads               â”‚
â”‚   â”œâ”€â”€ ConversionTrackingService: Conversiones offline                   â”‚
â”‚   â”œâ”€â”€ AdsSyncService: OrquestaciÃ³n de sincronizaciÃ³n                    â”‚
â”‚   â”œâ”€â”€ Tests: 6 unit test files                                          â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (v1.0 - Marketing AI Stack 100%)             â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ ecosistema_jaraba_core Admin Center Premium âœ… (Spec f104)           â”‚
â”‚   â”œâ”€â”€ FASE 1 â€” Shell Layout:                                            â”‚
â”‚   â”‚   â”œâ”€â”€ AdminCenterController: Router principal 8 pÃ¡ginas              â”‚
â”‚   â”‚   â”œâ”€â”€ AdminCenterAggregatorService: Scorecards + Quick Links         â”‚
â”‚   â”‚   â”œâ”€â”€ AdminCenterLayoutService: Menu sections + breadcrumbs          â”‚
â”‚   â”‚   â””â”€â”€ Shell: Sidebar colapsable + Topbar + Content area             â”‚
â”‚   â”œâ”€â”€ FASE 2 â€” DataTable + Tenants:                                     â”‚
â”‚   â”‚   â”œâ”€â”€ AdminCenterDataTable: Vanilla JS reusable (sort, filter, pag) â”‚
â”‚   â”‚   â”œâ”€â”€ AdminCenterTenantService: Filtros plan/status/bÃºsqueda        â”‚
â”‚   â”‚   â””â”€â”€ Slide-panel detalle tenant                                    â”‚
â”‚   â”œâ”€â”€ FASE 3 â€” Users:                                                   â”‚
â”‚   â”‚   â”œâ”€â”€ AdminCenterUserService: Avatar detection + filtros role/status â”‚
â”‚   â”‚   â””â”€â”€ Slide-panel detalle usuario                                   â”‚
â”‚   â”œâ”€â”€ FASE 4 â€” Finance:                                                 â”‚
â”‚   â”‚   â”œâ”€â”€ AdminCenterFinanceService: MRR, ARPU, Churn, LTV              â”‚
â”‚   â”‚   â””â”€â”€ Scorecards + metrics table + tenant analytics                 â”‚
â”‚   â”œâ”€â”€ FASE 5 â€” Alerts & Playbooks:                                      â”‚
â”‚   â”‚   â”œâ”€â”€ Integration FocAlert + CsPlaybook (mÃ³dulos opcionales)        â”‚
â”‚   â”‚   â””â”€â”€ Dashboard severity + playbook grid + slide-panel              â”‚
â”‚   â”œâ”€â”€ FASE 6 â€” Analytics & Logs:                                        â”‚
â”‚   â”‚   â”œâ”€â”€ AdminCenterAnalyticsService: DAU, MAU, sessions, AI, errors   â”‚
â”‚   â”‚   â”œâ”€â”€ Chart.js trend charts + AI Telemetry table                    â”‚
â”‚   â”‚   â””â”€â”€ Logs viewer: source tabs, severity, bÃºsqueda, paginaciÃ³n     â”‚
â”‚   â”œâ”€â”€ FASE 7 â€” Settings & Polish:                                       â”‚
â”‚   â”‚   â”œâ”€â”€ AdminCenterSettingsService: Config + Plans + Integrations     â”‚
â”‚   â”‚   â”œâ”€â”€ API Keys: SHA-256 hashed, create/revoke/copy                  â”‚
â”‚   â”‚   â”œâ”€â”€ Dark Mode: body.dark-mode + prefers-color-scheme:dark          â”‚
â”‚   â”‚   â””â”€â”€ A11y: :focus-visible + skip nav + WCAG 2.1 AA                â”‚
â”‚   â”œâ”€â”€ Infra: 5 servicios, 30+ APIs, 10 templates, 10 SCSS, 10 JS      â”‚
â”‚   â”œâ”€â”€ Impersonation System: Login como usuario de tenant                â”‚
â”‚   â”‚   â”œâ”€â”€ ImpersonationAuditLog: Entity audit trail completo            â”‚
â”‚   â”‚   â”œâ”€â”€ ImpersonationService: SesiÃ³n 30min, bloqueo UID 1             â”‚
â”‚   â”‚   â””â”€â”€ API: /api/v1/admin/impersonate/* (start, end, status, logs)   â”‚
â”‚   â”œâ”€â”€ RBAC Matrix: Vista visual gestiÃ³n permisos por rol                â”‚
â”‚   â”‚   â”œâ”€â”€ Toggle AJAX: Activar/desactivar permisos en tiempo real       â”‚
â”‚   â”‚   â”œâ”€â”€ Filtro mÃ³dulo: LocalizaciÃ³n rÃ¡pida de permisos                â”‚
â”‚   â”‚   â””â”€â”€ Export CSV: DocumentaciÃ³n y auditorÃ­a                         â”‚
â”‚   â”œâ”€â”€ Scheduled Reports: Reportes automÃ¡ticos programados               â”‚
â”‚   â”‚   â”œâ”€â”€ ScheduledReport Entity: 5 tipos, 3 frecuencias                â”‚
â”‚   â”‚   â””â”€â”€ AlertRule Entity: MÃ©tricas monitoreables + cooldown           â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (v2.0 - Feb 2026 â€” Premium 7 FASEs)         â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_page_builder âœ… (Constructor Visual GrapesJS)                 â”‚
â”‚   â”œâ”€â”€ 6 Entidades: PageContent, PageTemplate, PageType, etc.            â”‚
â”‚   â”œâ”€â”€ GrapesJS Canvas Editor: ~202 bloques, 24 categorÃ­as               â”‚
â”‚   â”‚   â”œâ”€â”€ Template Registry SSoT v5.0 con Feature Flags                 â”‚
â”‚   â”‚   â”œâ”€â”€ 12+ plugins GrapesJS propios (AI, Marketplace, Multi-Page...) â”‚
â”‚   â”‚   â”œâ”€â”€ IconRegistry SVG (17 iconos inline, Drupal.jarabaIcons)       â”‚
â”‚   â”‚   â””â”€â”€ 3 bloques redirigidos a componentes interactivos              â”‚
â”‚   â”œâ”€â”€ Plan v3.1 COMPLETADO (10/10 sprints):                             â”‚
â”‚   â”‚   â”œâ”€â”€ A1: Onboarding Tour (Driver.js)                               â”‚
â”‚   â”‚   â”œâ”€â”€ A2: SVG Thumbnails (21 categorÃ­as, 682 LOC)                   â”‚
â”‚   â”‚   â”œâ”€â”€ A3: Drag & Drop Polish                                       â”‚
â”‚   â”‚   â”œâ”€â”€ B1: Site Builder Frontend Premium (Dashboard, KPIs)           â”‚
â”‚   â”‚   â”œâ”€â”€ B2: SEO Assistant Integrado (6 checks, score 0-100)           â”‚
â”‚   â”‚   â”œâ”€â”€ C1: Template Marketplace (slide-panel, filtros, badges)       â”‚
â”‚   â”‚   â”œâ”€â”€ C2: Multi-Page Editor (tabs IDE, state Map, Ctrl+Tab/W/S)    â”‚
â”‚   â”‚   â”œâ”€â”€ C3: Responsive Preview Mejorado (8 viewports, slider, rotate)â”‚
â”‚   â”‚   â””â”€â”€ C4: IA Asistente Integrada                                   â”‚
â”‚   â”‚       â”œâ”€â”€ SeoSuggestionService (SEO IA con fallback heurÃ­stico)     â”‚
â”‚   â”‚       â”œâ”€â”€ AiTemplateGeneratorService (landing pages con Brand Voice)â”‚
â”‚   â”‚       â”œâ”€â”€ Selectores Vertical + Tono + mode toggle                 â”‚
â”‚   â”‚       â””â”€â”€ Prompt-to-Page (generaciÃ³n pÃ¡gina completa)               â”‚
â”‚   â”œâ”€â”€ RemediaciÃ³n FASES 0-5 (2026-02-14):                              â”‚
â”‚   â”‚   â”œâ”€â”€ F0: Publish endpoint + SEO URLs + Navigation behavior         â”‚
â”‚   â”‚   â”œâ”€â”€ F1: 4 SCSS nuevos + compilation Docker + 4 libraries         â”‚
â”‚   â”‚   â”œâ”€â”€ F2: 3 bloques estÃ¡ticos â†’ componentes interactivos           â”‚
â”‚   â”‚   â”œâ”€â”€ F3: IconRegistry SVG (17 iconos, ~22 emojis reemplazados)    â”‚
â”‚   â”‚   â””â”€â”€ F5: Font-family unificado Outfit (JS + 10 SCSS)             â”‚
â”‚   â”œâ”€â”€ SCSS Pipeline: 10+ parciales â†’ CSS independientes (Docker NVM)    â”‚
â”‚   â”œâ”€â”€ API REST: 10+ endpoints (/api/v1/page-builder/*)                  â”‚
â”‚   â”œâ”€â”€ Cypress E2E: 12 suites, ~670 lÃ­neas                               â”‚
â”‚   â”œâ”€â”€ Bloques Verticales (55 templates, 5 verticales Ã— 11 tipos):     â”‚
â”‚   â”‚   â”œâ”€â”€ _pb-sections.scss: 570 LOC, base + 5 color schemes + 11 layoutsâ”‚
â”‚   â”‚   â”œâ”€â”€ Color schemes: --pb-accent via CSS custom properties cascade â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ agroconecta (#556B2F), comercioconecta (#FF8C42)        â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ serviciosconecta (#233D63), empleabilidad (#00A9A5)     â”‚
â”‚   â”‚   â”‚   â””â”€â”€ emprendimiento (#8B5CF6)                                 â”‚
â”‚   â”‚   â”œâ”€â”€ 11 layouts: hero, content, features, stats, pricing,        â”‚
â”‚   â”‚   â”‚   testimonials, faq, cta, gallery, map, social_proof          â”‚
â”‚   â”‚   â”œâ”€â”€ renderTemplatePreview(): Twig real en vez de placeholder    â”‚
â”‚   â”‚   â””â”€â”€ CSS compilado: 47KB, 257 reglas .pb-section                 â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (Plan v3.1 100% + RemediaciÃ³n F0-F5 + Bloques Verticales 55 templates) â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_agent_flows âœ… (Agent Flows Visual Builder)                  â”‚
â”‚   â”œâ”€â”€ Entidades: AgentFlow, AgentFlowExecution, AgentFlowStepLog       â”‚
â”‚   â”œâ”€â”€ AgentFlowExecutionService: OrquestaciÃ³n via jaraba_ai_agents     â”‚
â”‚   â”œâ”€â”€ AgentFlowTriggerService: Triggers por evento/cron/webhook        â”‚
â”‚   â”œâ”€â”€ AgentFlowValidatorService: ValidaciÃ³n flows pre-ejecuciÃ³n        â”‚
â”‚   â”œâ”€â”€ AgentFlowMetricsService: KPIs por flow y tenant                  â”‚
â”‚   â”œâ”€â”€ AgentFlowTemplateService: Templates de flows reutilizables       â”‚
â”‚   â”œâ”€â”€ API REST: /api/v1/agent-flows/* (dashboard + CRUD)               â”‚
â”‚   â”œâ”€â”€ Tests: 2 unit test files                                         â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (v1.0 - 38 archivos)                       â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_pwa âœ… (Progressive Web App + Push + Offline)                â”‚
â”‚   â”œâ”€â”€ Entidades: PushSubscription (migrada), PendingSyncAction         â”‚
â”‚   â”œâ”€â”€ PlatformPushService: Web Push con VAPID keys                     â”‚
â”‚   â”œâ”€â”€ PwaSyncManagerService: Background sync con retry                 â”‚
â”‚   â”œâ”€â”€ PwaManifestService: Manifest.json dinÃ¡mico por tenant            â”‚
â”‚   â”œâ”€â”€ PwaOfflineDataService: Cache de datos crÃ­ticos offline           â”‚
â”‚   â”œâ”€â”€ PwaCacheStrategyService: Estrategias cache (CacheFirst, etc.)    â”‚
â”‚   â”œâ”€â”€ Service Worker avanzado: strategies + offline-first              â”‚
â”‚   â”œâ”€â”€ Tests: 2 unit test files                                         â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (v1.0 - 32 archivos)                       â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_onboarding âœ… (Onboarding PLG + GamificaciÃ³n)               â”‚
â”‚   â”œâ”€â”€ Entidades: OnboardingTemplate, UserOnboardingProgress            â”‚
â”‚   â”œâ”€â”€ OnboardingOrchestratorService: Wraps TenantOnboardingService     â”‚
â”‚   â”œâ”€â”€ OnboardingGamificationService: Puntos, badges, streaks           â”‚
â”‚   â”œâ”€â”€ OnboardingChecklistService: Progreso por vertical                â”‚
â”‚   â”œâ”€â”€ OnboardingContextualHelpService: Ayuda contextual in-app         â”‚
â”‚   â”œâ”€â”€ OnboardingAnalyticsService: MÃ©tricas activaciÃ³n + retenciÃ³n      â”‚
â”‚   â”œâ”€â”€ Vertical-specific: Emprendimiento (idea + sector + BMC CTA)      â”‚
â”‚   â”œâ”€â”€ API REST: /api/v1/onboarding/* (dashboard + API)                 â”‚
â”‚   â”œâ”€â”€ Tests: 2 unit test files                                         â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (v1.1 - Emprendimiento personalizado)      â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_usage_billing âœ… (Usage-Based Billing Pipeline)              â”‚
â”‚   â”œâ”€â”€ Entidades: UsageEvent, UsageAggregate, PricingRule               â”‚
â”‚   â”œâ”€â”€ UsageIngestionService: Ingesta eventos con idempotency           â”‚
â”‚   â”œâ”€â”€ UsageAggregatorService: AgregaciÃ³n horaria/diaria/mensual        â”‚
â”‚   â”œâ”€â”€ UsagePricingService: CÃ¡lculo precios por regla + tiers           â”‚
â”‚   â”œâ”€â”€ UsageStripeSyncService: Sync usage records a Stripe Billing      â”‚
â”‚   â”œâ”€â”€ UsageAlertService: Alertas umbrales por tenant/mÃ©trica           â”‚
â”‚   â”œâ”€â”€ QueueWorker: UsageAggregationWorker (Drupal Queue API)           â”‚
â”‚   â”œâ”€â”€ API REST: /api/v1/usage/* (dashboard + ingest + alerts)          â”‚
â”‚   â”œâ”€â”€ Tests: 3 unit test files                                         â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (v1.0 - 36 archivos)                       â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_integrations âœ… (Integration Marketplace + Developer Portal) â”‚
â”‚   â”œâ”€â”€ Entidades: ConnectorConfig, ConnectorInstance, WebhookEndpoint,  â”‚
â”‚   â”‚   IntegrationLog                                                    â”‚
â”‚   â”œâ”€â”€ RateLimiterService: Sliding window rate limiting por API key      â”‚
â”‚   â”œâ”€â”€ AppApprovalService: Workflow aprobaciÃ³n conectores terceros      â”‚
â”‚   â”œâ”€â”€ ConnectorSdkService: Scaffold para desarrolladores externos      â”‚
â”‚   â”œâ”€â”€ MarketplaceController: UI pÃºblica marketplace + bÃºsqueda         â”‚
â”‚   â”œâ”€â”€ DeveloperPortalController: Portal para desarrolladores           â”‚
â”‚   â”œâ”€â”€ API REST: /api/v1/integrations/*, OAuth callbacks                â”‚
â”‚   â”œâ”€â”€ Tests: 2 unit test files                                         â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (v2.0 - 66 archivos, extendido)            â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_customer_success âœ… (Customer Success + NPS + Health Scores) â”‚
â”‚   â”œâ”€â”€ Entidades: HealthScore, NpsSurvey, NpsResponse, ChurnRisk,      â”‚
â”‚   â”‚   ExpansionOpportunity                                              â”‚
â”‚   â”œâ”€â”€ HealthScoreService: Scoring multidimensional por tenant          â”‚
â”‚   â”œâ”€â”€ NpsSurveyService: Encuestas NPS + anÃ¡lisis sentiment             â”‚
â”‚   â”œâ”€â”€ ChurnPredictionService: PredicciÃ³n churn ML-ready               â”‚
â”‚   â”œâ”€â”€ CustomerSegmentationService: SegmentaciÃ³n por comportamiento    â”‚
â”‚   â”œâ”€â”€ ExpansionPipelineService: Pipeline expansiÃ³n + upsell            â”‚
â”‚   â”œâ”€â”€ API REST: /api/v1/customer-success/* (5+ controllers)            â”‚
â”‚   â”œâ”€â”€ Tests: 1 unit test file                                          â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (v2.0 - 65 archivos, extendido)            â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_security_compliance âœ… (Security + Compliance + Audit)       â”‚
â”‚   â”œâ”€â”€ Entidades: AuditLog (migrada), ComplianceAssessment,             â”‚
â”‚   â”‚   SecurityPolicy                                                    â”‚
â”‚   â”œâ”€â”€ PolicyEnforcerService: Enforcement polÃ­ticas de seguridad        â”‚
â”‚   â”œâ”€â”€ ComplianceTrackerService: Tracking estado SOC2/ISO/GDPR/ENS     â”‚
â”‚   â”œâ”€â”€ DataRetentionService: PolÃ­ticas retenciÃ³n datos + purge          â”‚
â”‚   â”œâ”€â”€ AuditLogService: Logging centralizado eventos seguridad          â”‚
â”‚   â”œâ”€â”€ Dashboard: SOC 2 readiness + audit trail export                  â”‚
â”‚   â”œâ”€â”€ Tests: 3 unit test files                                         â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (v1.0 - 40 archivos)                       â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_whitelabel âœ… (White-Label + Custom Domains + Reseller)      â”‚
â”‚   â”œâ”€â”€ Entidades: WhitelabelConfig, CustomDomain,                       â”‚
â”‚   â”‚   WhitelabelEmailTemplate, WhitelabelReseller                      â”‚
â”‚   â”œâ”€â”€ ConfigResolverService: ResoluciÃ³n config por tenant/dominio      â”‚
â”‚   â”œâ”€â”€ DomainManagerService: GestiÃ³n dominios custom + DNS verify       â”‚
â”‚   â”œâ”€â”€ EmailRendererService: Templates email con token replacement      â”‚
â”‚   â”œâ”€â”€ ResellerManagerService: GestiÃ³n resellers + comisiones           â”‚
â”‚   â”œâ”€â”€ WhitelabelRequestSubscriber: ResoluciÃ³n dominio en request       â”‚
â”‚   â”œâ”€â”€ Controllers: BrandingWizard, DomainManagement, EmailEditor,     â”‚
â”‚   â”‚   ResellerPortal, WhitelabelApi                                    â”‚
â”‚   â”œâ”€â”€ Tests: 2 unit test files                                         â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (v1.0 - 54 archivos)                       â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“¦ jaraba_credentials âœ… (Open Badge 3.0 â€” 5 Gaps cerrados)            â”‚
â”‚   â”œâ”€â”€ Sistema completo de credenciales verificables Open Badge 3.0     â”‚
â”‚   â”œâ”€â”€ 6 Content Entities (core):                                       â”‚
â”‚   â”‚   â”œâ”€â”€ IssuerProfile, CredentialTemplate, IssuedCredential          â”‚
â”‚   â”‚   â”œâ”€â”€ RevocationEntry (audit trail inmutable, reason enum)         â”‚
â”‚   â”‚   â”œâ”€â”€ CredentialStack (diplomas compuestos, min_required)          â”‚
â”‚   â”‚   â””â”€â”€ UserStackProgress (progreso %, auto-evaluaciÃ³n)             â”‚
â”‚   â”œâ”€â”€ 11 Servicios:                                                     â”‚
â”‚   â”‚   â”œâ”€â”€ CryptographyService (Ed25519), OpenBadgeBuilder (JSON-LD)    â”‚
â”‚   â”‚   â”œâ”€â”€ CredentialIssuer, CredentialVerifier (+RevocationEntry check)â”‚
â”‚   â”‚   â”œâ”€â”€ QrCodeGenerator, LmsCredentialsIntegration, PdfGenerator     â”‚
â”‚   â”‚   â”œâ”€â”€ RevocationService (revoke, isRevoked, history)              â”‚
â”‚   â”‚   â”œâ”€â”€ StackEvaluationService (auto-eval on credential issue)       â”‚
â”‚   â”‚   â”œâ”€â”€ StackProgressTracker (progress, recommended stacks)          â”‚
â”‚   â”‚   â””â”€â”€ AccessibilityAuditService (WCAG contrast, ARIA, audit)       â”‚
â”‚   â”œâ”€â”€ API REST: verify, verify_json, list, get, revoke,               â”‚
â”‚   â”‚   stacks (5 endpoints), emprendimiento (5), cross-vertical (3)     â”‚
â”‚   â”œâ”€â”€ Frontend: 5 Twig templates (ARIA), 4 SCSS (focus-visible,       â”‚
â”‚   â”‚   prefers-reduced-motion), 4 JS (keyboard nav, IntersectionObserver)â”‚
â”‚   â”œâ”€â”€ SubmÃ³dulo: jaraba_credentials_emprendimiento                     â”‚
â”‚   â”‚   â”œâ”€â”€ 15 credential template YAMLs (12 badges + 3 diplomas)       â”‚
â”‚   â”‚   â”œâ”€â”€ 3 Services: CredentialService, ExpertiseService (5 niveles), â”‚
â”‚   â”‚   â”‚   JourneyTracker (6 fases)                                     â”‚
â”‚   â”‚   â””â”€â”€ Diplomas: Basico â†’ Avanzado â†’ Transformador Digital Expert   â”‚
â”‚   â”œâ”€â”€ SubmÃ³dulo: jaraba_credentials_cross_vertical                     â”‚
â”‚   â”‚   â”œâ”€â”€ 2 Entities: CrossVerticalRule, CrossVerticalProgress         â”‚
â”‚   â”‚   â”œâ”€â”€ 2 Services: CrossVerticalEvaluator, VerticalActivityTracker  â”‚
â”‚   â”‚   â”œâ”€â”€ Rareza visual: common, rare, epic, legendary                 â”‚
â”‚   â”‚   â””â”€â”€ EvaluaciÃ³n: hook_entity_insert + cron diario (State API)     â”‚
â”‚   â”œâ”€â”€ PatrÃ³n: Hooks nativos (NO ECA YAML), anti-recursiÃ³n evidence     â”‚
â”‚   â”œâ”€â”€ WCAG 2.1 AA: focus-visible, reduced-motion, keyboard nav, ARIA  â”‚
â”‚   â””â”€â”€ Estado: âœ… ProducciÃ³n (v2.0 â€” 115 archivos, 8 entities, 16 svcs)â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 Interactive Content AI-Powered (jaraba_interactive)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INTERACTIVE CONTENT SYSTEM                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   Plugin Architecture (@InteractiveType)                                â”‚
â”‚   â”œâ”€â”€ InteractiveTypeManager (discovery + sorting)                     â”‚
â”‚   â”œâ”€â”€ InteractiveTypeBase (abstract: calculatePercentage, validate)    â”‚
â”‚   â””â”€â”€ InteractiveTypeInterface (contract: 8 methods)                   â”‚
â”‚       â”œâ”€â”€ QuestionSet (assessment, weight:0)                           â”‚
â”‚       â”œâ”€â”€ InteractiveVideo (media, weight:10)                          â”‚
â”‚       â”œâ”€â”€ CoursePresentation (interactive, weight:20)                  â”‚
â”‚       â”œâ”€â”€ BranchingScenario (interactive, weight:30)                   â”‚
â”‚       â”œâ”€â”€ DragAndDrop (assessment, weight:40)                          â”‚
â”‚       â””â”€â”€ Essay (assessment, weight:50)                                â”‚
â”‚                                                                         â”‚
â”‚   Services                                                              â”‚
â”‚   â”œâ”€â”€ Scorer (delegates to plugin calculateScore)                      â”‚
â”‚   â”œâ”€â”€ XApiEmitter (xAPI statements per type)                           â”‚
â”‚   â””â”€â”€ ContentGenerator (AI-powered content creation)                   â”‚
â”‚                                                                         â”‚
â”‚   EventSubscribers                                                      â”‚
â”‚   â”œâ”€â”€ CompletionSubscriber (XP + certifications, priority:100)         â”‚
â”‚   â””â”€â”€ XapiSubscriber (xAPI emission per type)                          â”‚
â”‚                                                                         â”‚
â”‚   Editor System                                                         â”‚
â”‚   â”œâ”€â”€ EditorController (zero-region frontend)                          â”‚
â”‚   â”œâ”€â”€ content-editor.js (orchestrator)                                 â”‚
â”‚   â”œâ”€â”€ preview-engine.js (iframe preview)                               â”‚
â”‚   â””â”€â”€ 6 type-specific editors (JS)                                     â”‚
â”‚                                                                         â”‚
â”‚   CRUD API (/api/v1/interactive/content)                               â”‚
â”‚   â”œâ”€â”€ POST / (create)                                                  â”‚
â”‚   â”œâ”€â”€ GET / (list + filter)                                            â”‚
â”‚   â”œâ”€â”€ PUT /{id} (update)                                               â”‚
â”‚   â”œâ”€â”€ PATCH /{id}/status (publish/archive)                             â”‚
â”‚   â”œâ”€â”€ DELETE /{id} (soft delete)                                       â”‚
â”‚   â””â”€â”€ POST /{id}/duplicate (clone)                                     â”‚
â”‚                                                                         â”‚
â”‚   Tests: 9 PHPUnit files, 100+ test methods                           â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.3 Tenant Marca Personal (pepejaraba.com)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PEPEJARABA.COM TENANT                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   Seed Script: scripts/seed_pepejaraba.php (766 LOC)                   â”‚
â”‚   â”œâ”€â”€ Vertical: Marca Personal                                         â”‚
â”‚   â”œâ”€â”€ SaasPlan: Personal Brand Premium                                 â”‚
â”‚   â”œâ”€â”€ Tenant: Pepe Jaraba - Marca Personal                            â”‚
â”‚   â”œâ”€â”€ Domain: pepejaraba.com                                           â”‚
â”‚   â””â”€â”€ Theme: #FF8C42 (orange) + #00A9A5 (teal)                       â”‚
â”‚                                                                         â”‚
â”‚   7 PageContent Pages (multiblock mode)                                â”‚
â”‚   â”œâ”€â”€ Homepage (/) â€” 7 sections                                        â”‚
â”‚   â”œâ”€â”€ Sobre MÃ­ (/sobre) â€” 3 sections                                  â”‚
â”‚   â”œâ”€â”€ Servicios (/servicios) â€” 2 sections (pricing table)             â”‚
â”‚   â”œâ”€â”€ Ecosistema (/ecosistema) â€” 2 sections (bento grid)              â”‚
â”‚   â”œâ”€â”€ Blog (/blog) â€” 2 sections                                       â”‚
â”‚   â”œâ”€â”€ Recursos (/recursos) â€” 2 sections                               â”‚
â”‚   â””â”€â”€ Contacto (/contacto) â€” 3 sections                               â”‚
â”‚                                                                         â”‚
â”‚   Navigation: SiteMenu (main) + 6 SiteMenuItems                       â”‚
â”‚   Config: domain.record + design_token_config YAMLs                    â”‚
â”‚   Infra: Nginx vhost + SSL Let's Encrypt + trusted_host_patterns      â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.4 Arquitectura de Theming (Federated Design Tokens)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    THEMING ARCHITECTURE                                  â”‚
â”‚                 Federated Design Tokens v2.1                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   SINGLE SOURCE OF TRUTH (SSOT)                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  ğŸ“¦ ecosistema_jaraba_core                                       â”‚  â”‚
â”‚   â”‚  â”œâ”€â”€ scss/_variables.scss    â†’ $ej-* (compile-time tokens)      â”‚  â”‚
â”‚   â”‚  â”œâ”€â”€ scss/_injectable.scss   â†’ var(--ej-*) (runtime tokens)     â”‚  â”‚
â”‚   â”‚  â””â”€â”€ 33 parciales SCSS       â†’ 7 dashboards, componentes        â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                          â”‚
â”‚                              â–¼                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                    MÃ“DULOS SATÃ‰LITE                              â”‚  â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚  â”‚
â”‚   â”‚  â”‚ page_builder â”‚ â”‚ interactive  â”‚ â”‚ credentials  â”‚             â”‚  â”‚
â”‚   â”‚  â”‚ 7 SCSS       â”‚ â”‚ 2 SCSS       â”‚ â”‚ 4 SCSS       â”‚             â”‚  â”‚
â”‚   â”‚  â”‚ package.json â”‚ â”‚ package.json â”‚ â”‚ package.json â”‚             â”‚  â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚  â”‚
â”‚   â”‚  Solo consumen: var(--ej-*, $fallback)                          â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                          â”‚
â”‚                              â–¼                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                    TEMA DRUPAL                                   â”‚  â”‚
â”‚   â”‚  ğŸ“¦ ecosistema_jaraba_theme                                      â”‚  â”‚
â”‚   â”‚  â”œâ”€â”€ 45 archivos SCSS      â†’ components, features               â”‚  â”‚
â”‚   â”‚  â”œâ”€â”€ SDC Components (2)    â†’ Card, Hero                         â”‚  â”‚
â”‚   â”‚  â”œâ”€â”€ Zero-Region Templates â†’ page--empleabilidad, --emprendimientoâ”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ Preprocess hooks      â†’ empleabilidad + emprendimiento      â”‚  â”‚
â”‚   â”‚  â””â”€â”€ InyecciÃ³n runtime     â†’ hook_page_attachments              â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚   MÃ‰TRICAS CONSOLIDACIÃ“N (Feb 2026):                                    â”‚
â”‚   âœ… 102 archivos SCSS documentados                                     â”‚
â”‚   âœ… 14 mÃ³dulos con package.json estandarizado                          â”‚
â”‚   âœ… 0 funciones darken()/lighten() deprecadas                          â”‚
â”‚   âœ… 100% mÃ³dulos satÃ©lite usando var(--ej-*)                           â”‚
â”‚                                                                         â”‚
â”‚   ğŸ“š DOCUMENTO DETALLADO:                                               â”‚
â”‚   docs/arquitectura/2026-02-05_arquitectura_theming_saas_master.md      â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. Inteligencia Artificial

### 8.1 Sistema de Agentes IA

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AGENTES DE IA                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                    â”‚   AGENT ORCHESTRATOR    â”‚                          â”‚
â”‚                    â”‚   (Coordinador Central) â”‚                          â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                â”‚                                        â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚        â–¼                       â–¼                       â–¼                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ ğŸ“          â”‚       â”‚ ğŸ“£          â”‚       â”‚ ğŸ’¬          â”‚          â”‚
â”‚   â”‚ Storytellingâ”‚       â”‚ Marketing   â”‚       â”‚ Customer    â”‚          â”‚
â”‚   â”‚ Agent       â”‚       â”‚ Agent       â”‚       â”‚ Experience  â”‚          â”‚
â”‚   â”‚             â”‚       â”‚             â”‚       â”‚ Agent       â”‚          â”‚
â”‚   â”‚ â€¢ BiografÃ­asâ”‚       â”‚ â€¢ CampaÃ±as  â”‚       â”‚ â€¢ Upselling â”‚          â”‚
â”‚   â”‚ â€¢ Historias â”‚       â”‚ â€¢ Posts     â”‚       â”‚ â€¢ Reminder  â”‚          â”‚
â”‚   â”‚ â€¢ Descrip.  â”‚       â”‚ â€¢ Email     â”‚       â”‚ â€¢ Support   â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                         â”‚
â”‚   AI SKILLS VERTICALES (30 predefinidas):                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  empleabilidad (7): cv_optimization, interview_preparation...  â”‚  â”‚
â”‚   â”‚  emprendimiento (7): canvas_coaching, pitch_deck_review...     â”‚  â”‚
â”‚   â”‚  agroconecta (6): product_listing_agro, seasonal_marketing...  â”‚  â”‚
â”‚   â”‚  comercioconecta (5): flash_offer_design, local_seo_content... â”‚  â”‚
â”‚   â”‚  serviciosconecta (5): case_summarization, client_comms...     â”‚  â”‚
â”‚   â”‚  Seed: scripts/seed_vertical_skills.php (1,647 LOC)           â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚   COPILOT EMPLEABILIDAD (6 modos):                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  EmployabilityCopilotAgent (extiende BaseAgent)                 â”‚  â”‚
â”‚   â”‚  profile_coach: OptimizaciÃ³n LinkedIn + personal branding       â”‚  â”‚
â”‚   â”‚  job_advisor: Estrategia bÃºsqueda + matching personalizado      â”‚  â”‚
â”‚   â”‚  interview_prep: SimulaciÃ³n entrevistas + feedback              â”‚  â”‚
â”‚   â”‚  learning_guide: Ruta formativa + skills gap analysis           â”‚  â”‚
â”‚   â”‚  application_helper: Cover letter + follow-up templates         â”‚  â”‚
â”‚   â”‚  faq: Preguntas frecuentes empleo EspaÃ±a                        â”‚  â”‚
â”‚   â”‚  DI: @ai.provider + @tenant_brand_voice + @observability        â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚   PROVEEDORES IA SOPORTADOS:                                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚   â”‚   OpenAI    â”‚  â”‚  Anthropic  â”‚  â”‚  Google AI  â”‚                    â”‚
â”‚   â”‚   GPT-4     â”‚  â”‚   Claude    â”‚  â”‚   Gemini    â”‚                    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 Knowledge Base RAG

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    KNOWLEDGE BASE RAG                                    â”‚
â”‚           (Retrieval-Augmented Generation)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                    FLUJO DE INDEXACIÃ“N                           â”‚  â”‚
â”‚   â”‚                                                                  â”‚  â”‚
â”‚   â”‚   Producto     â”€â”€â–¶   Chunking    â”€â”€â–¶   Embeddings   â”€â”€â–¶  Qdrant â”‚  â”‚
â”‚   â”‚   Guardado          (500 tokens)      (OpenAI 1536D)     Vector â”‚  â”‚
â”‚   â”‚                                                             DB   â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                    FLUJO DE BÃšSQUEDA                             â”‚  â”‚
â”‚   â”‚                                                                  â”‚  â”‚
â”‚   â”‚   "Â¿QuÃ© aceite     â”€â”€â–¶   Embedding   â”€â”€â–¶   Qdrant    â”€â”€â–¶  Top 5 â”‚  â”‚
â”‚   â”‚    recomendÃ¡is?"         Query           Search         Results â”‚  â”‚
â”‚   â”‚                                              â”‚                   â”‚  â”‚
â”‚   â”‚                                              â–¼                   â”‚  â”‚
â”‚   â”‚                                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚  â”‚
â”‚   â”‚                                      â”‚  LLM + RAG  â”‚             â”‚  â”‚
â”‚   â”‚                                      â”‚  Respuesta  â”‚             â”‚  â”‚
â”‚   â”‚                                      â”‚  Contextual â”‚             â”‚  â”‚
â”‚   â”‚                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚   ARQUITECTURA DUAL:                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚ ğŸ³ Lando (Desarrollo)  â”‚    â”‚ â˜ï¸ IONOS (ProducciÃ³n)   â”‚             â”‚
â”‚   â”‚ http://qdrant:6333     â”‚    â”‚ https://qdrant.cloud    â”‚             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                         â”‚
â”‚   FAQ BOT CONTEXTUAL (G114-4):                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚   Cliente      â”€â”€â–¶   Embedding   â”€â”€â–¶   Qdrant    â”€â”€â–¶  Scoring  â”‚  â”‚
â”‚   â”‚   /ayuda chat        Query           Search         3-tier     â”‚  â”‚
â”‚   â”‚                                                                  â”‚  â”‚
â”‚   â”‚   â‰¥0.75 â”€â”€â–¶ LLM Grounded (Haiku, max_tokens=512, temp=0.3)     â”‚  â”‚
â”‚   â”‚   0.55-0.75 â”€â”€â–¶ Baja confianza + sugerir contacto              â”‚  â”‚
â”‚   â”‚   <0.55 â”€â”€â–¶ EscalaciÃ³n con datos de contacto del negocio       â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. Seguridad y Cumplimiento

### 9.1 Capas de Seguridad

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SEGURIDAD MULTINIVEL                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   CAPA 1: INFRAESTRUCTURA                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  â€¢ HTTPS obligatorio (Let's Encrypt)                             â”‚  â”‚
â”‚   â”‚  â€¢ Firewall + Rate Limiting                                      â”‚  â”‚
â”‚   â”‚  â€¢ Backups automÃ¡ticos cada 4h                                   â”‚  â”‚
â”‚   â”‚  â€¢ Cifrado at-rest y in-transit                                  â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚   CAPA 2: APLICACIÃ“N                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  â€¢ Drupal Security Updates automÃ¡ticos                           â”‚  â”‚
â”‚   â”‚  â€¢ CSRF Protection                                               â”‚  â”‚
â”‚   â”‚  â€¢ XSS Prevention (Twig autoescape)                              â”‚  â”‚
â”‚   â”‚  â€¢ SQL Injection Prevention (DB API)                             â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚   CAPA 3: DATOS                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  â€¢ Aislamiento por Group Module                                  â”‚  â”‚
â”‚   â”‚  â€¢ API Keys en Key Module (config sync git-tracked)               â”‚  â”‚
â”‚   â”‚  â€¢ Config Sync: config/sync/ (589 YML, git-tracked)              â”‚  â”‚
â”‚   â”‚  â€¢ Logs sanitizados (sin datos sensibles)                        â”‚  â”‚
â”‚   â”‚  â€¢ AuditLog inmutable (eventos seguridad con IP, actor, tenant)  â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚   CAPA 4: COMPLIANCE (G115-1)                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  â€¢ Dashboard /admin/seguridad (25+ controles)                    â”‚  â”‚
â”‚   â”‚  â€¢ SOC 2 Type II + ISO 27001:2022 + ENS RD 311/2022 + GDPR      â”‚  â”‚
â”‚   â”‚  â€¢ VerificaciÃ³n security headers en tiempo real                  â”‚  â”‚
â”‚   â”‚  â€¢ Auto-refresh cada 30 segundos                                 â”‚  â”‚
â”‚   â”‚  â€¢ GDPR Drush: gdpr:export (Art.15), gdpr:anonymize (Art.17)    â”‚  â”‚
â”‚   â”‚  â€¢ Security CI: Daily Trivy + ZAP + SARIF (GitHub Security)      â”‚  â”‚
â”‚   â”‚  â€¢ Incident Response Playbook: SEV1-4, AEPD 72h                  â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.2 Hallazgos de AuditorÃ­a de Seguridad (2026-02-06)

> **Referencia:** [AuditorÃ­a Profunda SaaS Multidimensional v1](./tecnicos/auditorias/20260206-Auditoria_Profunda_SaaS_Multidimensional_v1_Claude.md)

La auditorÃ­a profunda multidimensional del 2026-02-06 identificÃ³ **9 hallazgos de seguridad** (5 crÃ­ticos + 4 altos):

| ID | Severidad | Hallazgo | Estado |
|----|-----------|----------|--------|
| SEC-01 | CRITICA | InyecciÃ³n de prompts vÃ­a configuraciÃ³n de tenant | Pendiente |
| SEC-02 | CRITICA | Webhook pÃºblico sin verificaciÃ³n de firma HMAC | Pendiente |
| SEC-03 | CRITICA | Claves Stripe en config DB en vez de env vars | Pendiente |
| SEC-04 | CRITICA | Qdrant sin autenticaciÃ³n por API key | Pendiente |
| SEC-05 | CRITICA | APIs pÃºblicas `/api/v1/*` sin autenticaciÃ³n | Pendiente |
| SEC-06 | ALTA | Rutas demo sin restricciÃ³n de tipo en parÃ¡metros | Pendiente |
| SEC-07 | ALTA | Mensajes de error internos expuestos al usuario | Pendiente |
| SEC-08 | ALTA | Sin configuraciÃ³n CORS ni CSP headers | Pendiente |
| SEC-09 | ALTA | Re-index sin verificaciÃ³n de tenant ownership | Pendiente |

**Nuevas directrices derivadas:**
- Toda clave API debe almacenarse en variables de entorno, nunca en configuraciÃ³n de Drupal
- Todo endpoint que invoque LLM/embedding debe tener rate limiting por tenant y usuario
- Toda interpolaciÃ³n en prompts del sistema debe sanitizarse contra whitelist
- Filtros Qdrant para tenant deben usar `must` (AND), nunca `should` (OR)

### 9.3 Cumplimiento GDPR

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CUMPLIMIENTO GDPR                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   DERECHOS ARCO-POL IMPLEMENTADOS:                                      â”‚
â”‚                                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ Derecho      â”‚ ImplementaciÃ³n                                   â”‚  â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚   â”‚ Acceso       â”‚ ExportaciÃ³n de datos en JSON/CSV                 â”‚  â”‚
â”‚   â”‚ RectificaciÃ³nâ”‚ EdiciÃ³n de perfil por usuario                    â”‚  â”‚
â”‚   â”‚ CancelaciÃ³n  â”‚ AnonimizaciÃ³n automÃ¡tica                         â”‚  â”‚
â”‚   â”‚ OposiciÃ³n    â”‚ Opt-out de comunicaciones                        â”‚  â”‚
â”‚   â”‚ Portabilidad â”‚ Descarga de datos en formato estÃ¡ndar            â”‚  â”‚
â”‚   â”‚ Olvido       â”‚ EliminaciÃ³n completa tras 30 dÃ­as                â”‚  â”‚
â”‚   â”‚ LimitaciÃ³n   â”‚ SuspensiÃ³n de procesamiento                      â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚   RETENCIÃ“N DE DATOS:                                                   â”‚
â”‚   â€¢ Datos de usuario: Hasta baja + 30 dÃ­as                              â”‚
â”‚   â€¢ Logs de acceso: 90 dÃ­as                                             â”‚
â”‚   â€¢ Backups: 30 dÃ­as                                                    â”‚
â”‚   â€¢ Datos fiscales: 7 aÃ±os (requisito legal)                            â”‚
â”‚                                                                         â”‚
â”‚   HERRAMIENTAS GDPR AUTOMATIZADAS:                                     â”‚
â”‚   â€¢ drush gdpr:export {uid}     â†’ Art. 15 Acceso (JSON)                â”‚
â”‚   â€¢ drush gdpr:anonymize {uid}  â†’ Art. 17 Olvido (hash replacement)    â”‚
â”‚   â€¢ drush gdpr:report           â†’ Informe compliance general           â”‚
â”‚   â€¢ Playbook: SECURITY_INCIDENT_RESPONSE_PLAYBOOK.md                   â”‚
â”‚   â€¢ AEPD notificaciÃ³n: 72h (GDPR Art. 33)                              â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 10. Infraestructura y DevOps

### 10.1 Entornos

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ENTORNOS                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                    DESARROLLO (Lando)                            â”‚  â”‚
â”‚   â”‚  â€¢ jaraba-saas.lndo.site                                         â”‚  â”‚
â”‚   â”‚  â€¢ qdrant.jaraba-saas.lndo.site                                  â”‚  â”‚
â”‚   â”‚  â€¢ Docker containers locales                                     â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                                             â”‚
â”‚                           â–¼ git push                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                    CI/CD (GitHub Actions)                        â”‚  â”‚
â”‚   â”‚  â€¢ Tests automÃ¡ticos                                             â”‚  â”‚
â”‚   â”‚  â€¢ Linting (PHPStan, ESLint)                                     â”‚  â”‚
â”‚   â”‚  â€¢ Build + Deploy                                                â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                                             â”‚
â”‚                           â–¼ deploy                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                    PRODUCCIÃ“N (IONOS)                            â”‚  â”‚
â”‚   â”‚  â€¢ jarabaimpact.com                                              â”‚  â”‚
â”‚   â”‚  â€¢ PHP 8.4 + MariaDB                                             â”‚  â”‚
â”‚   â”‚  â€¢ Qdrant Cloud                                                  â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.2 Pipeline CI/CD

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PIPELINE CI/CD                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   git push main                                                         â”‚
â”‚        â”‚                                                                â”‚
â”‚        â–¼                                                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚  Lint   â”‚â”€â”€â”€â–¶â”‚  Test   â”‚â”€â”€â”€â–¶â”‚Security â”‚â”€â”€â”€â–¶â”‚  Build  â”‚â”€â”€â”€â–¶â”‚Deployâ”‚  â”‚
â”‚   â”‚         â”‚    â”‚         â”‚    â”‚         â”‚    â”‚         â”‚    â”‚      â”‚  â”‚
â”‚   â”‚ PHPStan â”‚    â”‚ PHPUnit â”‚    â”‚Composer â”‚    â”‚Composer â”‚    â”‚ Git  â”‚  â”‚
â”‚   â”‚ ESLint  â”‚    â”‚ 80% cov â”‚    â”‚ Trivy   â”‚    â”‚  SCSS   â”‚    â”‚Drush â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚   + SECURITY SCAN (daily cron):                                        â”‚
â”‚   Trivy + OWASP ZAP + npm/composer audit â†’ SARIF â†’ GitHub Security     â”‚
â”‚                                                      â”‚                 â”‚
â”‚                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                        â–¼                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                     DEPLOY STEPS                                 â”‚  â”‚
â”‚   â”‚  1. git reset --hard origin/main                                 â”‚  â”‚
â”‚   â”‚  2. composer install --no-dev                                    â”‚  â”‚
â”‚   â”‚  3. drush updatedb -y                                            â”‚  â”‚
â”‚   â”‚  4. UUID sync (config vs site)                                   â”‚  â”‚
â”‚   â”‚  5. drush config:import -y  â† lee config/sync/ (git-tracked)    â”‚  â”‚
â”‚   â”‚  6. drush cache:rebuild                                          â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                        â”‚                               â”‚
â”‚                                        â–¼                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                     SLACK NOTIFICATIONS                          â”‚  â”‚
â”‚   â”‚  âœ… Deploy exitoso a producciÃ³n                                  â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.3 Monitoring Stack (Production Gaps v8.0.0)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MONITORING STACK                                    â”‚
â”‚                 Docker Compose Standalone                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚   â”‚                    METRICS (Prometheus :9090)                       â”‚â”‚
â”‚   â”‚  Scrape targets: drupal, mysql, qdrant, node, loki                 â”‚â”‚
â”‚   â”‚  14 alert rules: ServiceDown, HighErrorRate, SlowResponseTime,     â”‚â”‚
â”‚   â”‚  DatabaseConnectionPoolExhausted, QdrantDiskFull,                  â”‚â”‚
â”‚   â”‚  StripeWebhookFailures, SSLCertificateExpiring...                  â”‚â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                              â”‚                                          â”‚
â”‚                              â–¼                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚   â”‚                    VISUALIZATION (Grafana :3001)                    â”‚â”‚
â”‚   â”‚  Dashboards: Platform Overview, API Performance, Business KPIs     â”‚â”‚
â”‚   â”‚  Data sources: Prometheus + Loki                                   â”‚â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚ LOGS                      â”‚  â”‚ ALERTING                  â”‚           â”‚
â”‚   â”‚ Loki :3100 + Promtail    â”‚  â”‚ AlertManager :9093         â”‚           â”‚
â”‚   â”‚ drupal, php-fpm, nginx   â”‚  â”‚ criticalâ†’Slack+email       â”‚           â”‚
â”‚   â”‚ 720h retention, TSDB     â”‚  â”‚ warningâ†’Slack #alerts      â”‚           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                         â”‚
â”‚   FICHEROS:                                                            â”‚
â”‚   monitoring/docker-compose.monitoring.yml                              â”‚
â”‚   monitoring/prometheus/prometheus.yml + rules/jaraba_alerts.yml        â”‚
â”‚   monitoring/prometheus/rules/scaling_alerts.yml (F10)                  â”‚
â”‚     â””â”€â”€ 10 alert rules + 5 recording rules (3 fases escalado)          â”‚
â”‚   monitoring/loki/loki-config.yml                                      â”‚
â”‚   monitoring/promtail/promtail-config.yml                              â”‚
â”‚   monitoring/alertmanager/alertmanager.yml                              â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.4 Security CI Automatizado

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SECURITY SCAN PIPELINE                                â”‚
â”‚                 .github/workflows/security-scan.yml                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   Cron: daily 02:00 UTC                                                 â”‚
â”‚        â”‚                                                                â”‚
â”‚        â–¼                                                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚Composer â”‚â”€â”€â”€â–¶â”‚  npm    â”‚â”€â”€â”€â–¶â”‚  Trivy  â”‚â”€â”€â”€â–¶â”‚ OWASP   â”‚             â”‚
â”‚   â”‚ audit   â”‚    â”‚  audit  â”‚    â”‚  FS     â”‚    â”‚  ZAP    â”‚             â”‚
â”‚   â”‚         â”‚    â”‚         â”‚    â”‚  scan   â”‚    â”‚ baselineâ”‚             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                      â”‚                 â”‚
â”‚                                               SARIF Upload             â”‚
â”‚                                               GitHub Security          â”‚
â”‚                                                                         â”‚
â”‚   GDPR DRUSH COMMANDS:                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  drush gdpr:export {uid}     â†’ Art. 15 (Acceso) â€” JSON export  â”‚  â”‚
â”‚   â”‚  drush gdpr:anonymize {uid}  â†’ Art. 17 (Olvido) â€” Hash replace â”‚  â”‚
â”‚   â”‚  drush gdpr:report           â†’ Informe compliance general      â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚   INCIDENT RESPONSE:                                                   â”‚
â”‚   docs/tecnicos/SECURITY_INCIDENT_RESPONSE_PLAYBOOK.md                 â”‚
â”‚   SEV1-SEV4 matrix, AEPD 72h (GDPR Art. 33), templates comunicaciÃ³n   â”‚
â”‚                                                                         â”‚
â”‚   DEPENDABOT REMEDIATION (2026-02-14):                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  42 alertas â†’ 0 abiertas (2 critical + 14 high + 15 med + 11 low)â”‚
â”‚   â”‚  ValidaciÃ³n STAGING_URL pre-ZAP scan (AUDIT-SEC-N17)           â”‚  â”‚
â”‚   â”‚  npm overrides para deps transitivas bloqueadas por upstream   â”‚  â”‚
â”‚   â”‚  web/core/yarn.lock â†’ dismiss documentado (Drupal upstream)    â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.5 Go-Live Procedures

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GO-LIVE RUNBOOK                                       â”‚
â”‚                 scripts/golive/ + docs/tecnicos/                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   SCRIPTS EJECUTABLES:                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  01_preflight_checks.sh  â”‚ 24 validaciones pre-lanzamiento     â”‚  â”‚
â”‚   â”‚  (PHP, MariaDB, Redis, Qdrant, Stripe, SSL, DNS, mÃ³dulos)      â”‚  â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚   â”‚  02_validation_suite.sh  â”‚ Smoke tests por vertical, API,      â”‚  â”‚
â”‚   â”‚  CSRF checks, endpoint health                                   â”‚  â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚   â”‚  03_rollback.sh          â”‚ Rollback automatizado 7 pasos       â”‚  â”‚
â”‚   â”‚  con notificaciones Slack                                       â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚   FASES RUNBOOK:                                                       â”‚
â”‚   1. Pre-Go-Live (24h antes)  â†’ preflight_checks.sh                   â”‚
â”‚   2. Deploy                    â†’ git pull, composer, drush              â”‚
â”‚   3. ValidaciÃ³n                â†’ validation_suite.sh                   â”‚
â”‚   4. Go/No-Go                  â†’ Criterios cuantitativos               â”‚
â”‚   5. Soft Launch               â†’ 10% trÃ¡fico, monitoring               â”‚
â”‚   6. Public Launch             â†’ 100% trÃ¡fico                          â”‚
â”‚                                                                         â”‚
â”‚   DOCUMENTO: docs/tecnicos/GO_LIVE_RUNBOOK.md (708 LOC, RACI)         â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.6 Per-Tenant Backup/Restore (F10 Scaling Infrastructure)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PER-TENANT BACKUP/RESTORE                             â”‚
â”‚                 scripts/restore_tenant.sh                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   COMANDOS:                                                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  ./restore_tenant.sh backup <tenant_id>   â†’ Backup completo    â”‚  â”‚
â”‚   â”‚  ./restore_tenant.sh restore <tenant_id> <file>  â†’ Restore     â”‚  â”‚
â”‚   â”‚  ./restore_tenant.sh list <tenant_id>     â†’ Lista backups      â”‚  â”‚
â”‚   â”‚  ./restore_tenant.sh tables               â†’ Lista tablas       â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚   AUTO-DISCOVERY: INFORMATION_SCHEMA query para encontrar 159+         â”‚
â”‚   tablas con columna tenant_id. Zero hardcoding.                       â”‚
â”‚                                                                         â”‚
â”‚   ENTORNOS: ENVIRONMENT=lando (default) | ENVIRONMENT=ionos (prod)    â”‚
â”‚                                                                         â”‚
â”‚   ESCALADO HORIZONTAL (3 Fases):                                       â”‚
â”‚   docs/arquitectura/scaling-horizontal-guide.md                        â”‚
â”‚   Fase 1: Single Server IONOS L-16 (â‰¤50 tenants)                      â”‚
â”‚   Fase 2: Separated DB (â‰¤200 tenants)                                  â”‚
â”‚   Fase 3: Load Balanced HAProxy + Redis Cluster (1000+ tenants)        â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.7 Testing Infrastructure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TESTING INFRASTRUCTURE                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   UNIT TESTS (PHPUnit 11):                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  789+ tests (730 pass, Unit + Kernel + Functional)              â”‚  â”‚
â”‚   â”‚  Coverage threshold: 80% (enforced in CI)                       â”‚  â”‚
â”‚   â”‚  Codecov upload + GitHub annotations                            â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚   PERFORMANCE (k6):                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  tests/performance/load_test.js                                 â”‚  â”‚
â”‚   â”‚  Scenarios: smoke (1 VU) â†’ load (50 VUs) â†’ stress (200 VUs)    â”‚  â”‚
â”‚   â”‚  Endpoints: homepage, login, API skills, checkout               â”‚  â”‚
â”‚   â”‚  Thresholds: p95 < 500ms, error rate < 1%                      â”‚  â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚   â”‚  tests/performance/multi_tenant_load_test.js (F10)              â”‚  â”‚
â”‚   â”‚  4 Scenarios: multi_tenant_api, crm_pipeline, tenant_isolation, â”‚  â”‚
â”‚   â”‚  scaling_breakpoint (ramp to 100 VUs)                           â”‚  â”‚
â”‚   â”‚  7 Custom metrics: per-API category + tenant isolation failures â”‚  â”‚
â”‚   â”‚  Thresholds: crm p95<500ms, isolation failures=0                â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚   VISUAL REGRESSION (BackstopJS):                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  tests/visual/backstop.json                                     â”‚  â”‚
â”‚   â”‚  10 pÃ¡ginas Ã— 3 viewports (375px, 768px, 1440px)               â”‚  â”‚
â”‚   â”‚  Puppeteer engine, misMatchThreshold 0.1-0.5                   â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚   E2E (Cypress):                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  12 suites, ~670 lÃ­neas                                         â”‚  â”‚
â”‚   â”‚  Canvas editor, dashboard, AI panel, multi-tenant, a11y         â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.7 Email System (MJML Templates)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EMAIL TEMPLATE SYSTEM                                 â”‚
â”‚                 jaraba_email module                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   TEMPLATES MJML (35 transaccionales + 1 base):                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  auth/       (5) verify, welcome, password_reset/changed, login â”‚  â”‚
â”‚   â”‚  billing/    (7) invoice, payment_failed, subscription,         â”‚  â”‚
â”‚   â”‚                   upgrade, trial, cancel, dunning               â”‚  â”‚
â”‚   â”‚  marketplace/(6) order_confirmed, new_order_seller, shipped,    â”‚  â”‚
â”‚   â”‚                   delivered, payout, review                     â”‚  â”‚
â”‚   â”‚  empleabilidad/(10) job_match, application, new_application,    â”‚  â”‚
â”‚   â”‚                      shortlisted, expired + seq_onboarding,     â”‚  â”‚
â”‚   â”‚                      seq_reactivation, seq_upsell,              â”‚  â”‚
â”‚   â”‚                      seq_interview_prep, seq_post_hire           â”‚  â”‚
â”‚   â”‚  emprendimiento/(6) welcome_entrepreneur, diagnostic_completed, â”‚  â”‚
â”‚   â”‚                      canvas_milestone, experiment_result,       â”‚  â”‚
â”‚   â”‚                      mentor_matched, weekly_progress            â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚   FLUJO:                                                               â”‚
â”‚   template_id â”€â”€â–¶ TemplateLoaderService â”€â”€â–¶ {{ variables }}            â”‚
â”‚                         â”‚                       â”‚                      â”‚
â”‚                         â–¼                       â–¼                      â”‚
â”‚                   MJML file              MjmlCompilerService           â”‚
â”‚                                               â”‚                        â”‚
â”‚                                               â–¼                        â”‚
â”‚                                         HTML responsive                â”‚
â”‚                                                                         â”‚
â”‚   SERVICIO: jaraba_email.template_loader                               â”‚
â”‚   COMPILER: jaraba_email.mjml_compiler                                 â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 11. Roadmap

### 11.1 Estado Actual

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      NIVEL DE MADUREZ                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   Nivel 1: Inicial              â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  100%  â”‚
â”‚   Nivel 2: Documentada          â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  100%  â”‚
â”‚   Nivel 3: Gestionada           â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  100%  â”‚
â”‚   Nivel 4: Optimizada           â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  100%  â”‚
â”‚   Nivel 5: Adaptativa           â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  100%  â”‚
â”‚                                                                         â”‚
â”‚                         NIVEL ACTUAL: 5.0 / 5.0                         â”‚
â”‚                                                                         â”‚
â”‚   Plan Cierre Gaps Clase Mundial: 12/12 Fases Completadas              â”‚
â”‚   F1-F8: ECA, Freemium, Visitor, Landing, Onboarding, Admin, Elena,   â”‚
â”‚          Merchant Copilot                                               â”‚
â”‚   F9: B2B Sales Flow (BANT + SalesPlaybook)                            â”‚
â”‚   F10: Scaling Infra (restore_tenant + k6 + Prometheus)                â”‚
â”‚   F11: IA Clase Mundial (Brand Voice + Prompt A/B + MultiModal)        â”‚
â”‚   F12: Lenis Integration Premium (smooth scroll)                       â”‚
â”‚                                                                         â”‚
â”‚   Sprint Diferido Backlog: 22/22 TODOs resueltos (5 fases)             â”‚
â”‚   FASE 1: Quick Wins (pricing, ratings, canvas, player review)         â”‚
â”‚   FASE 2: UX Sprint 5 (header SaaS, i18n, dynamic fields, a11y)       â”‚
â”‚   FASE 3: Knowledge Base CRUD (FAQs, policies, documents)              â”‚
â”‚   FASE 4: Infraestructura (agent re-exec, tests, webhooks, entities)   â”‚
â”‚   FASE 5: Integraciones (tokens V2.1, batch dispatch, stock, GEO)      â”‚
â”‚                                                                         â”‚
â”‚   Admin Center Premium (Spec f104): 7/7 FASEs completadas              â”‚
â”‚   FASE 1: Shell Layout (sidebar + topbar + aggregator)                 â”‚
â”‚   FASE 2: DataTable reusable + Tenants page                           â”‚
â”‚   FASE 3: Users page + Avatar Detection                               â”‚
â”‚   FASE 4: Finance Centro (MRR, ARPU, Churn, LTV)                      â”‚
â”‚   FASE 5: Alerts & Playbooks (FocAlert + CsPlaybook)                  â”‚
â”‚   FASE 6: Analytics + Logs (Chart.js, AI Telemetry)                    â”‚
â”‚   FASE 7: Settings + Dark Mode + A11y WCAG 2.1 AA                     â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 11.2 Hitos 2026

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        HITOS 2026                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   ENE â”€â”€â—â”€â”€ KB RAG Qdrant operativo âœ…                                  â”‚
â”‚         â”‚                                                               â”‚
â”‚   ENE â”€â”€â—â”€â”€ FOC v2 DiseÃ±o + DocumentaciÃ³n ğŸ”„                             â”‚
â”‚         â”‚                                                               â”‚
â”‚   FEB â”€â”€â—â”€â”€ FOC Fase 1: Entidades Financieras                           â”‚
â”‚         â”‚                                                               â”‚
â”‚   FEB â”€â”€â—â”€â”€ FOC Fase 2: Stripe Connect Destination Charges              â”‚
â”‚         â”‚                                                               â”‚
â”‚   MAR â”€â”€â—â”€â”€ Game Day #1 Chaos Engineering                               â”‚
â”‚         â”‚                                                               â”‚
â”‚   ABR â”€â”€â—â”€â”€ FOC Fase 3: Motor Proyecciones PHP-ML                       â”‚
â”‚         â”‚                                                               â”‚
â”‚   MAY â”€â”€â—â”€â”€ FOC Fase 4: Alertas ECA + Playbooks                         â”‚
â”‚         â”‚                                                               â”‚
â”‚   JUN â”€â”€â—â”€â”€ Predictive Capacity Planning                                â”‚
â”‚         â”‚                                                               â”‚
â”‚   SEP â”€â”€â—â”€â”€ Game Day #2                                                 â”‚
â”‚         â”‚                                                               â”‚
â”‚   DIC â”€â”€â—â”€â”€ NIVEL 5.0 CERTIFICADO â­                                    â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```


---

## 12. Estado de AuditorÃ­a (2026-02-15)

### 12.1 MÃ©tricas de la AuditorÃ­a Integral

La auditorÃ­a integral del 2026-02-13 analizÃ³ la plataforma desde 15 disciplinas simultÃ¡neas, cubriendo 62 mÃ³dulos custom, 268 Content Entities y ~769 rutas API.

| DimensiÃ³n | Hallazgos | CrÃ­ticos | Altos | Medios | Bajos |
|-----------|-----------|----------|-------|--------|-------|
| **Seguridad** | 19 | 3 | 6 | 7 | 3 |
| **Rendimiento** | 17 | 3 | 5 | 6 | 3 |
| **Consistencia** | 20 | 1 | 7 | 8 | 4 |
| **Specs vs ImplementaciÃ³n** | 9 | 0 | 2 | 5 | 2 |
| **TOTAL** | **65** | **7** | **20** | **26** | **12** |

### 12.2 EvaluaciÃ³n de Madurez Post-RemediaciÃ³n

La madurez se eleva de 4.5/5.0 a **4.9/5.0** tras completar FASE 1 (7 CrÃ­ticos) y FASE 2 (8 Altos) de la remediaciÃ³n:

| Ãrea | Pre-RemediaciÃ³n | Post-RemediaciÃ³n | Cambios Realizados |
|------|-----------------|------------------|-------------------|
| Multi-Tenancy | 4.5 | **5.0** | AccessControlHandler en 34 entidades, tenant_id migrado a entity_reference en 6 entidades, TenantContextService deduplicado |
| Seguridad | 4.0 | **4.8** | HMAC en webhooks (Stripe + WhatsApp), `_permission` en 100+ rutas, `\|raw` sanitizado server-side. Pendiente: PKCE, rate limiting, SAST |
| Rendimiento | 4.0 | **4.8** | Ãndices DB en entidades de alto volumen, LockBackendInterface financiero, social publish async, caching en 6 servicios, 4 cronâ†’QueueWorker. Pendiente: CDN, lazy-load images |
| Consistencia | 4.5 | **4.8** | Servicios duplicados eliminados, PUTâ†’PATCH estandarizado, config schemas, @importâ†’@use, core_version unificado. Pendiente: 303 CSS --ej-*, 76 rutas sin /api/v1/, 28 formatos JSON |
| CÃ³digo | 5.0 | **5.0** | EstÃ¡ndares PHP 8.4 / Drupal 11 correctos |
| Frontend | 4.5 | **4.8** | @importâ†’@use completado, Drupal.behaviors parcial. Pendiente: 303 CSS custom properties |
| IA/ML | 5.0 | **5.0** | Agentes, RAG, guardrails implementados |
| **Promedio** | **4.5** | **4.9** | **23/65 hallazgos resueltos (7 CrÃ­ticos + 8 Altos + 8 Medios)** |

### 12.3 ElevaciÃ³n Verticales a Clase Mundial (2026-02-15)

| Vertical | Fases | Estado | Servicios Nuevos | Archivos |
|----------|-------|--------|-----------------|----------|
| **Empleabilidad** | 10/10 | âœ… Clase Mundial | EmployabilityFeatureGateService, EmployabilityEmailSequenceService, EmployabilityCrossVerticalBridgeService, EmployabilityJourneyProgressionService, EmployabilityHealthScoreService, EmployabilityCopilotAgent, CopilotApiController, TemplateLoaderService | 34+ archivos |
| **Emprendimiento** | 6/6 + v2 (7 gaps) | âœ… Clase Mundial (Paridad) | EmprendimientoFeatureGateService, EmprendimientoExperimentService, EmprendimientoHealthScoreService, EmprendimientoJourneyProgressionService, EmprendimientoEmailSequenceService, EmprendimientoCopilotAgent, EmprendimientoCrossVerticalBridgeService | 25+ archivos |

**Empleabilidad (10 Fases):**
1. Clean Page Templates (Zero Region + FAB)
2. Sistema Modal CRUD (data-dialog-type)
3. SCSS Compliance (45+ rgbaâ†’color-mix)
4. Feature Gating (3 features Ã— 3 planes)
5. Upgrade Triggers (4 trigger types)
6. Email Sequences (5 secuencias MJML)
7. CRM Integration (7 estados pipeline)
8. Cross-Vertical Bridges (4 bridges)
9. AI Journey Progression Proactiva (7 reglas)
10. Health Scores + KPIs (5 dimensiones + 8 KPIs)

**Emprendimiento v2 â€” Paridad con Empleabilidad (7 Gaps):**
1. Health Score (5 dimensiones: canvas_completeness 25%, hypothesis_validation 30%, experiment_velocity 15%, copilot_engagement 15%, funding_readiness 15% + 8 KPIs)
2. Journey Progression Proactiva (7 reglas: inactivity_discovery, canvas_incomplete, hypothesis_stalled, all_killed_no_pivot, mvp_validated_no_mentor, funding_eligible, post_scaling_expansion)
3. Email Sequences (5 secuencias MJML: SEQ_ENT_001-005 onboarding, canvas abandonment, upsell starter, MVP celebration, post-funding)
4. Copilot Agent (6 modos: business_strategist, financial_advisor, customer_discovery_coach, pitch_trainer, ecosystem_connector, faq)
5. Cross-Vertical Bridges (3 salientes: formacion, servicios, comercio)
6. CRM Sync Pipeline (7 estados: idea_registeredâ†’lead, diagnosticâ†’mql, bmcâ†’sql, mvpâ†’demo, fundingâ†’proposal, scalingâ†’closed_won, abandonedâ†’closed_lost)
7. Upgrade Triggers (5 nuevos: canvas_completed 0.38, first_hypothesis_validated 0.42, mentor_matched 0.35, experiment_success 0.40, funding_eligible 0.45)

### 12.4 Dependabot Security Posture (2026-02-14)

| MÃ©trica | Antes | DespuÃ©s |
|---------|-------|---------|
| **Critical** | 2 | **0** |
| **High** | 14 | **0** |
| **Medium** | 15 | **0** |
| **Low** | 11 | **0** (1 dismissed â€” Drupal upstream) |
| **Total abiertas** | 42 | **0** |

**TÃ©cnicas aplicadas:**
- `npm audit fix` para dependencias directas en lockfiles contrib
- `npm audit fix --force` para major bumps en devDependencies (ckeditor5-dev-utils 30â†’49)
- `overrides` en package.json para transitivas bloqueadas por upstream (mochaâ†’diff ^7â†’^8.0.3)
- Dismiss documentado para `web/core/yarn.lock` (webpack â€” mantenido por Drupal upstream)

### 12.4 Referencias

| Documento | UbicaciÃ³n |
|-----------|-----------|
| AuditorÃ­a Integral Estado SaaS v1 | `docs/tecnicos/auditorias/20260213-Auditoria_Integral_Estado_SaaS_v1_Claude.md` |
| Plan de RemediaciÃ³n v1 | `docs/implementacion/20260213-Plan_Remediacion_Auditoria_Integral_v1.md` |
| Aprendizajes AuditorÃ­a Integral | `docs/tecnicos/aprendizajes/2026-02-13_auditoria_integral_estado_saas.md` |
| Aprendizajes Security CI + Dependabot | `docs/tecnicos/aprendizajes/2026-02-14_security_ci_dependabot_remediation.md` |
| Directrices v21.0.0 (11 reglas AUDIT-*) | `docs/00_DIRECTRICES_PROYECTO.md` |

---

## ğŸ“ Referencias

| Documento | UbicaciÃ³n |
|-----------|-----------|
| Directrices del Proyecto | `docs/00_DIRECTRICES_PROYECTO.md` |
| Ãndice General | `docs/00_INDICE_GENERAL.md` |
| Arquitectura Alto Nivel | `docs/arquitectura/2026-01-09_1902_arquitectura-alto-nivel.md` |
| Planes SaaS | `docs/logica/2026-01-09_1908_definicion-planes-saas.md` |
| Roadmap Nivel 5 | `docs/planificacion/2026-01-11_1503_roadmap-nivel5-arquitectura.md` |
| GuÃ­a KB RAG | `docs/tecnicos/20260111-Guia_Tecnica_KB_RAG_Qdrant.md` |
| Documento FOC v2 | `docs/tecnicos/20260113d-FOC_Documento_Tecnico_Definitivo_v2_Claude.md` |
| README FOC (API) | `web/modules/custom/jaraba_foc/README.md` |
| **Plan EstratÃ©gico v4.0** | `docs/planificacion/20260114-Plan_Estrategico_SaaS_Q1Q4_2026.md` |
| **AuditorÃ­a Profunda SaaS v1** | `docs/tecnicos/auditorias/20260206-Auditoria_Profunda_SaaS_Multidimensional_v1_Claude.md` |
| **Plan ElevaciÃ³n Page Builder v1.2** â­ | `docs/arquitectura/2026-02-08_plan_elevacion_page_builder_clase_mundial.md` |
| **Aprendizajes ElevaciÃ³n Page Builder** | `docs/tecnicos/aprendizajes/2026-02-08_elevacion_page_builder_clase_mundial.md` |
| **Aprendizajes AuditorÃ­a v2.1** â­ | `docs/tecnicos/aprendizajes/2026-02-09_auditoria_v2_falsos_positivos_page_builder.md` |
| **Plan v2.1 Falsos Positivos** â­ | `docs/planificacion/20260209-Plan_Elevacion_Page_Site_Builder_v2.md` |
| **Aprendizajes AuditorÃ­a** | `docs/tecnicos/aprendizajes/2026-02-06_auditoria_profunda_saas_multidimensional.md` |
| **Aprendizajes PHPUnit 11** â­ | `docs/tecnicos/aprendizajes/2026-02-11_phpunit11_kernel_test_remediation.md` |
| **Aprendizajes Sprint C4 IA Page Builder** â­ | `docs/tecnicos/aprendizajes/2026-02-11_sprint_c4_ia_asistente_page_builder.md` |
| **Plan ServiciosConecta Fase 1** â­ | `docs/implementacion/20260209-Plan_Implementacion_ServiciosConecta_v1.md` |
| **Aprendizajes ServiciosConecta** | `docs/tecnicos/aprendizajes/2026-02-09_servicios_conecta_fase1_implementation.md` |
| **Plan Maestro Unificado v3.0** â­ | `docs/planificacion/20260123-Plan_Maestro_Unificado_SaaS_v3_Claude.md` |
| **Bloque G: AI Skills System** â­ | `docs/implementacion/20260123g-Bloque_G_AI_Skills_Implementacion_Claude.md` |
| **AuditorÃ­a Gap Q1 2027** | `docs/tecnicos/20260115g-Auditoria_Gap_Arquitectura_v1_Claude.md` |
| **Mapeo ArquitectÃ³nico Integral** | `docs/arquitectura/2026-01-19_1858_mapeo-arquitectonico-integral-saas.md` |
| **Vertical Emprendimiento Gap Analysis** | `docs/tecnicos/20260115h-Gap_Analysis_Documentacion_Tecnica_Emprendimiento_v1_Claude.md` |
| **Copiloto v2 Especificaciones** | `docs/tecnicos/20260121a-Especificaciones_Tecnicas_Copiloto_v2_Claude.md` |
| **Programa AndalucÃ­a +ei** | `docs/tecnicos/20260115c-Programa%20Maestro%20Andaluc%C3%ADa%20+ei%20V2.0_Gemini.md` |
| **Aprendizajes Avatar + Empleabilidad** â­ | `docs/tecnicos/aprendizajes/2026-02-12_avatar_empleabilidad_activation.md` |
| **Aprendizajes Self-Discovery Entities + Services** â­ | `docs/tecnicos/aprendizajes/2026-02-12_self_discovery_content_entities_services.md` |
| **Plan Cierre Gaps Specs 20260122-25** â­ | `docs/implementacion/2026-02-12_Plan_Cierre_Gaps_Specs_20260122_20260125.md` |
| **Aprendizajes Heatmaps + Tracking Fases 1-5** â­ | `docs/tecnicos/aprendizajes/2026-02-12_heatmaps_tracking_phases_1_5.md` |
| **AuditorÃ­a Integral Estado SaaS v1** â­ | `docs/tecnicos/auditorias/20260213-Auditoria_Integral_Estado_SaaS_v1_Claude.md` |
| **Plan RemediaciÃ³n AuditorÃ­a Integral v1** â­ | `docs/implementacion/20260213-Plan_Remediacion_Auditoria_Integral_v1.md` |
| **Aprendizajes AuditorÃ­a Integral** â­ | `docs/tecnicos/aprendizajes/2026-02-13_auditoria_integral_estado_saas.md` |
| **Plan Sprint Diferido (22 TODOs, 5 fases)** â­ | `docs/implementacion/20260213-Plan_Implementacion_Sprint_Diferido_v1.md` |
| **Aprendizajes Sprint Diferido** â­ | `docs/tecnicos/aprendizajes/2026-02-13_sprint_diferido_22_todos_5_fases.md` |
| **Plan ElevaciÃ³n Empleabilidad v1** â­ | `docs/implementacion/2026-02-15_Plan_Elevacion_Clase_Mundial_Vertical_Empleabilidad_v1.md` |
| **Aprendizajes ElevaciÃ³n Empleabilidad 10 Fases** â­ | `docs/tecnicos/aprendizajes/2026-02-15_empleabilidad_elevacion_10_fases.md` |
| **Aprendizajes ElevaciÃ³n Emprendimiento 6 Fases** â­ | `docs/tecnicos/aprendizajes/2026-02-15_emprendimiento_elevacion_6_fases.md` |
| **Plan Emprendimiento v2 Paridad 7 Gaps** â­ | `docs/implementacion/20260215-Plan_Elevacion_Emprendimiento_v2_Paridad_Empleabilidad_7_Gaps.md` |
| **Aprendizajes Emprendimiento Paridad 7 Gaps** â­ | `docs/tecnicos/aprendizajes/2026-02-15_emprendimiento_paridad_empleabilidad_7_gaps.md` |

---

## ğŸ“Š Plan Maestro v3.0 (AuditorÃ­a 2026-01-23)

| Bloque | DescripciÃ³n | Horas |
|--------|-------------|-------|
| **A** | Gaps AuditorÃ­a: SEPE, Frontend, AgroConecta, ExpansiÃ³n | 1,690h |
| **B** | Copiloto v3: Osterwalder/Blank | 96h |
| **C** | Journey Engine: 19 avatares, 7 estados | 530h |
| **D** | Admin Center: 8 mÃ³dulos premium | 635h |
| **E** | Training System: 6 peldaÃ±os certificaciÃ³n | 124h |
| **F** | AI Content Hub: Blog, Newsletter, AI Writing | 340-410h |
| **G** | AI Skills System: EspecializaciÃ³n agentes IA | 200-250h |
| **TOTAL** | **7 bloques, 24 meses** | **~4,500h** |

---

> **VersiÃ³n:** 26.0.0 | **Fecha:** 2026-02-15 | **Autor:** IA Asistente

