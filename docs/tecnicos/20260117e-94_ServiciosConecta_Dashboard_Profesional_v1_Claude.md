DASHBOARD PROFESIONAL
Centro de Comando para el Profesional de Servicios
Vista Unificada + MÃ©tricas de Productividad + Agenda Inteligente
Vertical ServiciosConecta - JARABA IMPACT PLATFORM
VersiÃ³n:	1.0
Fecha:	Enero 2026
Estado:	EspecificaciÃ³n TÃ©cnica
CÃ³digo:	94_ServiciosConecta_Dashboard_Profesional
Dependencias:	Todos los mÃ³dulos anteriores (82-93)
Usuario:	Profesional individual (abogado, asesor, gestor...)
Prioridad:	ALTA - Punto de entrada diario del profesional
â€ƒ
1. Resumen Ejecutivo
El Dashboard Profesional es la pantalla de inicio del dÃ­a para cada profesional. En una sola vista muestra todo lo que necesita saber: citas de hoy, consultas urgentes pendientes, expedientes activos prioritarios, documentos que esperan su acciÃ³n, mÃ©tricas de productividad y alertas importantes. El objetivo es que el profesional sepa exactamente quÃ© hacer al empezar su jornada sin tener que navegar por mÃºltiples pantallas.
Este dashboard complementa al Dashboard Admin (doc 95), que ofrece visiÃ³n agregada del despacho completo. AquÃ­ el foco es el profesional individual: su carga de trabajo, su rendimiento, sus pendientes. La informaciÃ³n se actualiza en tiempo real y las alertas son proactivas, no reactivas.
1.1 El Problema: InformaciÃ³n Fragmentada
SituaciÃ³n Actual	Problema	Consecuencia
MÃºltiples herramientas	Calendario en Google, casos en Excel, emails en Outlook	15-20 min cada maÃ±ana para saber quÃ© hacer
Sin priorizaciÃ³n	Todo parece igual de urgente	Se atiende lo Ãºltimo, no lo importante
Alertas perdidas	Deadlines enterrados en emails o notas	Multas, prescripciones, clientes insatisfechos
Sin visibilidad de carga	No se sabe cuÃ¡ntos casos activos hay	Sobrecarga o infrautilizaciÃ³n
MÃ©tricas inexistentes	No se mide productividad ni resultados	Imposible mejorar lo que no se mide

1.2 La SoluciÃ³n: Centro de Comando Unificado
â€¢	Vista de hoy: Citas, tareas urgentes, plazos que vencen
â€¢	Consultas entrantes: Triaje automÃ¡tico con urgencia y categorÃ­a
â€¢	Expedientes prioritarios: Los que requieren acciÃ³n inmediata
â€¢	Documentos pendientes: Solicitudes de cliente esperando, entregas por revisar
â€¢	Alertas y deadlines: Plazos crÃ­ticos, citas sin confirmar, facturas pendientes
â€¢	MÃ©tricas personales: Casos abiertos/cerrados, tiempo de respuesta, facturaciÃ³n
â€¢	Copilot integrado: Asistente AI siempre disponible en sidebar
â€ƒ
2. Estructura del Dashboard
2.1 Layout General
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ  Dashboard    ğŸ“‹ Expedientes    ğŸ“¥ Consultas    ğŸ“… Agenda    ğŸ’¼ Clientes    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  Buenos dÃ­as, MarÃ­a                                         Viernes 17 Ene 2026â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  âš ï¸ ALERTAS                                                      â”‚          â”‚
â”‚  â”‚  ğŸ”´ Caso GarcÃ­a: Plazo judicial vence maÃ±ana                     â”‚          â”‚
â”‚  â”‚  ğŸŸ¡ 3 consultas urgentes sin responder                           â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸ“Š MÃ‰TRICAS HOY      â”‚  â”‚  ğŸ“… AGENDA HOY        â”‚  â”‚  ğŸ“¥ CONSULTAS        â”‚â”‚
â”‚  â”‚                       â”‚  â”‚                       â”‚  â”‚                      â”‚â”‚
â”‚  â”‚  Casos activos: 23    â”‚  â”‚  09:00 ReuniÃ³n GarcÃ­a â”‚  â”‚  ğŸ”´ IVA urgente (5)  â”‚â”‚
â”‚  â”‚  Cerrados mes: 8      â”‚  â”‚  11:30 Cliente nuevo  â”‚  â”‚  ğŸŸ¡ Civil (3)        â”‚â”‚
â”‚  â”‚  Facturable: 4.200â‚¬   â”‚  â”‚  16:00 Firma LÃ³pez    â”‚  â”‚  ğŸŸ¢ Laboral (2)      â”‚â”‚
â”‚  â”‚  Resp. media: 2.1h    â”‚  â”‚                       â”‚  â”‚                      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸ“‹ EXPEDIENTES PRIORITARIOS      â”‚  â”‚  ğŸ“„ DOCUMENTOS PENDIENTES         â”‚  â”‚
â”‚  â”‚                                   â”‚  â”‚                                   â”‚  â”‚
â”‚  â”‚  ğŸ”´ EXP-2026-0142 GarcÃ­a (Plazo!) â”‚  â”‚  ğŸ“¤ 3 documentos listos entregar  â”‚  â”‚
â”‚  â”‚  ğŸŸ¡ EXP-2026-0138 MartÃ­nez (Docs) â”‚  â”‚  ğŸ“¥ 5 esperando subir de cliente  â”‚  â”‚
â”‚  â”‚  ğŸŸ¡ EXP-2026-0135 LÃ³pez (Firma)   â”‚  â”‚  âœï¸ 2 pendientes de firma         â”‚  â”‚
â”‚  â”‚  [Ver todos los expedientes]      â”‚  â”‚  [Ver todos los documentos]       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
2.2 Widgets Configurables
Widget	Contenido	ActualizaciÃ³n
Alertas CrÃ­ticas	Deadlines <48h, citas sin confirmar, urgencias nivel 5	Tiempo real (WebSocket)
Agenda del DÃ­a	Citas de hoy con hora, cliente, tipo, estado	Cada 5 minutos
Consultas Entrantes	Agrupadas por urgencia con triaje automÃ¡tico	Tiempo real
Expedientes Prioritarios	Top 5 por urgencia + motivo de prioridad	Cada 15 minutos
Documentos Pendientes	Por entregar, por recibir, por firmar	Cada 10 minutos
MÃ©tricas del DÃ­a/Semana	Casos activos, cerrados, facturaciÃ³n, tiempo respuesta	Cada hora
Presupuestos Pendientes	Enviados esperando respuesta, prÃ³ximos a expirar	Cada 30 minutos
Actividad Reciente	Timeline de Ãºltimas acciones del profesional	Tiempo real

â€ƒ
3. Modelo de Datos
3.1 Entidad: dashboard_config (ConfiguraciÃ³n Personal)
Campo	Tipo	DescripciÃ³n	Restricciones
id	Serial	ID interno	PRIMARY KEY
user_id	INT	Usuario propietario	FK users.uid, UNIQUE, NOT NULL
widget_layout	JSON	DisposiciÃ³n de widgets	[{widget_id, position, size, visible}]
alert_preferences	JSON	Preferencias de alertas	{deadline_hours, urgency_threshold...}
metrics_period	VARCHAR(16)	PerÃ­odo de mÃ©tricas	ENUM: day|week|month
default_view	VARCHAR(32)	Vista por defecto	ENUM: overview|calendar|cases
updated	DATETIME	Ãšltima actualizaciÃ³n	NOT NULL

3.2 Entidad: provider_alert (Alertas del Profesional)
Campo	Tipo	DescripciÃ³n	Restricciones
id	Serial	ID interno	PRIMARY KEY
user_id	INT	Profesional destino	FK users.uid, NOT NULL, INDEX
tenant_id	INT	Tenant	FK tenant.id, NOT NULL, INDEX
alert_type	VARCHAR(32)	Tipo de alerta	ENUM: deadline|inquiry|document|booking|quote|system
severity	VARCHAR(16)	Severidad	ENUM: critical|warning|info
title	VARCHAR(255)	TÃ­tulo de la alerta	NOT NULL
message	TEXT	Mensaje detallado	NOT NULL
related_type	VARCHAR(32)	Tipo de entidad relacionada	case|inquiry|booking|quote|document
related_id	INT	ID de entidad relacionada	NOT NULL
action_url	VARCHAR(255)	URL de acciÃ³n	NOT NULL
status	VARCHAR(16)	Estado de la alerta	ENUM: active|dismissed|resolved
expires_at	DATETIME	CuÃ¡ndo expira	NULLABLE
created	DATETIME	Fecha creaciÃ³n	NOT NULL

â€ƒ
4. Servicios Principales
4.1 DashboardService
<?php namespace Drupal\jaraba_dashboard\Service;

class DashboardService {
  
  public function getDashboardData(int $userId): DashboardData {
    return new DashboardData([
      'alerts' => $this->alertService->getActiveAlerts($userId),
      'today_bookings' => $this->bookingService->getTodayBookings($userId),
      'pending_inquiries' => $this->inquiryService->getPendingByUrgency($userId),
      'priority_cases' => $this->caseService->getPriorityCases($userId, 5),
      'pending_documents' => $this->documentService->getPendingActions($userId),
      'metrics' => $this->metricsService->getProviderMetrics($userId),
      'pending_quotes' => $this->quoteService->getPendingQuotes($userId),
      'recent_activity' => $this->activityService->getRecent($userId, 10),
    ]);
  }
  
  public function getWidgetData(int $userId, string $widgetId): array {
    return match($widgetId) {
      'alerts' => $this->alertService->getActiveAlerts($userId),
      'today_bookings' => $this->bookingService->getTodayBookings($userId),
      'inquiries' => $this->inquiryService->getPendingByUrgency($userId),
      'priority_cases' => $this->caseService->getPriorityCases($userId, 5),
      'documents' => $this->documentService->getPendingActions($userId),
      'metrics' => $this->metricsService->getProviderMetrics($userId),
      'quotes' => $this->quoteService->getPendingQuotes($userId),
      'activity' => $this->activityService->getRecent($userId, 10),
      default => throw new InvalidWidgetException($widgetId),
    };
  }
}

4.2 ProviderMetricsService
<?php namespace Drupal\jaraba_dashboard\Service;

class ProviderMetricsService {
  
  public function getProviderMetrics(int $userId, string $period = 'week'): ProviderMetrics {
    $dateRange = $this->getDateRange($period);
    
    return new ProviderMetrics([
      // Expedientes
      'active_cases' => $this->countActiveCases($userId),
      'cases_opened' => $this->countCasesOpened($userId, $dateRange),
      'cases_closed' => $this->countCasesClosed($userId, $dateRange),
      
      // Consultas
      'inquiries_received' => $this->countInquiriesReceived($userId, $dateRange),
      'inquiries_converted' => $this->countInquiriesConverted($userId, $dateRange),
      'conversion_rate' => $this->calculateConversionRate($userId, $dateRange),
      
      // Tiempos
      'avg_response_time_hours' => $this->avgResponseTime($userId, $dateRange),
      'avg_case_duration_days' => $this->avgCaseDuration($userId, $dateRange),
      
      // FacturaciÃ³n
      'revenue_period' => $this->calculateRevenue($userId, $dateRange),
      'pending_invoices' => $this->sumPendingInvoices($userId),
      'quotes_sent' => $this->countQuotesSent($userId, $dateRange),
      'quotes_accepted' => $this->countQuotesAccepted($userId, $dateRange),
      
      // Citas
      'bookings_completed' => $this->countBookingsCompleted($userId, $dateRange),
      'no_shows' => $this->countNoShows($userId, $dateRange),
    ]);
  }
}

â€ƒ
4.3 AlertGenerator
<?php namespace Drupal\jaraba_dashboard\Service;

class AlertGenerator {
  
  public function generateAlertsForProvider(int $userId): void {
    // 1. Alertas de deadlines
    $upcomingDeadlines = $this->caseRepository->getUpcomingDeadlines(
      $userId,
      hours: 48 // PrÃ³ximas 48 horas
    );
    
    foreach ($upcomingDeadlines as $case) {
      $this->createAlert([
        'user_id' => $userId,
        'alert_type' => 'deadline',
        'severity' => $this->calculateDeadlineSeverity($case->getDueDate()),
        'title' => "Plazo prÃ³ximo: {$case->getTitle()}",
        'message' => "Vence: {$case->getDueDate()->format('d/m H:i')}",
        'related_type' => 'case',
        'related_id' => $case->id(),
        'action_url' => "/cases/{$case->uuid()}",
        'expires_at' => $case->getDueDate(),
      ]);
    }
    
    // 2. Alertas de consultas urgentes
    $urgentInquiries = $this->inquiryRepository->getUrgentUnassigned(
      $userId,
      minUrgency: 4
    );
    
    if (count($urgentInquiries) > 0) {
      $this->createAlert([
        'alert_type' => 'inquiry',
        'severity' => 'warning',
        'title' => count($urgentInquiries) . ' consultas urgentes sin responder',
        'action_url' => '/inquiries?filter=urgent',
      ]);
    }
    
    // 3. Alertas de citas sin confirmar
    $unconfirmedBookings = $this->bookingRepository->getUnconfirmed(
      $userId,
      withinHours: 24
    );
    
    foreach ($unconfirmedBookings as $booking) {
      $this->createAlert([
        'alert_type' => 'booking',
        'severity' => 'warning',
        'title' => "Cita sin confirmar: {$booking->getClientName()}",
        'related_type' => 'booking',
        'related_id' => $booking->id(),
      ]);
    }
    
    // 4. Alertas de documentos pendientes de revisiÃ³n
    $pendingReview = $this->documentRequestRepository->getPendingReview($userId);
    // ... similar pattern
  }
}

â€ƒ
5. APIs REST
MÃ©todo	Endpoint	DescripciÃ³n	Auth
GET	/api/v1/dashboard	Obtener todos los datos del dashboard	Provider
GET	/api/v1/dashboard/widgets/{id}	Obtener datos de widget especÃ­fico	Provider
GET	/api/v1/dashboard/alerts	Listar alertas activas	Provider
POST	/api/v1/dashboard/alerts/{id}/dismiss	Descartar alerta	Provider
GET	/api/v1/dashboard/metrics	MÃ©tricas del profesional	Provider
GET	/api/v1/dashboard/config	ConfiguraciÃ³n del dashboard	Provider
PUT	/api/v1/dashboard/config	Actualizar configuraciÃ³n	Provider
GET	/api/v1/dashboard/activity	Timeline de actividad reciente	Provider

6. Actualizaciones en Tiempo Real
El dashboard utiliza WebSockets para actualizaciones en tiempo real de elementos crÃ­ticos:
Evento	Trigger	AcciÃ³n en Dashboard
inquiry.created	Nueva consulta entrante asignada al profesional	Actualiza widget consultas + notificaciÃ³n
alert.created	Nueva alerta crÃ­tica generada	AÃ±ade a widget alertas + sonido si crÃ­tica
booking.confirmed	Cliente confirma cita	Actualiza estado en agenda del dÃ­a
document.uploaded	Cliente sube documento al portal	Actualiza widget documentos pendientes
quote.accepted	Cliente acepta presupuesto	NotificaciÃ³n + actualiza mÃ©tricas

7. Roadmap de ImplementaciÃ³n
Sprint	Timeline	Entregables	Dependencias
Sprint 10.1	Semana 29	Modelo datos + DashboardService + APIs base	MÃ³dulos 82-93
Sprint 10.2	Semana 30	AlertGenerator + ProviderMetricsService + WebSocket	Sprint 10.1
Sprint 10.3	Semana 31	UI Dashboard + widgets configurables + drag-drop	Sprint 10.2
Sprint 10.4	Semana 32	Tiempo real + notificaciones push + tests E2E	Sprint 10.3

7.1 Criterios de AceptaciÃ³n
â€¢	âœ“ Dashboard carga en < 2 segundos con todos los widgets
â€¢	âœ“ Alertas crÃ­ticas visibles inmediatamente al entrar
â€¢	âœ“ Agenda del dÃ­a muestra citas con estado actualizado
â€¢	âœ“ MÃ©tricas calculadas correctamente por perÃ­odo
â€¢	âœ“ Widgets configurables por el usuario (posiciÃ³n, visibilidad)
â€¢	âœ“ Actualizaciones en tiempo real funcionando via WebSocket
â€¢	âœ“ Responsive: funciona en desktop, tablet y mÃ³vil

--- Fin del Documento ---
